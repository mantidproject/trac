<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      ConjoinSpectraNumAx.py on Ticket #7665 – Attachment
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../../../search.html" />
        <link rel="help" href="../../../wiki/TracGuide.html" />
        <link rel="alternate" href="../../../raw-attachment/ticket/7665/ConjoinSpectraNumAx.py" type="text/x-python; charset=iso-8859-15" title="Original Format" />
        <link rel="up" href="../../../ticket/7665.html" title="Ticket #7665" />
        <link rel="start" href="../../../wiki.html" />
        <link rel="stylesheet" href="../../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../../pygments/trac.css" type="text/css" /><link rel="stylesheet" href="../../../chrome/common/css/code.css" type="text/css" />
        <link rel="shortcut icon" href="../../../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../../../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../../../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript" src="../../../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../../../chrome/common/js/babel.js"></script><script type="text/javascript" src="../../../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../../../chrome/common/js/trac.js"></script><script type="text/javascript" src="../../../chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
      <script type="text/javascript" src="../../../chrome/common/js/folding.js"></script>
      <script type="text/javascript">
        jQuery(document).ready(function($) {
          $('#preview table.code').enableCollapsibleColumns($('#preview table.code thead th.content'));
        });
      </script>
    <link rel="stylesheet" type="text/css" href="../../../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../../../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../../../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../../../prefs.html">Preferences</a></li><li><a href="../../../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../../../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../../../wiki.html">Wiki</a></li><li><a href="../../../timeline.html">Timeline</a></li><li><a href="../../../roadmap.html">Roadmap</a></li><li><a href="../../../report.html">View Tickets</a></li><li class="last"><a href="../../../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="last first"><a href="../../../ticket/7665.html">Back to Ticket #7665</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="attachment">
        <h1><a href="../../../ticket/7665.html">Ticket #7665</a>: ConjoinSpectraNumAx.py</h1>
        <table id="info" summary="Description">
          <tbody>
            <tr>
              <th scope="col">File ConjoinSpectraNumAx.py,
                <span title="5579 bytes">5.4 KB</span>
                (added by Gesner Passos, <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-08-06T11%3A04%3A22%2B01%3A00&amp;precision=second" title="2013-08-06T11:04:22+01:00 in Timeline">7 years</a> ago)</th>
            </tr>
            <tr>
              <td class="message searchable">
                
              </td>
            </tr>
          </tbody>
        </table>
        <div id="preview" class="searchable">
          
  <table class="code"><thead><tr><th class="lineno" title="Line numbers">Line</th><th class="content"> </th></tr></thead><tbody><tr><th id="L1"><a href="ConjoinSpectraNumAx.py.html#L1">1</a></th><td><span class="sd">"""*WIKI* </span></td></tr><tr><th id="L2"><a href="ConjoinSpectraNumAx.py.html#L2">2</a></th><td><span class="sd"></span></td></tr><tr><th id="L3"><a href="ConjoinSpectraNumAx.py.html#L3">3</a></th><td><span class="sd">This algorithm allows a single spectrum to be extracted from a range of workspaces and placed into a single workspace for comparison and plotting.  The LabelUsing property allows you to control what the end labels applied to each spectra will be.  The default is to use the source workspace name, but you can specify the name of a log value to use as the label, e.g. Temp_Sample.  the LabelValue property allows control of how a single value is extracted from time series logs.</span></td></tr><tr><th id="L4"><a href="ConjoinSpectraNumAx.py.html#L4">4</a></th><td><span class="sd">Modified from standard ConjoinSpectra to make the Y axis numeric and so allow Colour Fill and Contour plots of the resulting Workspace2D. (JSL)</span></td></tr><tr><th id="L5"><a href="ConjoinSpectraNumAx.py.html#L5">5</a></th><td><span class="sd"></span></td></tr><tr><th id="L6"><a href="ConjoinSpectraNumAx.py.html#L6">6</a></th><td><span class="sd">*WIKI*"""</span></td></tr><tr><th id="L7"><a href="ConjoinSpectraNumAx.py.html#L7">7</a></th><td></td></tr><tr><th id="L8"><a href="ConjoinSpectraNumAx.py.html#L8">8</a></th><td><span class="kn">from</span> <span class="nn">mantid.api</span> <span class="kn">import</span> <span class="o">*</span></td></tr><tr><th id="L9"><a href="ConjoinSpectraNumAx.py.html#L9">9</a></th><td><span class="kn">from</span> <span class="nn">mantid.kernel</span> <span class="kn">import</span> <span class="o">*</span></td></tr><tr><th id="L10"><a href="ConjoinSpectraNumAx.py.html#L10">10</a></th><td><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span></td></tr><tr><th id="L11"><a href="ConjoinSpectraNumAx.py.html#L11">11</a></th><td><span class="kn">import</span> <span class="nn">os</span></td></tr><tr><th id="L12"><a href="ConjoinSpectraNumAx.py.html#L12">12</a></th><td></td></tr><tr><th id="L13"><a href="ConjoinSpectraNumAx.py.html#L13">13</a></th><td><span class="k">class</span> <span class="nc">ConjoinSpectraNumAx</span><span class="p">(</span>PythonAlgorithm<span class="p">):</span></td></tr><tr><th id="L14"><a href="ConjoinSpectraNumAx.py.html#L14">14</a></th><td>    <span class="sd">"""</span></td></tr><tr><th id="L15"><a href="ConjoinSpectraNumAx.py.html#L15">15</a></th><td><span class="sd">    Conjoins spectra from several workspaces into a single workspaceExists</span></td></tr><tr><th id="L16"><a href="ConjoinSpectraNumAx.py.html#L16">16</a></th><td><span class="sd">    </span></td></tr><tr><th id="L17"><a href="ConjoinSpectraNumAx.py.html#L17">17</a></th><td><span class="sd">    Spectra to be conjoined must be equally binned in order for ConjoinSpectra to work. If necessary use RebinToWorkspace first.         </span></td></tr><tr><th id="L18"><a href="ConjoinSpectraNumAx.py.html#L18">18</a></th><td><span class="sd">    """</span></td></tr><tr><th id="L19"><a href="ConjoinSpectraNumAx.py.html#L19">19</a></th><td>   </td></tr><tr><th id="L20"><a href="ConjoinSpectraNumAx.py.html#L20">20</a></th><td>    <span class="k">def</span> <span class="nf">category</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></td></tr><tr><th id="L21"><a href="ConjoinSpectraNumAx.py.html#L21">21</a></th><td>        <span class="k">return</span> <span class="s">"Transforms</span><span class="se">\\</span><span class="s">Merging;PythonAlgorithms"</span></td></tr><tr><th id="L22"><a href="ConjoinSpectraNumAx.py.html#L22">22</a></th><td></td></tr><tr><th id="L23"><a href="ConjoinSpectraNumAx.py.html#L23">23</a></th><td>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></td></tr><tr><th id="L24"><a href="ConjoinSpectraNumAx.py.html#L24">24</a></th><td>        <span class="k">return</span> <span class="s">"ConjoinSpectraNumAx"</span></td></tr><tr><th id="L25"><a href="ConjoinSpectraNumAx.py.html#L25">25</a></th><td></td></tr><tr><th id="L26"><a href="ConjoinSpectraNumAx.py.html#L26">26</a></th><td>    <span class="k">def</span> <span class="nf">PyInit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></td></tr><tr><th id="L27"><a href="ConjoinSpectraNumAx.py.html#L27">27</a></th><td>        <span class="bp">self</span><span class="o">.</span>declareProperty<span class="p">(</span><span class="s">"InputWorkspaces"</span><span class="p">,</span><span class="s">""</span><span class="p">,</span> validator<span class="o">=</span>StringMandatoryValidator<span class="p">(),</span> doc<span class="o">=</span><span class="s">"Comma seperated list of workspaces to use, group workspaces will automatically include all members."</span><span class="p">)</span></td></tr><tr><th id="L28"><a href="ConjoinSpectraNumAx.py.html#L28">28</a></th><td>        <span class="bp">self</span><span class="o">.</span>declareProperty<span class="p">(</span>WorkspaceProperty<span class="p">(</span><span class="s">"OutputWorkspace"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> direction<span class="o">=</span>Direction<span class="o">.</span>Output<span class="p">),</span> doc<span class="o">=</span><span class="s">"Name the workspace that will contain the result"</span><span class="p">)</span></td></tr><tr><th id="L29"><a href="ConjoinSpectraNumAx.py.html#L29">29</a></th><td>        <span class="bp">self</span><span class="o">.</span>declareProperty<span class="p">(</span><span class="s">"WorkspaceIndex"</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> doc<span class="o">=</span><span class="s">"The workspace index of the spectra in each workspace to extract. Default: 0"</span><span class="p">)</span></td></tr><tr><th id="L30"><a href="ConjoinSpectraNumAx.py.html#L30">30</a></th><td>        <span class="bp">self</span><span class="o">.</span>declareProperty<span class="p">(</span><span class="s">"LabelUsing"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> doc<span class="o">=</span><span class="s">"The name of a log value used to label the resulting spectra. Default: The source workspace name"</span><span class="p">)</span></td></tr><tr><th id="L31"><a href="ConjoinSpectraNumAx.py.html#L31">31</a></th><td>        labelValueOptions <span class="o">=</span>  <span class="p">[</span><span class="s">"Mean"</span><span class="p">,</span><span class="s">"Median"</span><span class="p">,</span><span class="s">"Maximum"</span><span class="p">,</span><span class="s">"Minimum"</span><span class="p">,</span><span class="s">"First Value"</span><span class="p">,</span><span class="s">"Last Value"</span><span class="p">]</span></td></tr><tr><th id="L32"><a href="ConjoinSpectraNumAx.py.html#L32">32</a></th><td>        <span class="bp">self</span><span class="o">.</span>declareProperty<span class="p">(</span><span class="s">"LabelValue"</span><span class="p">,</span> <span class="s">"Mean"</span><span class="p">,</span> validator<span class="o">=</span>StringListValidator<span class="p">(</span>labelValueOptions<span class="p">),</span> doc<span class="o">=</span><span class="s">"How to derive the value from a time series property"</span><span class="p">)</span></td></tr><tr><th id="L33"><a href="ConjoinSpectraNumAx.py.html#L33">33</a></th><td>      </td></tr><tr><th id="L34"><a href="ConjoinSpectraNumAx.py.html#L34">34</a></th><td>      </td></tr><tr><th id="L35"><a href="ConjoinSpectraNumAx.py.html#L35">35</a></th><td>    <span class="k">def</span> <span class="nf">PyExec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></td></tr><tr><th id="L36"><a href="ConjoinSpectraNumAx.py.html#L36">36</a></th><td>        <span class="c"># get parameter values</span></td></tr><tr><th id="L37"><a href="ConjoinSpectraNumAx.py.html#L37">37</a></th><td>        wsOutput <span class="o">=</span> <span class="bp">self</span><span class="o">.</span>getPropertyValue<span class="p">(</span><span class="s">"OutputWorkspace"</span><span class="p">)</span></td></tr><tr><th id="L38"><a href="ConjoinSpectraNumAx.py.html#L38">38</a></th><td>        wsIndex <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span>getPropertyValue<span class="p">(</span><span class="s">"WorkspaceIndex"</span><span class="p">))</span></td></tr><tr><th id="L39"><a href="ConjoinSpectraNumAx.py.html#L39">39</a></th><td>        wsString <span class="o">=</span> <span class="bp">self</span><span class="o">.</span>getPropertyValue<span class="p">(</span><span class="s">"InputWorkspaces"</span><span class="p">)</span><span class="o">.</span>strip<span class="p">()</span></td></tr><tr><th id="L40"><a href="ConjoinSpectraNumAx.py.html#L40">40</a></th><td>        labelUsing <span class="o">=</span> <span class="bp">self</span><span class="o">.</span>getPropertyValue<span class="p">(</span><span class="s">"LabelUsing"</span><span class="p">)</span><span class="o">.</span>strip<span class="p">()</span></td></tr><tr><th id="L41"><a href="ConjoinSpectraNumAx.py.html#L41">41</a></th><td>        labelValue <span class="o">=</span> <span class="bp">self</span><span class="o">.</span>getPropertyValue<span class="p">(</span><span class="s">"LabelValue"</span><span class="p">)</span></td></tr><tr><th id="L42"><a href="ConjoinSpectraNumAx.py.html#L42">42</a></th><td></td></tr><tr><th id="L43"><a href="ConjoinSpectraNumAx.py.html#L43">43</a></th><td>        <span class="c">#internal values</span></td></tr><tr><th id="L44"><a href="ConjoinSpectraNumAx.py.html#L44">44</a></th><td>        wsTemp <span class="o">=</span> <span class="s">"__ConjoinSpectra_temp"</span></td></tr><tr><th id="L45"><a href="ConjoinSpectraNumAx.py.html#L45">45</a></th><td>        loopIndex<span class="o">=</span><span class="mi">0</span></td></tr><tr><th id="L46"><a href="ConjoinSpectraNumAx.py.html#L46">46</a></th><td>        </td></tr><tr><th id="L47"><a href="ConjoinSpectraNumAx.py.html#L47">47</a></th><td>        <span class="c">#get the wokspace list</span></td></tr><tr><th id="L48"><a href="ConjoinSpectraNumAx.py.html#L48">48</a></th><td>        wsNames <span class="o">=</span> <span class="p">[]</span></td></tr><tr><th id="L49"><a href="ConjoinSpectraNumAx.py.html#L49">49</a></th><td>        <span class="k">for</span> wsName <span class="ow">in</span> wsString<span class="o">.</span>split<span class="p">(</span><span class="s">","</span><span class="p">):</span></td></tr><tr><th id="L50"><a href="ConjoinSpectraNumAx.py.html#L50">50</a></th><td>            wsName <span class="o">=</span> wsName<span class="o">.</span>strip<span class="p">()</span></td></tr><tr><th id="L51"><a href="ConjoinSpectraNumAx.py.html#L51">51</a></th><td>        <span class="c">#check the ws is in mantid</span></td></tr><tr><th id="L52"><a href="ConjoinSpectraNumAx.py.html#L52">52</a></th><td>            <span class="c">#if we cannot find the ws then stop</span></td></tr><tr><th id="L53"><a href="ConjoinSpectraNumAx.py.html#L53">53</a></th><td>            <span class="k">if</span> wsName <span class="ow">not</span> <span class="ow">in</span> mtd<span class="p">:</span></td></tr><tr><th id="L54"><a href="ConjoinSpectraNumAx.py.html#L54">54</a></th><td>                <span class="k">raise</span> <span class="ne">RuntimeError</span> <span class="p">(</span><span class="s">"Cannot find workspace '"</span> <span class="o">+</span> wsName<span class="o">.</span>strip<span class="p">()</span> <span class="o">+</span> <span class="s">"', aborting"</span><span class="p">)</span></td></tr><tr><th id="L55"><a href="ConjoinSpectraNumAx.py.html#L55">55</a></th><td></td></tr><tr><th id="L56"><a href="ConjoinSpectraNumAx.py.html#L56">56</a></th><td>            ws <span class="o">=</span> mtd<span class="p">[</span>wsName<span class="p">]</span></td></tr><tr><th id="L57"><a href="ConjoinSpectraNumAx.py.html#L57">57</a></th><td></td></tr><tr><th id="L58"><a href="ConjoinSpectraNumAx.py.html#L58">58</a></th><td>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>ws<span class="p">,</span> WorkspaceGroup<span class="p">):</span></td></tr><tr><th id="L59"><a href="ConjoinSpectraNumAx.py.html#L59">59</a></th><td>                wsNames<span class="o">.</span>extend<span class="p">(</span>ws<span class="o">.</span>getNames<span class="p">())</span></td></tr><tr><th id="L60"><a href="ConjoinSpectraNumAx.py.html#L60">60</a></th><td>            <span class="k">else</span><span class="p">:</span></td></tr><tr><th id="L61"><a href="ConjoinSpectraNumAx.py.html#L61">61</a></th><td>                wsNames<span class="o">.</span>append<span class="p">(</span>wsName<span class="p">)</span></td></tr><tr><th id="L62"><a href="ConjoinSpectraNumAx.py.html#L62">62</a></th><td></td></tr><tr><th id="L63"><a href="ConjoinSpectraNumAx.py.html#L63">63</a></th><td>        <span class="c">#ta = TextAxis.create(len(wsNames))</span></td></tr><tr><th id="L64"><a href="ConjoinSpectraNumAx.py.html#L64">64</a></th><td>        na <span class="o">=</span> NumericAxis<span class="o">.</span>create<span class="p">(</span><span class="nb">len</span><span class="p">(</span>wsNames<span class="p">))</span></td></tr><tr><th id="L65"><a href="ConjoinSpectraNumAx.py.html#L65">65</a></th><td>        <span class="c">#if (labelUsing != ""):</span></td></tr><tr><th id="L66"><a href="ConjoinSpectraNumAx.py.html#L66">66</a></th><td>        <span class="c">#    na.title(labelUsing)</span></td></tr><tr><th id="L67"><a href="ConjoinSpectraNumAx.py.html#L67">67</a></th><td>        <span class="c">#else:</span></td></tr><tr><th id="L68"><a href="ConjoinSpectraNumAx.py.html#L68">68</a></th><td>        <span class="c">#    na.title("Workspaces")</span></td></tr><tr><th id="L69"><a href="ConjoinSpectraNumAx.py.html#L69">69</a></th><td>        na<span class="o">.</span>setUnit<span class="p">(</span><span class="s">"TOF"</span><span class="p">)</span></td></tr><tr><th id="L70"><a href="ConjoinSpectraNumAx.py.html#L70">70</a></th><td>        <span class="c">#if wsOutput in mtd:</span></td></tr><tr><th id="L71"><a href="ConjoinSpectraNumAx.py.html#L71">71</a></th><td>        <span class="c">#    DeleteWorkspace(Workspace=wsOutput)</span></td></tr><tr><th id="L72"><a href="ConjoinSpectraNumAx.py.html#L72">72</a></th><td>        <span class="k">for</span> wsName <span class="ow">in</span> wsNames<span class="p">:</span></td></tr><tr><th id="L73"><a href="ConjoinSpectraNumAx.py.html#L73">73</a></th><td>            <span class="c">#extract the spectrum</span></td></tr><tr><th id="L74"><a href="ConjoinSpectraNumAx.py.html#L74">74</a></th><td>            ExtractSingleSpectrum<span class="p">(</span>InputWorkspace<span class="o">=</span>wsName<span class="p">,</span>OutputWorkspace<span class="o">=</span>wsTemp<span class="p">,</span>WorkspaceIndex<span class="o">=</span>wsIndex<span class="p">)</span></td></tr><tr><th id="L75"><a href="ConjoinSpectraNumAx.py.html#L75">75</a></th><td>            </td></tr><tr><th id="L76"><a href="ConjoinSpectraNumAx.py.html#L76">76</a></th><td>            labelDouble <span class="o">=</span><span class="mf">0.0</span></td></tr><tr><th id="L77"><a href="ConjoinSpectraNumAx.py.html#L77">77</a></th><td>            <span class="k">if</span> <span class="p">(</span>labelUsing <span class="o">!=</span> <span class="s">""</span><span class="p">):</span></td></tr><tr><th id="L78"><a href="ConjoinSpectraNumAx.py.html#L78">78</a></th><td>                labelDouble <span class="o">=</span> <span class="bp">self</span><span class="o">.</span>GetLogValue<span class="p">(</span>mtd<span class="p">[</span>wsName<span class="o">.</span>strip<span class="p">()],</span>labelUsing<span class="p">,</span>labelValue<span class="p">)</span></td></tr><tr><th id="L79"><a href="ConjoinSpectraNumAx.py.html#L79">79</a></th><td>            <span class="k">else</span><span class="p">:</span></td></tr><tr><th id="L80"><a href="ConjoinSpectraNumAx.py.html#L80">80</a></th><td>                labelDouble <span class="o">=</span> loopIndex <span class="o">+</span> <span class="mf">0.0</span></td></tr><tr><th id="L81"><a href="ConjoinSpectraNumAx.py.html#L81">81</a></th><td>            <span class="c">#ta.setValue(loopIndex,labelString)</span></td></tr><tr><th id="L82"><a href="ConjoinSpectraNumAx.py.html#L82">82</a></th><td>            na<span class="o">.</span>setValue<span class="p">(</span>loopIndex<span class="p">,</span>labelDouble<span class="p">)</span></td></tr><tr><th id="L83"><a href="ConjoinSpectraNumAx.py.html#L83">83</a></th><td>            loopIndex <span class="o">+=</span> <span class="mi">1</span></td></tr><tr><th id="L84"><a href="ConjoinSpectraNumAx.py.html#L84">84</a></th><td>            <span class="k">if</span> wsOutput <span class="ow">in</span> mtd<span class="p">:</span></td></tr><tr><th id="L85"><a href="ConjoinSpectraNumAx.py.html#L85">85</a></th><td>                ConjoinWorkspaces<span class="p">(</span>InputWorkspace1<span class="o">=</span>wsOutput<span class="p">,</span>InputWorkspace2<span class="o">=</span>wsTemp<span class="p">,</span>CheckOverlapping<span class="o">=</span><span class="bp">False</span><span class="p">)</span></td></tr><tr><th id="L86"><a href="ConjoinSpectraNumAx.py.html#L86">86</a></th><td>                <span class="k">if</span> wsTemp <span class="ow">in</span> mtd<span class="p">:</span></td></tr><tr><th id="L87"><a href="ConjoinSpectraNumAx.py.html#L87">87</a></th><td>                    DeleteWorkspace<span class="p">(</span>Workspace<span class="o">=</span>wsTemp<span class="p">)</span></td></tr><tr><th id="L88"><a href="ConjoinSpectraNumAx.py.html#L88">88</a></th><td>            <span class="k">else</span><span class="p">:</span></td></tr><tr><th id="L89"><a href="ConjoinSpectraNumAx.py.html#L89">89</a></th><td>                RenameWorkspace<span class="p">(</span>InputWorkspace<span class="o">=</span>wsTemp<span class="p">,</span>OutputWorkspace<span class="o">=</span>wsOutput<span class="p">)</span></td></tr><tr><th id="L90"><a href="ConjoinSpectraNumAx.py.html#L90">90</a></th><td></td></tr><tr><th id="L91"><a href="ConjoinSpectraNumAx.py.html#L91">91</a></th><td>        wsOut <span class="o">=</span> mtd<span class="p">[</span>wsOutput<span class="p">]</span></td></tr><tr><th id="L92"><a href="ConjoinSpectraNumAx.py.html#L92">92</a></th><td>        <span class="c">#replace the spectrun axis</span></td></tr><tr><th id="L93"><a href="ConjoinSpectraNumAx.py.html#L93">93</a></th><td>        wsOut<span class="o">.</span>replaceAxis<span class="p">(</span><span class="mi">1</span><span class="p">,</span>na<span class="p">)</span></td></tr><tr><th id="L94"><a href="ConjoinSpectraNumAx.py.html#L94">94</a></th><td></td></tr><tr><th id="L95"><a href="ConjoinSpectraNumAx.py.html#L95">95</a></th><td></td></tr><tr><th id="L96"><a href="ConjoinSpectraNumAx.py.html#L96">96</a></th><td>        <span class="bp">self</span><span class="o">.</span>setProperty<span class="p">(</span><span class="s">"OutputWorkspace"</span><span class="p">,</span>wsOut<span class="p">)</span></td></tr><tr><th id="L97"><a href="ConjoinSpectraNumAx.py.html#L97">97</a></th><td>        </td></tr><tr><th id="L98"><a href="ConjoinSpectraNumAx.py.html#L98">98</a></th><td>    <span class="k">def</span> <span class="nf">GetLogValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>ws<span class="p">,</span>labelUsing<span class="p">,</span>labelValue<span class="p">):</span></td></tr><tr><th id="L99"><a href="ConjoinSpectraNumAx.py.html#L99">99</a></th><td>        labelDouble <span class="o">=</span> <span class="mf">0.0</span></td></tr><tr><th id="L100"><a href="ConjoinSpectraNumAx.py.html#L100">100</a></th><td>        run<span class="o">=</span>ws<span class="o">.</span>getRun<span class="p">()</span></td></tr><tr><th id="L101"><a href="ConjoinSpectraNumAx.py.html#L101">101</a></th><td>        <span class="k">try</span><span class="p">:</span></td></tr><tr><th id="L102"><a href="ConjoinSpectraNumAx.py.html#L102">102</a></th><td>            prop <span class="o">=</span> run<span class="o">.</span>getProperty<span class="p">(</span>labelUsing<span class="p">)</span></td></tr><tr><th id="L103"><a href="ConjoinSpectraNumAx.py.html#L103">103</a></th><td>            <span class="k">try</span><span class="p">:</span></td></tr><tr><th id="L104"><a href="ConjoinSpectraNumAx.py.html#L104">104</a></th><td>                stats <span class="o">=</span> prop<span class="o">.</span>getStatistics<span class="p">()</span></td></tr><tr><th id="L105"><a href="ConjoinSpectraNumAx.py.html#L105">105</a></th><td>                <span class="k">if</span> <span class="p">(</span>labelValue <span class="o">==</span> <span class="s">"Mean"</span><span class="p">):</span></td></tr><tr><th id="L106"><a href="ConjoinSpectraNumAx.py.html#L106">106</a></th><td>                    labelDouble <span class="o">=</span> stats<span class="o">.</span>mean</td></tr><tr><th id="L107"><a href="ConjoinSpectraNumAx.py.html#L107">107</a></th><td>                <span class="k">elif</span> <span class="p">(</span>labelValue <span class="o">==</span> <span class="s">"Median"</span><span class="p">):</span></td></tr><tr><th id="L108"><a href="ConjoinSpectraNumAx.py.html#L108">108</a></th><td>                    labelDouble <span class="o">=</span> stats<span class="o">.</span>median</td></tr><tr><th id="L109"><a href="ConjoinSpectraNumAx.py.html#L109">109</a></th><td>                <span class="k">elif</span> <span class="p">(</span>labelValue <span class="o">==</span> <span class="s">"Maximum"</span><span class="p">):</span></td></tr><tr><th id="L110"><a href="ConjoinSpectraNumAx.py.html#L110">110</a></th><td>                    labelDouble <span class="o">=</span> stats<span class="o">.</span>maximum</td></tr><tr><th id="L111"><a href="ConjoinSpectraNumAx.py.html#L111">111</a></th><td>                <span class="k">elif</span> <span class="p">(</span>labelValue <span class="o">==</span> <span class="s">"Minimum"</span><span class="p">):</span></td></tr><tr><th id="L112"><a href="ConjoinSpectraNumAx.py.html#L112">112</a></th><td>                    labelDouble <span class="o">=</span> stats<span class="o">.</span>minimum</td></tr><tr><th id="L113"><a href="ConjoinSpectraNumAx.py.html#L113">113</a></th><td>                <span class="k">elif</span> <span class="p">(</span>labelValue <span class="o">==</span> <span class="s">"Last Value"</span><span class="p">):</span></td></tr><tr><th id="L114"><a href="ConjoinSpectraNumAx.py.html#L114">114</a></th><td>                    labelDouble <span class="o">=</span> prop<span class="o">.</span>value<span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.0</span></td></tr><tr><th id="L115"><a href="ConjoinSpectraNumAx.py.html#L115">115</a></th><td>                <span class="k">else</span><span class="p">:</span></td></tr><tr><th id="L116"><a href="ConjoinSpectraNumAx.py.html#L116">116</a></th><td>                    labelDouble <span class="o">=</span>  prop<span class="o">.</span>value<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.0</span></td></tr><tr><th id="L117"><a href="ConjoinSpectraNumAx.py.html#L117">117</a></th><td>            <span class="k">except</span><span class="p">:</span></td></tr><tr><th id="L118"><a href="ConjoinSpectraNumAx.py.html#L118">118</a></th><td>                <span class="c">#this is not a time series property - just return the value</span></td></tr><tr><th id="L119"><a href="ConjoinSpectraNumAx.py.html#L119">119</a></th><td>                labelDouble <span class="o">=</span>  prop<span class="o">.</span>value <span class="o">+</span> <span class="mf">0.0</span></td></tr><tr><th id="L120"><a href="ConjoinSpectraNumAx.py.html#L120">120</a></th><td>        <span class="k">except</span><span class="p">:</span></td></tr><tr><th id="L121"><a href="ConjoinSpectraNumAx.py.html#L121">121</a></th><td>            <span class="c">#failed to find the property</span></td></tr><tr><th id="L122"><a href="ConjoinSpectraNumAx.py.html#L122">122</a></th><td>            <span class="c">#log and pass out zero</span></td></tr><tr><th id="L123"><a href="ConjoinSpectraNumAx.py.html#L123">123</a></th><td>            logger<span class="o">.</span>notice<span class="p">(</span><span class="s">"Could not find log "</span> <span class="o">+</span> labelUsing <span class="o">+</span> <span class="s">" in workspace "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>ws<span class="p">)</span> <span class="o">+</span> <span class="s">" using workspace label instead."</span><span class="p">)</span></td></tr><tr><th id="L124"><a href="ConjoinSpectraNumAx.py.html#L124">124</a></th><td>        <span class="k">return</span> labelDouble</td></tr><tr><th id="L125"><a href="ConjoinSpectraNumAx.py.html#L125">125</a></th><td></td></tr><tr><th id="L126"><a href="ConjoinSpectraNumAx.py.html#L126">126</a></th><td>AlgorithmFactory<span class="o">.</span>subscribe<span class="p">(</span>ConjoinSpectraNumAx<span class="p">)</span></td></tr></tbody></table>

        </div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="../../../raw-attachment/ticket/7665/ConjoinSpectraNumAx.py">Original Format</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../../../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../../../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>