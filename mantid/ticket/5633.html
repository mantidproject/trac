<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #5633 (Product Exponential Linear Fit Function)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="5632.html" title="Ticket #5632" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/5633?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/5633?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/5633?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="5634.html" title="Ticket #5634" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 5633, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="5632.html" title="Ticket #5632">Previous Ticket</a></span></li><li><span><a class="next" href="5634.html" title="Ticket #5634">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/5633.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="5633.html">Ticket #5633</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-20T08%3A55%3A33%2B01%3A00&amp;precision=second" title="2012-07-20T08:55:33+01:00 in Timeline">8 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T00%3A40%3A35%2B01%3A00&amp;precision=second" title="2015-06-04T00:40:35+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Product Exponential Linear Fit Function</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Owen+Arnold">Owen Arnold</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Owen+Arnold">Owen Arnold</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;2.2.html">Release 2.2</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Mantid">Mantid</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span><a class="closed ticket" href="5636.html" title="ProductFunction derivatives error">#5636</a></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Michael Reuter
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Following <a class="closed ticket" href="5626.html" title="enhancement: NormaliseByDetector (closed: fixed)">#5626</a> we need functions specific to detector efficiency corrections. These need to be named functions with named parameters so that they can be configured in the IDF xml.
</p>

    </div>
  </div>
</div>
          
    <div id="attachments">
        <h2 class="foldable">Attachments</h2>
        <div>
          <dl class="attachments">
              <dt>
    <a href="../attachment/ticket/5633/demo.xml.html" title="View attachment">demo.xml</a><a href="../raw-attachment/ticket/5633/demo.xml" class="trac-rawlink" title="Download">​</a>
       (<span title="735 bytes">735 bytes</span>) -
      added by <em>Owen Arnold</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-24T10%3A10%3A06%2B01%3A00&amp;precision=second" title="2012-07-24T10:10:06+01:00 in Timeline">8 years</a> ago.
  </dt>
          </dl>
          
        </div>
    </div>

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="5633.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-20T08%3A55%3A46%2B01%3A00&amp;precision=second" title="2012-07-20T08:55:46+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="5633.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-23T08%3A52%3A37%2B01%3A00&amp;precision=second" title="2012-07-23T08:52:37+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="5633.html" title="enhancement: Product Exponential Linear Fit Function (closed: fixed)">#5633</a>. New parameter function produced 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/0b7a4be579ef2ea24d4d3c10255c2d25e9f43308" title="0b7a4be579ef2ea24d4d3c10255c2d25e9f43308">0b7a4be579ef2ea24d4d3c10255c2d25e9f43308</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="5633.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-23T08%3A52%3A38%2B01%3A00&amp;precision=second" title="2012-07-23T08:52:38+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="5633.html" title="enhancement: Product Exponential Linear Fit Function (closed: fixed)">#5633</a>. Working and tested param function 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/e6ab7071fe373fd11bf4a0259e740d5fe546ef52" title="e6ab7071fe373fd11bf4a0259e740d5fe546ef52">e6ab7071fe373fd11bf4a0259e740d5fe546ef52</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="5633.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-23T08%3A57%3A22%2B01%3A00&amp;precision=second" title="2012-07-23T08:57:22+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="5633.html" title="enhancement: Product Exponential Linear Fit Function (closed: fixed)">#5633</a>. Fix GCC errors and warnings 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/e7d689242d1638f92a6f96f1cb094794b201f52d" title="e7d689242d1638f92a6f96f1cb094794b201f52d">e7d689242d1638f92a6f96f1cb094794b201f52d</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="5633.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-23T09%3A01%3A03%2B01%3A00&amp;precision=second" title="2012-07-23T09:01:03+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="5633.html" title="enhancement: Product Exponential Linear Fit Function (closed: fixed)">#5633</a>. Fix GCC errors 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/dbb8db89633f7d88d226afcec9f5bf804c68234d" title="dbb8db89633f7d88d226afcec9f5bf804c68234d">dbb8db89633f7d88d226afcec9f5bf804c68234d</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="5633.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-23T09%3A31%3A23%2B01%3A00&amp;precision=second" title="2012-07-23T09:31:23+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="5633.html" title="enhancement: Product Exponential Linear Fit Function (closed: fixed)">#5633</a>. Fix test precision issue on mac 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/fe70e69e5718be81cb84cd630fca47b10f788258" title="fe70e69e5718be81cb84cd630fca47b10f788258">fe70e69e5718be81cb84cd630fca47b10f788258</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="5633.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-23T10%3A48%3A59%2B01%3A00&amp;precision=second" title="2012-07-23T10:48:59+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="5633.html" title="enhancement: Product Exponential Linear Fit Function (closed: fixed)">#5633</a>. Characterise derivs using mocking 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/3d8e525bcb9637257e3efb8ce02ede1947193d98" title="3d8e525bcb9637257e3efb8ce02ede1947193d98">3d8e525bcb9637257e3efb8ce02ede1947193d98</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="5633.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-23T11%3A13%3A24%2B01%3A00&amp;precision=second" title="2012-07-23T11:13:24+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
Create a wiki page to describe the algorithm @ <a href="http://www.mantidproject.org/ProductLinearExp">http://www.mantidproject.org/ProductLinearExp</a> 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="5633.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-23T13%3A38%3A44%2B01%3A00&amp;precision=second" title="2012-07-23T13:38:44+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocked By</strong>
        <em>5636</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="5633.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-23T16%3A08%3A30%2B01%3A00&amp;precision=second" title="2012-07-23T16:08:30+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="5633.html" title="enhancement: Product Exponential Linear Fit Function (closed: fixed)">#5633</a>. Calculate Jacobian. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/60d8b749ecebe1a1bd802b5ecdb398bfdc79fac0" title="60d8b749ecebe1a1bd802b5ecdb398bfdc79fac0">60d8b749ecebe1a1bd802b5ecdb398bfdc79fac0</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="5633.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-23T16%3A08%3A30%2B01%3A00&amp;precision=second" title="2012-07-23T16:08:30+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="5633.html" title="enhancement: Product Exponential Linear Fit Function (closed: fixed)">#5633</a> <a class="closed ticket" href="5634.html" title="enhancement: Product Exponential Quadratic Fit Function (closed: fixed)">#5634</a>. Documentation. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/3b1821e1920f87f9756d2accbf92cb8ba758c52f" title="3b1821e1920f87f9756d2accbf92cb8ba758c52f">3b1821e1920f87f9756d2accbf92cb8ba758c52f</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="5633.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-24T10%3A09%3A38%2B01%3A00&amp;precision=second" title="2012-07-24T10:09:38+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
Tester: The following python code (along with the attached demo.xml file) can be used to verify that this fit function is working, and is compatible with the NormaliseByDetector algorithm, for which it has been written. Running the following script should not cause any exception to be raised.
</p>
<div class="code"><pre>
<span class="kn">import</span> <span class="nn">math</span> 

inWS <span class="o">=</span> Load<span class="p">(</span>Filename<span class="o">=</span><span class="s">'POLREF00004699.nxs'</span><span class="p">)</span> <span class="c"># in AutoTest dir</span>
inWS <span class="o">=</span> ConvertSpectrumAxis<span class="p">(</span>InputWorkspace<span class="o">=</span>inWS<span class="p">,</span>Target<span class="o">=</span><span class="s">'signed_theta'</span><span class="p">)</span>
inWS <span class="o">=</span> inWS<span class="p">[</span><span class="mi">0</span><span class="p">]</span>
inWS <span class="o">=</span> ConvertUnits<span class="p">(</span>InputWorkspace<span class="o">=</span>inWS<span class="p">,</span>Target<span class="o">=</span><span class="s">'Wavelength'</span><span class="p">,</span>EMode<span class="o">=</span><span class="s">'Indirect'</span><span class="p">)</span>

<span class="c"># Overwrite the</span>
<span class="k">for</span> i <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> inWS<span class="o">.</span>getNumberHistograms<span class="p">()):</span>
        Y <span class="o">=</span> inWS<span class="o">.</span>dataY<span class="p">(</span>i<span class="p">)</span>
        <span class="k">for</span> j <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span>Y<span class="p">)):</span>
                Y<span class="p">[</span>j<span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c"># Parameter file sets a global ProductLinearExp fit function for the whole instrument.</span>
LoadParameterFile<span class="p">(</span>Workspace<span class="o">=</span>inWS<span class="p">,</span>Filename<span class="o">=</span><span class="s">r'demo.xml'</span><span class="p">)</span>
normalised <span class="o">=</span> NormaliseByDetector<span class="p">(</span>InputWorkspace<span class="o">=</span>inWS<span class="p">)</span>

<span class="c"># It's enough just to use just the first histogram and compare the expected Y values with the Actual ones to determine if the ProductLinearExp fit function is being used.</span>
<span class="k">for</span> k <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        Xout <span class="o">=</span> normalised<span class="o">.</span>dataX<span class="p">(</span>i<span class="p">)</span>
        Yout <span class="o">=</span> normalised<span class="o">.</span>dataY<span class="p">(</span>i<span class="p">)</span>
        Yin <span class="o">=</span> inWS<span class="o">.</span>dataY<span class="p">(</span>i<span class="p">)</span>
        <span class="k">for</span> l <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span>Xout<span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                x <span class="o">=</span> <span class="p">(</span>Xout<span class="p">[</span>l<span class="p">]</span>  <span class="o">+</span> Xout<span class="p">[</span>l <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>  <span class="o">/</span> <span class="mi">2</span>
                yExpected<span class="o">=</span> <span class="mi">1</span><span class="o">/</span>math<span class="o">.</span>exp<span class="p">(</span><span class="o">-</span>x<span class="o">/</span><span class="mi">1</span><span class="p">)</span> <span class="c"># because we set A1 = 0, A0 = 1. Height=1 and Lifetime = 1 in the demo.xml file.</span>
                yActual <span class="o">=</span> Yout<span class="p">[</span>l<span class="p">]</span>
                <span class="k">if</span><span class="p">((</span>math<span class="o">.</span>fabs<span class="p">(</span>yExpected<span class="p">)</span> <span class="o">-</span> math<span class="o">.</span>fabs<span class="p">(</span>yActual<span class="p">))</span> <span class="o">&gt;</span> <span class="mf">0.0001</span><span class="p">):</span>
                        <span class="k">print</span> math<span class="o">.</span>fabs<span class="p">(</span>yExpected<span class="p">)</span> <span class="p">,</span> math<span class="o">.</span>fabs<span class="p">(</span>yActual<span class="p">)</span>
                        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">"Error, NormaliseByDetector is not using ProductLinearExp fit function properly."</span><span class="p">)</span>
</pre></div>
    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-24T10%3A23%3A18%2B01%3A00&amp;precision=second" title="2012-07-24T10:23:18+01:00 in Timeline">8 years</a> ago
                      by Owen Arnold
                    (<a href="https://trac.mantidproject.org/mantid/ticket/5633?cversion=0&amp;cnum_hist=12#comment:12">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/5633?action=comment-diff&amp;cnum=12&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-24T10%3A10%3A06%2B01%3A00&amp;precision=second" title="2012-07-24T10:10:06+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/5633/demo.xml.html"><em>demo.xml</em></a><a href="../raw-attachment/ticket/5633/demo.xml" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="5633.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-24T10%3A10%3A26%2B01%3A00&amp;precision=second" title="2012-07-24T10:10:26+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="5633.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-07-25T09%3A40%3A56%2B01%3A00&amp;precision=second" title="2012-07-25T09:40:56+01:00 in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="5633.html" title="enhancement: Product Exponential Linear Fit Function (closed: fixed)">#5633</a> <a class="closed ticket" href="5634.html" title="enhancement: Product Exponential Quadratic Fit Function (closed: fixed)">#5634</a>. Test via FunctionFactory
</p>
<p>
Quite a simple but important test, because these functions would not work via NormaliseByDetector unless they were factory registered. Also provides checking that they are types of IFunction, since the test downcasts the boost shared_ptr. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/76e97bb7f0c883f83d6a97f19d0ac2b1f91ab3fe" title="76e97bb7f0c883f83d6a97f19d0ac2b1f91ab3fe">76e97bb7f0c883f83d6a97f19d0ac2b1f91ab3fe</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="5633.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-08-06T19%3A16%3A16%2B01%3A00&amp;precision=second" title="2012-08-06T19:16:16+01:00 in Timeline">8 years</a> ago by Michael Reuter
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Michael Reuter</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="5633.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-08-06T20%3A00%3A10%2B01%3A00&amp;precision=second" title="2012-08-06T20:00:10+01:00 in Timeline">8 years</a> ago by Michael Reuter
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
This seems to be working fine.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="5633.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T00%3A40%3A35%2B01%3A00&amp;precision=second" title="2015-06-04T00:40:35+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/6479"><span class="icon">​</span>6479</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/mantid/pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/5633?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/5633?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/5633?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>