<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #5942 (SANS: Beam centre HAB algorithm)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="5941.html" title="Ticket #5941" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/5942?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/5942?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/5942?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="5943.html" title="Ticket #5943" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 5942, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="5941.html" title="Ticket #5941">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="5943.html" title="Ticket #5943">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="5942.html">Ticket #5942</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-10-11T15%3A15%3A33%2B01%3A00&amp;precision=second" title="2012-10-11T15:15:33+01:00 in Timeline">8 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T00%3A53%3A22%2B01%3A00&amp;precision=second" title="2015-06-04T00:53:22+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">SANS: Beam centre HAB algorithm</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Anders+Markvardsen">Anders Markvardsen</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Gesner+Passos">Gesner Passos</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=blocker">blocker</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;2.5.html">Release 2.5</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=MantidPlot">MantidPlot</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;keywords=~PatchCandidate">PatchCandidate</a>,<a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;keywords=~Released">Released</a>
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              stephen.king@…, richard.heenan@…, anders.markvardsen@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Martyn Gigg
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Having control over the beam centre of the front detector
on LOQ and SANS2D is and will be handle differently, because
SANS2D front detector is very moveable, and is different from the LOQ
HAB's detector.
</p>
<p>
At the moment the moveable position of the SANS2D front is 
handled. 
</p>
<p>
However, there is no handling of the beam centre of the LOQ HAB's
detector. 
</p>
<p>
The handling of this beam centre should be done in the same way
as the rear detectors of both SANS2D and LOQ.
</p>
<p>
The user experience is that the left panel of the Geometry tab
changes to something like:
</p>
<p>
Rear detector (mm) ( 234    5240 )  tickbox
</p>
<p>
Front detector (mm) ( 423   2342 )  tickbox
</p>
<p>
where one and only one of the tickbox are ticked (perhaps use radio buttons here instead) and centre of that detector is found when the Run button is clicked. Further when SANS2D data are loaded the Front detector tickbox must be greyed off and the coordinates displayed are the x and y coordinates of the front detector.  
</p>

    </div>
  </div>
</div>
          
    <div id="attachments">
        <h2 class="foldable">Attachments</h2>
        <div>
          <dl class="attachments">
              <dt>
    <a href="../attachment/ticket/5942/bugfound5942.pdf.html" title="View attachment">bugfound5942.pdf</a><a href="../raw-attachment/ticket/5942/bugfound5942.pdf" class="trac-rawlink" title="Download">​</a>
       (<span title="146951 bytes">143.5 KB</span>) -
      added by <em>Gesner Passos</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-07T09%3A01%3A19Z&amp;precision=second" title="2013-01-07T09:01:19Z in Timeline">8 years</a> ago.
  </dt>
              <dd>
                User reported a bug related to this ticket
              </dd>
          </dl>
          
        </div>
    </div>

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="5942.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-10-28T11%3A39%3A08Z&amp;precision=second" title="2012-10-28T11:39:08Z in Timeline">8 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Release 2.3</em> to <em>Release 2.4</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Moved to milestone 2.4
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="5942.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-11-19T09%3A34%3A04Z&amp;precision=second" title="2012-11-19T09:34:04Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
The implementation of this ticket requires also to extend the files defined in the user 
script, as described in <a href="http://www.mantidproject.org/SANS_User_File_Commands#SET">User file Commands</a>. The SET CENTRE command will change to: 
</p>
<pre class="wiki">SET CENTRE/MAIN X Y X_PIXEL_DIMENSION Y_PIXEL_DIMENSION
SET CENTRE/HAB  X Y X_PIXEL_DIMENSION Y_PIXEL_DIMENSION
</pre><p>
For compatibility reason, SET CENTRE X Y X_PIX Y_PIX will be still valid and will refer to 
SET CENTRE/MAIN command.
</p>
<p>
tester: the wiki page must be corrected as well.
</p>
<p>
tester: After loading the 'User File', the Beam Centre group box, inside the Geometry tab must reflect the values of the defined centre.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="5942.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-11-19T09%3A35%3A47Z&amp;precision=second" title="2012-11-19T09:35:47Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li><li>
      <strong>Cc</strong>
        <em>anders.markvardsen@…</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="5942.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-11-23T16%3A08%3A51Z&amp;precision=second" title="2012-11-23T16:08:51Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
A good file to show the BeamFinder for the HAB detector is the run 74466 -&gt; cycle_12_4.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="5942.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-11-26T10%3A26%3A31Z&amp;precision=second" title="2012-11-26T10:26:31Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
SANS: BeamCentre support for high angle detectors bank
</p>
<p>
re <a class="closed ticket" href="5942.html" title="defect: SANS: Beam centre HAB algorithm (closed: fixed)">#5942</a>
</p>
<ul><li>SANSRunWindow.ui: Add widgets inside Geometry Tab that allows to show/edit
the centre for the high/low angle bank.
</li><li>SANSRunWindow.cpp: Interact with the changes in SANSRunWindow and also
with the changes in the script in order to support both detectors.
</li><li>isis_reducer.py: The changes made here is to support the definition of the
centre for both detectors, allowing to get its position get_beam_center
and to define their positions. It does extend the class Sample to allow
reloading the data to move the detector bank component to the correct
position in order to apply the reduction.
</li><li>isis_reduction_steps: Extend parsing the USER FILE, in order to accept
the commands: SET CENTRE/[MAIN/HAB].
</li><li>ISISCommandInterface.py: Adapt the FindBeamCentre method to support both
detectors, adapt the WavRangeReduction to reload the dataset for
moving the hab detector to its center in order to correct use this
parameter for the reduction. Extends the method SetCentre. 
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bab290eb5b68fad8f6ef9209d9987a8e961d4da6" title="bab290eb5b68fad8f6ef9209d9987a8e961d4da6">bab290eb5b68fad8f6ef9209d9987a8e961d4da6</a>
</li></ul>
    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="5942.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-11-26T11%3A03%3A10Z&amp;precision=second" title="2012-11-26T11:03:10Z in Timeline">8 years</a> ago by Anders Markvardsen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>assigned</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="5942.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-06T21%3A11%3A14Z&amp;precision=second" title="2012-12-06T21:11:14Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
SANS: BeamCentre support for high angle detectors bank
</p>
<p>
re <a class="closed ticket" href="5942.html" title="defect: SANS: Beam centre HAB algorithm (closed: fixed)">#5942</a>
</p>
<ul><li>SANSRunWindow.ui: Add widgets inside Geometry Tab that allows to show/edit
the centre for the high/low angle bank.
</li><li>SANSRunWindow.cpp: Interact with the changes in SANSRunWindow and also
with the changes in the script in order to support both detectors.
</li><li>isis_reducer.py: The changes made here is to support the definition of the
centre for both detectors, allowing to get its position get_beam_center
and to define their positions. It does extend the class Sample to allow
reloading the data to move the detector bank component to the correct
position in order to apply the reduction.
</li><li>isis_reduction_steps: Extend parsing the USER FILE, in order to accept
the commands: SET CENTRE/[MAIN/HAB].
</li><li>ISISCommandInterface.py: Adapt the FindBeamCentre method to support both
detectors, adapt the WavRangeReduction to reload the dataset for
moving the hab detector to its center in order to correct use this
parameter for the reduction. Extends the method SetCentre. 
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bab290eb5b68fad8f6ef9209d9987a8e961d4da6" title="bab290eb5b68fad8f6ef9209d9987a8e961d4da6">bab290eb5b68fad8f6ef9209d9987a8e961d4da6</a>
</li></ul>
    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-07T09%3A01%3A19Z&amp;precision=second" title="2013-01-07T09:01:19Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/5942/bugfound5942.pdf.html"><em>bugfound5942.pdf</em></a><a href="../raw-attachment/ticket/5942/bugfound5942.pdf" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
User reported a bug related to this ticket
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="5942.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-08T15%3A15%3A25Z&amp;precision=second" title="2013-01-08T15:15:25Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
The error was due to incorrect assumption: the detector bank was positioned at its defined 
beam_center. While it used to be true, after this ticket, the user is allowed to change the 
beam_center variable, without moving the detector, which causes the detector not to be centered at its 'beam_center' anymore. As long the movement are always relative, the calculation was always at the same positions (but the beam_center was reported as different). 
</p>
<p>
It is necessary to change the FindBeamCentre to consider the current position of the bank when it starts. 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="5942.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-08T15%3A22%3A06Z&amp;precision=second" title="2013-01-08T15:22:06Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
BugSolved FindBeamCenter wrong answer
</p>
<p>
SANSRunWindow.cpp : add the centre information from the Geometry tab,
so to make it to be considered in SingleMode.
ISISCommandInterface.py: original does not take the beam_center position,
but get the position of the center of the bank detector. Avoiding the
wrong assumption that the detector bank will always be centered at its
defined beam_center.
isis_instrument.py : add a method cur_detector_position that returns the
position of the center of the detector bank, that is used in ISISCommandInterface
</p>
<p>
re <a class="closed ticket" href="5942.html" title="defect: SANS: Beam centre HAB algorithm (closed: fixed)">#5942</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b93e836e631a2156e3fc376672cea6f2c822a64e" title="b93e836e631a2156e3fc376672cea6f2c822a64e">b93e836e631a2156e3fc376672cea6f2c822a64e</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="5942.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-09T16%3A01%3A44Z&amp;precision=second" title="2013-01-09T16:01:44Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
BugSolved FindBeamCenter wrong answer
</p>
<p>
SANSRunWindow.cpp : add the centre information from the Geometry tab,
so to make it to be considered in SingleMode.
ISISCommandInterface.py: original does not take the beam_center position,
but get the position of the center of the bank detector. Avoiding the
wrong assumption that the detector bank will always be centered at its
defined beam_center.
isis_instrument.py : add a method cur_detector_position that returns the
position of the center of the detector bank, that is used in ISISCommandInterface
</p>
<p>
re <a class="closed ticket" href="5942.html" title="defect: SANS: Beam centre HAB algorithm (closed: fixed)">#5942</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b1e4536de3ae3dfe55387b8d2b620ea4e16d8c8b" title="b1e4536de3ae3dfe55387b8d2b620ea4e16d8c8b">b1e4536de3ae3dfe55387b8d2b620ea4e16d8c8b</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="5942.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-10T16%3A10%3A10Z&amp;precision=second" title="2013-01-10T16:10:10Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
BugSolved FindBeamCenter wrong answer
</p>
<p>
SANSRunWindow.cpp : add the centre information from the Geometry tab,
so to make it to be considered in SingleMode.
ISISCommandInterface.py: original does not take the beam_center position,
but get the position of the center of the bank detector. Avoiding the
wrong assumption that the detector bank will always be centered at its
defined beam_center.
isis_instrument.py : add a method cur_detector_position that returns the
position of the center of the detector bank, that is used in ISISCommandInterface
</p>
<p>
re <a class="closed ticket" href="5942.html" title="defect: SANS: Beam centre HAB algorithm (closed: fixed)">#5942</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b93e836e631a2156e3fc376672cea6f2c822a64e" title="b93e836e631a2156e3fc376672cea6f2c822a64e">b93e836e631a2156e3fc376672cea6f2c822a64e</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="5942.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-28T09%3A23%3A17Z&amp;precision=second" title="2013-01-28T09:23:17Z in Timeline">8 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Release 2.4</em> to <em>Release 2.5</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Moved at the code freeze for release 2.4
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="5942.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-28T11%3A34%3A01Z&amp;precision=second" title="2013-01-28T11:34:01Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>assigned</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="5942.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-28T11%3A34%3A16Z&amp;precision=second" title="2013-01-28T11:34:16Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Release 2.5</em> to <em>Release 2.4</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="5942.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-28T11%3A34%3A52Z&amp;precision=second" title="2013-01-28T11:34:52Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="5942.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-31T10%3A03%3A53Z&amp;precision=second" title="2013-01-31T10:03:53Z in Timeline">8 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Alex Buts</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="5942.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-31T11%3A31%3A52Z&amp;precision=second" title="2013-01-31T11:31:52Z in Timeline">8 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>verify</em>
    </li><li>
      <strong>Tester</strong>
        <em>Alex Buts</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Have to go to the meeting so have to return it to the pool as there are a lot of unclear behaviour needed investigation. 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="5942.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-31T11%3A55%3A41Z&amp;precision=second" title="2013-01-31T11:55:41Z in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Martyn Gigg</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="5942.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-31T12%3A10%3A11Z&amp;precision=second" title="2013-01-31T12:10:11Z in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Checked running the beam centre finder for both main &amp; HAB and the results looked sensible. The widgets reflect the values from the MASK files as expected when loaded.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="5942.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-02-27T13%3A29%3A08Z&amp;precision=second" title="2013-02-27T13:29:08Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>closed</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li><li>
      <strong>Priority</strong>
        changed from <em>major</em> to <em>blocker</em>
    </li><li>
      <strong>type</strong>
        changed from <em>enhancement</em> to <em>defect</em>
    </li><li>
      <strong>Milestone</strong>
        <em>Release 2.4</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="5942.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-02-27T13%3A32%3A59Z&amp;precision=second" title="2013-02-27T13:32:59Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
SANS: Fix Find Centre for SANS2D
</p>
<p>
The implementation of <a class="closed ticket" href="5942.html" title="defect: SANS: Beam centre HAB algorithm (closed: fixed)">#5942</a> broke the same feature for SANS2D. The problem was a different definition of the coordinates. This patch solves it.
</p>
<p>
re <a class="closed ticket" href="5942.html" title="defect: SANS: Beam centre HAB algorithm (closed: fixed)">#5942</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/f4a56f4dc39750b471e22f8c6022ea696133790c" title="f4a56f4dc39750b471e22f8c6022ea696133790c">f4a56f4dc39750b471e22f8c6022ea696133790c</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="5942.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-02-27T13%3A33%3A28Z&amp;precision=second" title="2013-02-27T13:33:28Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-23">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:23" class="cnum">
      <a href="5942.html#comment:23">comment:23</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-02-27T13%3A40%3A59Z&amp;precision=second" title="2013-02-27T13:40:59Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Tester: 
</p>
<ul><li>Open: SANS Interface
</li><li>Select SANS2D instrument
</li><li>Load Mask <a class="ext-link" href="../attachment/ticket/6237/MASKSANS2D_123T_4m_Xpress_8mm.txt.html"><span class="icon">​</span>MASKSANS2D_123T_4m_Xpress_8mm.txt</a> 
</li><li>Set Sample 16187 (cycle_12_3)
</li><li>Click on Load - it will create the Workspace::16187_sans_nxs
</li><li>Show instrument on this workspace
</li><li>Change to Geometry Tab
</li><li>Right-Botton Corner: apply the Run Push Button.
</li><li>Check that while the iterations goes on and on, the detector move towards the center of the scattering. 
</li></ul>
    </div>

              </div>
              <div class="change" id="trac-change-24">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:24" class="cnum">
      <a href="5942.html#comment:24">comment:24</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-01T08%3A04%3A28Z&amp;precision=second" title="2013-03-01T08:04:28Z in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        set to <em>Release 2.5</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-25">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:25" class="cnum">
      <a href="5942.html#comment:25">comment:25</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-01T08%3A08%3A41Z&amp;precision=second" title="2013-03-01T08:08:41Z in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-26">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:26" class="cnum">
      <a href="5942.html#comment:26">comment:26</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-01T09%3A35%3A45Z&amp;precision=second" title="2013-03-01T09:35:45Z in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Looks good. The detector seems to move as expected to the centre of scattering.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-27">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:27" class="cnum">
      <a href="5942.html#comment:27">comment:27</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-01T14%3A24%3A38Z&amp;precision=second" title="2013-03-01T14:24:38Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Keywords</strong>
        <em>PatchCandidate</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-28">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:28" class="cnum">
      <a href="5942.html#comment:28">comment:28</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-06T15%3A22%3A52%2B01%3A00&amp;precision=second" title="2013-06-06T15:22:52+01:00 in Timeline">7 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Keywords</strong>
        <em>PatchCandidate,Released</em> added; <em>PatchCandidate</em> removed
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-29">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:29" class="cnum">
      <a href="5942.html#comment:29">comment:29</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T00%3A53%3A22%2B01%3A00&amp;precision=second" title="2015-06-04T00:53:22+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/6788"><span class="icon">​</span>6788</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/5942?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/5942?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/5942?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>