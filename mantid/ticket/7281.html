<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #7281 (Experiment with 1:1 ConcretePeaksPresenter to QWidget)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="7280.html" title="Ticket #7280" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/7281?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/7281?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/7281?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="7282.html" title="Ticket #7282" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 7281, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="7280.html" title="Ticket #7280">Previous Ticket</a></span></li><li><span><a class="next" href="7282.html" title="Ticket #7282">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/7281.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="7281.html">Ticket #7281</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-11T11%3A57%3A47%2B01%3A00&amp;precision=second" title="2013-06-11T11:57:47+01:00 in Timeline">7 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T01%3A48%3A50%2B01%3A00&amp;precision=second" title="2015-06-04T01:48:50+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Experiment with 1:1 ConcretePeaksPresenter to QWidget</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Owen+Arnold">Owen Arnold</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Owen+Arnold">Owen Arnold</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;2.6.html">Release 2.6</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=GUI">GUI</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              petersonpf@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span><a class="closed ticket" href="7303.html" title="Broken PeakTransform Identification">#7303</a></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span><a class="closed ticket" href="7217.html" title="SliceViewer raster image performance issues">#7217</a>, <a class="closed ticket" href="7310.html" title="Make SliceViewer use PeaksInRegion">#7310</a></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Peter Peterson
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
      <span class="lastmod" title="2013-07-24 15:45:59.062813+00:00">
        (last modified by Nick Draper)
        (<a href="https://trac.mantidproject.org/mantid/ticket/7281?action=diff&amp;version=24">diff</a>)
      </span>
    </h3>
    <div class="searchable">
      <p>
Currently the PeaksViewer is proving to be slow when used with many peaks ~7000 (see 7217). My profiler checking indicates that QWidget::Update(QRect&amp;) is the main offender, as it is called for every peaks widget (each peak being represented by a widget).
</p>
<p>
As a first step towards <a class="closed ticket" href="7217.html" title="task: SliceViewer raster image performance issues (closed: fixed)">#7217</a> i'd like to quickly verify that the problem can be addressed by changing the way that the QWidgets are used to paint the overlay. Instead of having n widgets for n peaks, we could have one widget for each concrete peaks presenter, and use the PhysicalSphericalPeaks and PhysicalCrossPeaks respectfully to drive the widget creation for the subset of viewable peaks.
</p>
<p>
Should this work, then we should finally address <a class="closed ticket" href="7217.html" title="task: SliceViewer raster image performance issues (closed: fixed)">#7217</a> by bringing in the new algorithm PeaksInRegion to make the peaks processing even faster.
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="7281.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-11T11%3A59%3A06%2B01%3A00&amp;precision=second" title="2013-06-11T11:59:06+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Cc</strong>
        <em>petersonpf@…</em> added
    </li><li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li><li>
      <strong>Component</strong>
        changed from <em>Mantid</em> to <em>VATES</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="7281.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-12T12%3A37%3A30%2B01%3A00&amp;precision=second" title="2013-06-12T12:37:30+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
From the hacking I've done so far, this is really encouraging! I ran the following to create a dummy MDWorkspace, and then overlayed MANDI_306_predicted.peaks ( 11415 peaks. ). Visualisation of peaks is instantaneous while moving through the slices.
</p>
<div class="code"><pre>CreateMDWorkspace<span class="p">(</span>Dimensions<span class="o">=</span><span class="s">'3'</span><span class="p">,</span>Extents<span class="o">=</span><span class="s">'-10,10,-10,10,-10,10'</span><span class="p">,</span>Names<span class="o">=</span><span class="s">'Q_lab_x,Q_lab_y,Q_lab_z'</span><span class="p">,</span>Units<span class="o">=</span><span class="s">'A,A,A'</span><span class="p">,</span>OutputWorkspace<span class="o">=</span><span class="s">'WS'</span><span class="p">)</span>
BinMD<span class="p">(</span>InputWorkspace<span class="o">=</span><span class="s">'WS'</span><span class="p">,</span>AlignedDim0<span class="o">=</span><span class="s">'Q_lab_x,-10,10,100'</span><span class="p">,</span>AlignedDim1<span class="o">=</span><span class="s">'Q_lab_y,-10,10,100'</span><span class="p">,</span>AlignedDim2<span class="o">=</span><span class="s">'Q_lab_z,-10,10,100'</span><span class="p">,</span>OutputWorkspace<span class="o">=</span><span class="s">'v'</span><span class="p">)</span>
</pre></div>
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="7281.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-12T14%3A53%3A31%2B01%3A00&amp;precision=second" title="2013-06-12T14:53:31+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="7281.html" title="enhancement: Experiment with 1:1 ConcretePeaksPresenter to QWidget (closed: fixed)">#7281</a>. Single widget version for comparison.
</p>
<p>
This has been somewhat rammed in.
</p>
<p>
However, its not worth a clean implementation here unless we know that the effort will be worth it.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/64ef263829ab73a98a0ad1d4c3bf5c6f38b07089" title="64ef263829ab73a98a0ad1d4c3bf5c6f38b07089">64ef263829ab73a98a0ad1d4c3bf5c6f38b07089</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="7281.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-12T14%3A53%3A32%2B01%3A00&amp;precision=second" title="2013-06-12T14:53:32+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="7281.html" title="enhancement: Experiment with 1:1 ConcretePeaksPresenter to QWidget (closed: fixed)">#7281</a>. Make room for PeakOverlayMultiSphere.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/496d05509f9c4b2ddd7dd12ce8863ce2ff0139b0" title="496d05509f9c4b2ddd7dd12ce8863ce2ff0139b0">496d05509f9c4b2ddd7dd12ce8863ce2ff0139b0</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="7281.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-12T14%3A53%3A32%2B01%3A00&amp;precision=second" title="2013-06-12T14:53:32+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="7281.html" title="enhancement: Experiment with 1:1 ConcretePeaksPresenter to QWidget (closed: fixed)">#7281</a>. Add in spherical multi peak factory.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/df207c093e327565c9ae90d802327e7c699b41fa" title="df207c093e327565c9ae90d802327e7c699b41fa">df207c093e327565c9ae90d802327e7c699b41fa</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="7281.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-12T14%3A53%3A33%2B01%3A00&amp;precision=second" title="2013-06-12T14:53:33+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="7281.html" title="enhancement: Experiment with 1:1 ConcretePeaksPresenter to QWidget (closed: fixed)">#7281</a>. Remove old widget and widget factory types.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/04c2fb5b399e9d41bc38c8eb40156d9692975830" title="04c2fb5b399e9d41bc38c8eb40156d9692975830">04c2fb5b399e9d41bc38c8eb40156d9692975830</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="7281.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-12T14%3A53%3A33%2B01%3A00&amp;precision=second" title="2013-06-12T14:53:33+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="7281.html" title="enhancement: Experiment with 1:1 ConcretePeaksPresenter to QWidget (closed: fixed)">#7281</a>. Refactor factory and view interfaces.
</p>
<p>
.White box testing provided by the mocking framework has been a lifesaver here!
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/0874d4dc2b777f05b17d509e459309ba928d40f3" title="0874d4dc2b777f05b17d509e459309ba928d40f3">0874d4dc2b777f05b17d509e459309ba928d40f3</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="7281.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-12T15%3A08%3A57%2B01%3A00&amp;precision=second" title="2013-06-12T15:08:57+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
Tester: Thorough testing is really important for these changes.
</p>
<p>
1) Follow the earlier instructions involving the MANDI peaks file. Then, using the sliders or clicking on a peak to zoom in on it should be very rapid now.
</p>
<p>
2) Look at the feature descriptions here <a href="http://www.mantidproject.org/PeaksViewer">http://www.mantidproject.org/PeaksViewer</a>. You must verify that all of these features are still working.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="7281.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-12T15%3A38%3A36%2B01%3A00&amp;precision=second" title="2013-06-12T15:38:36+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="7281.html" title="enhancement: Experiment with 1:1 ConcretePeaksPresenter to QWidget (closed: fixed)">#7281</a>. Regression tests added.
</p>
<p>
.Menu options were broken as forgot to reimplement.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/5de1883f3b97ecc8f27f418a3cba0adcb8937f78" title="5de1883f3b97ecc8f27f418a3cba0adcb8937f78">5de1883f3b97ecc8f27f418a3cba0adcb8937f78</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="7281.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-12T15%3A40%3A51%2B01%3A00&amp;precision=second" title="2013-06-12T15:40:51+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="7281.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-12T21%3A26%3A41%2B01%3A00&amp;precision=second" title="2013-06-12T21:26:41+01:00 in Timeline">7 years</a> ago by Peter Peterson
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Peter Peterson</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="7281.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-13T14%3A35%3A01%2B01%3A00&amp;precision=second" title="2013-06-13T14:35:01+01:00 in Timeline">7 years</a> ago by Peter Peterson
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
I <strong>really</strong> wanted to pass this one when I saw how responsive the raster image is. There is a bug in it. The view does not appear to hide peaks that are not in the current range. To reproduce:
</p>
<ul><li>Use MantidEV to create MD workspace and peaks workspace (findpeaks).
</li><li>Plot the data with the peaks overlay
</li><li>Sort the peaks by "DetID"
</li><li>Look for an area where there are peaks markers by clicking on various peaks, but the data values appear to be background.
</li><li>I found a pair on pixels 1469766 and 1479234 which have markers when you click on either, even though the slice seems too thin for the other to show up
</li></ul><p>
This may be a misunderstanding that arises from the thickness of the slice not being obvious. The problem is that it looks like there are extra markers where there isn't higher intensity which doesn't make sense when overlaying "found peaks."
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="7281.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-13T14%3A47%3A47%2B01%3A00&amp;precision=second" title="2013-06-13T14:47:47+01:00 in Timeline">7 years</a> ago by Peter Peterson
                </h3>
                
    <div class="comment searchable">
      
      <p>
Actually the bug mentioned in the bounce message is there in master as well.
</p>
<p>
There is a real issue that the "Coordinates:" label in the peaks table displays Q-lab when the data is annotated as Q-sample. The numbers match up with it being in Q-sample too.
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-13T14%3A49%3A10%2B01%3A00&amp;precision=second" title="2013-06-13T14:49:10+01:00 in Timeline">7 years</a> ago
                      by Peter Peterson
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7281?cversion=0&amp;cnum_hist=13#comment:13">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7281?action=comment-diff&amp;cnum=13&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="7281.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-13T19%3A21%3A20%2B01%3A00&amp;precision=second" title="2013-06-13T19:21:20+01:00 in Timeline">7 years</a> ago by Peter Peterson
                </h3>
                
    <div class="comment searchable">
      
      <p>
The bug in #<a href="7281.html#comment:12" title="Comment 12 for Ticket #7281">comment:12</a> is now <a class="closed ticket" href="7297.html" title="defect: Too many peak positions showing in sliceview (closed: duplicate)">#7297</a>.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="7281.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-14T09%3A00%3A46%2B01%3A00&amp;precision=second" title="2013-06-14T09:00:46+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-14T09%3A02%3A04%2B01%3A00&amp;precision=second" title="2013-06-14T09:02:04+01:00 in Timeline">7 years</a> ago
                      by Owen Arnold
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7281?cversion=0&amp;cnum_hist=15#comment:15">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7281?action=comment-diff&amp;cnum=15&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="7281.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-14T09%3A01%3A04%2B01%3A00&amp;precision=second" title="2013-06-14T09:01:04+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
I think you've come up against a feature of the peak position markers. To explain this, I'll start by talking about integrated spherical peaks... taking account of peak center positions only, when you move the slider, if you don't happen to move the slider exactly to center position of the peak, you won't see it. This would make the peaks overlays in the sliceviewer unusable, so I handle this for the spherical peaks by modifying the opacity and circle projection size as the slicing plane moves away from the peak center (see ASCII art, line 52 in PhysicalSphericalPeaks.cpp). For integrated peaks, this can be done accurately, because the peak integration routines specify a fixed radius size, so if the plane - center distance is greater than the integration radius, nothing is drawn. For the unintegrated peaks (represented by a cross), there is no integration radius to use, but you would still want each marker to have a finite sized location so that you wouldn't miss it as you track the slice slider along. So an effective peak radius is artificially constructed to be some small fraction of the total z-range. You can actually modify this using the controls here: <a href="http://www.mantidproject.org/PeaksViewer#Preference_Options">http://www.mantidproject.org/PeaksViewer#Preference_Options</a>. 
</p>
<p>
Try the following:
</p>
<p>
1) Zoom in on a peak by clicking on it in the table
</p>
<p>
2) Open up the peak preference options and reduce the <strong>Peaks size into projection</strong> slider to the minimum. As you do this, you should see the other peaks (those not zoomed in on) disappear from the view. 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="7281.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-14T15%3A57%3A02%2B01%3A00&amp;precision=second" title="2013-06-14T15:57:02+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="7281.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-16T21%3A02%3A01%2B01%3A00&amp;precision=second" title="2013-06-16T21:02:01+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocked By</strong>
        <em>7303</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="7281.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-16T21%3A32%3A43%2B01%3A00&amp;precision=second" title="2013-06-16T21:32:43+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
The issues that Pete observed have been fixed under <a class="closed ticket" href="7303.html" title="enhancement: Broken PeakTransform Identification (closed: fixed)">#7303</a> as they were already present in Master.
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-16T21%3A37%3A41%2B01%3A00&amp;precision=second" title="2013-06-16T21:37:41+01:00 in Timeline">7 years</a> ago
                      by Owen Arnold
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7281?cversion=0&amp;cnum_hist=19#comment:19">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7281?action=comment-diff&amp;cnum=19&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="7281.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-16T21%3A32%3A55%2B01%3A00&amp;precision=second" title="2013-06-16T21:32:55+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="7281.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-17T14%3A20%3A11%2B01%3A00&amp;precision=second" title="2013-06-17T14:20:11+01:00 in Timeline">7 years</a> ago by Peter Peterson
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="7281.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-17T14%3A51%3A31%2B01%3A00&amp;precision=second" title="2013-06-17T14:51:31+01:00 in Timeline">7 years</a> ago by Peter Peterson
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-23">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:23" class="cnum">
      <a href="7281.html#comment:23">comment:23</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-18T14%3A20%3A05%2B01%3A00&amp;precision=second" title="2013-06-18T14:20:05+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>7310</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-24">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:24" class="cnum">
      <a href="7281.html#comment:24">comment:24</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-24T16%3A45%3A59%2B01%3A00&amp;precision=second" title="2013-07-24T16:45:59+01:00 in Timeline">7 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Component</strong>
        changed from <em>VATES</em> to <em>User Interface</em>
    </li><li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/7281?action=diff&amp;version=24">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-25">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:25" class="cnum">
      <a href="7281.html#comment:25">comment:25</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T01%3A48%3A50%2B01%3A00&amp;precision=second" title="2015-06-04T01:48:50+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/8127"><span class="icon">​</span>8127</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/mantid/pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/7281?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/7281?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/7281?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>