<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #8057 (Remove LoadDetectorInfo from DirectEnergyConversion.py script)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="8056.html" title="Ticket #8056" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8057?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8057?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8057?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="8058.html" title="Ticket #8058" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 8057, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="8056.html" title="Ticket #8056">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="8058.html" title="Ticket #8058">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="8057.html">Ticket #8057</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-01T10%3A47%3A09%2B01%3A00&amp;precision=second" title="2013-10-01T10:47:09+01:00 in Timeline">7 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A20%3A59%2B01%3A00&amp;precision=second" title="2015-06-04T02:20:59+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Remove LoadDetectorInfo from DirectEnergyConversion.py script</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Martyn+Gigg">Martyn Gigg</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Martyn+Gigg">Martyn Gigg</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;3.0.html">Release 3.0</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Direct+Inelastic">Direct Inelastic</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              Alex.Buts@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Alex Buts
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
The algorithm does the following:
</p>
<ul><li>updates detector positions based on input file positions;
</li><li>sets component parameters for the tube pressure &amp; wall thickness and
</li><li>adjusts X bins by a detector delay time.
</li></ul><p>
This behaviour needs splitting up. The tube pressure, wall thickness should be in the instrument definition (much as the SNS instruments do now), along with the detector delay time. The UpdateInstrumentFromFile algorithm already accepts RAW,ISIS Nexus and others. It simply needs extending to read the block from an ISIS event nexus file.
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="8057.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-01T10%3A47%3A22%2B01%3A00&amp;precision=second" title="2013-10-01T10:47:22+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Summary</strong>
        changed from <em>Remove LoadDetectorInfo from Direct Energy Conversion</em> to <em>Remove LoadDetectorInfo from DirectEnergyConversion.py script</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="8057.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T09%3A34%3A54%2B01%3A00&amp;precision=second" title="2013-10-04T09:34:54+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Make DetectorEfficiencyCor search recursively for parameters.
</p>
<p>
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/62ffe7bac8f5ec8c43874988bec724fdcb89ea79" title="62ffe7bac8f5ec8c43874988bec724fdcb89ea79">62ffe7bac8f5ec8c43874988bec724fdcb89ea79</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="8057.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T09%3A34%3A55%2B01%3A00&amp;precision=second" title="2013-10-04T09:34:55+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Allow ScaleX to take its factor from an instrument parameter.
</p>
<p>
Improved unit test coverage at the same time as there were no tests for
the EventWorkspace case.
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/a53ac3aaea9b134638aced0a05819fdba0c7af1d" title="a53ac3aaea9b134638aced0a05819fdba0c7af1d">a53ac3aaea9b134638aced0a05819fdba0c7af1d</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="8057.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T09%3A34%3A55%2B01%3A00&amp;precision=second" title="2013-10-04T09:34:55+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Add a performance test for parameter lookup in ParameterMap
</p>
<p>
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/fa32ca131e42e54311ab88219b2f203bd728781f" title="fa32ca131e42e54311ab88219b2f203bd728781f">fa32ca131e42e54311ab88219b2f203bd728781f</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="8057.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T09%3A34%3A55%2B01%3A00&amp;precision=second" title="2013-10-04T09:34:55+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Code cleanup in ParameterMap.cpp.
</p>
<ul><li>Removed const char methods that are better done by making the constructing
</li></ul><p>
the string once in the calling code.
</p>
<ul><li>Removed commented out code that polluted the cpp file.
</li><li>Reordered methods that match declaration order.
</li></ul><p>
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/c8a67317c31189bd0bf598856dc8544d1e20383e" title="c8a67317c31189bd0bf598856dc8544d1e20383e">c8a67317c31189bd0bf598856dc8544d1e20383e</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="8057.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T09%3A34%3A56%2B01%3A00&amp;precision=second" title="2013-10-04T09:34:56+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Improve the ParameterMap recursive searching code.
</p>
<p>
Avoids instantiation of separate shared pointer &amp; custom deleter.
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/061b18fc2e61f4ee2949da225db2362afcd553cf" title="061b18fc2e61f4ee2949da225db2362afcd553cf">061b18fc2e61f4ee2949da225db2362afcd553cf</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="8057.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T09%3A34%3A56%2B01%3A00&amp;precision=second" title="2013-10-04T09:34:56+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
UpdateInstrumentFromFile supports .dat files natively.
</p>
<p>
The header can still be overridden using the AsciiHeader property.
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/1101288db9bf9e76bd7245cff43eb2fe8a2771bf" title="1101288db9bf9e76bd7245cff43eb2fe8a2771bf">1101288db9bf9e76bd7245cff43eb2fe8a2771bf</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="8057.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T09%3A34%3A56%2B01%3A00&amp;precision=second" title="2013-10-04T09:34:56+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Improve code in DetectorEfficiencyCor
</p>
<ul><li>Define static variables for pressure/thickness parameters
</li><li>Avoid copy on getDetectorIDs
</li><li>Pass shared pointer by reference
</li><li>Use list for accumulating invalid spectra
</li><li>Invalid shape now throws NotFoundError
</li><li>Remove raw file and LoadDetectorInfo usage from unit test. It was adding
no benefit over what could be testing with a simple in-memory workspace.
</li></ul><p>
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/17c70bae9c5fedaf495f9621685fac57afa75035" title="17c70bae9c5fedaf495f9621685fac57afa75035">17c70bae9c5fedaf495f9621685fac57afa75035</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="8057.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T09%3A34%3A56%2B01%3A00&amp;precision=second" title="2013-10-04T09:34:56+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Add some debugging statements to GetEi2.
</p>
<p>
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/7c41d2df89dffa78216d708aa4cfd606400548c9" title="7c41d2df89dffa78216d708aa4cfd606400548c9">7c41d2df89dffa78216d708aa4cfd606400548c9</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="8057.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T09%3A34%3A56%2B01%3A00&amp;precision=second" title="2013-10-04T09:34:56+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Allow dgreduce to work with an input workspace and no cal file.
</p>
<p>
This assumes the calibration has already been applied to the input
workspace and allows it to be done once.
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8f9645724f0ed8b9733a090b4a06c8f35b0453fb" title="8f9645724f0ed8b9733a090b4a06c8f35b0453fb">8f9645724f0ed8b9733a090b4a06c8f35b0453fb</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="8057.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T09%3A34%3A56%2B01%3A00&amp;precision=second" title="2013-10-04T09:34:56+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Add pressure/thickness/delay time parameters to definition files.
</p>
<p>
Their names have been changed to make them more consistent with those
used by other direct geometry instruments that already had these
parameters in files:
</p>
<ul><li>3He(atms)-&gt;TubePressure
</li><li>wallT(m)-&gt;TubeThickness
</li></ul><p>
The DirectEnergyConversion scripts now apply the calibration straight
after loading and pick up the detector parameters from the IDF files,
removing the need for the LoadDetectorInfo algorithm.
</p>
<p>
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/4fddadd95dad23805fad677397bd0df3bb1f21b1" title="4fddadd95dad23805fad677397bd0df3bb1f21b1">4fddadd95dad23805fad677397bd0df3bb1f21b1</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="8057.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T09%3A35%3A15%2B01%3A00&amp;precision=second" title="2013-10-04T09:35:15+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Update ISIS direct inelastic system test results.
</p>
<p>
Minor changes due to precision of new instrument parameters.
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/537a3de9dd2b5faab538b34d911e18744b5699e6" title="537a3de9dd2b5faab538b34d911e18744b5699e6">537a3de9dd2b5faab538b34d911e18744b5699e6</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="8057.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T10%3A28%3A22%2B01%3A00&amp;precision=second" title="2013-10-04T10:28:22+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Add NULL component pointer check to ParameterMap::get
</p>
<p>
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/74c23e103c26de6cdbc1203063f3b7a6b968526e" title="74c23e103c26de6cdbc1203063f3b7a6b968526e">74c23e103c26de6cdbc1203063f3b7a6b968526e</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="8057.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T16%3A47%3A34%2B01%3A00&amp;precision=second" title="2013-10-04T16:47:34+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Fix test for existing workspace in dgreduce.py
</p>
<p>
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/d0d1510ff3e96a888e23625b29061d49fb305c7c" title="d0d1510ff3e96a888e23625b29061d49fb305c7c">d0d1510ff3e96a888e23625b29061d49fb305c7c</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="8057.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T17%3A16%3A03%2B01%3A00&amp;precision=second" title="2013-10-04T17:16:03+01:00 in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Cc</strong>
        <em>Alex.Buts@…</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="8057.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T18%3A01%3A17%2B01%3A00&amp;precision=second" title="2013-10-04T18:01:17+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Allow dgreduce to apply calibration to pre-loaded workspace.
</p>
<p>
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/43fb1b8b54d51f1b6466775f28db21c5cc55cd19" title="43fb1b8b54d51f1b6466775f28db21c5cc55cd19">43fb1b8b54d51f1b6466775f28db21c5cc55cd19</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="8057.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T18%3A02%3A41%2B01%3A00&amp;precision=second" title="2013-10-04T18:02:41+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Put back calibration argument in LETReduction test.
</p>
<p>
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/dbd7b2cba96d93aaab018e59502ec4856c6c8d03" title="dbd7b2cba96d93aaab018e59502ec4856c6c8d03">dbd7b2cba96d93aaab018e59502ec4856c6c8d03</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="8057.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T12%3A37%3A51%2B01%3A00&amp;precision=second" title="2013-10-07T12:37:51+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
UpdateInstrumentFromFile now accepts ISIS Event Nexus files.
</p>
<p>
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/6ca216ac85d64d46855fb547e82c47ec87bdbbe9" title="6ca216ac85d64d46855fb547e82c47ec87bdbbe9">6ca216ac85d64d46855fb547e82c47ec87bdbbe9</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="8057.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T12%3A37%3A51%2B01%3A00&amp;precision=second" title="2013-10-07T12:37:51+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Add a Combine option to ScaleX
</p>
<p>
This allows a factor from an instrument parameter to be combined
with an overall input factor from the algorithm property. This can
be useful for combining two ScaleX operations together to only loop
over the data once.
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/f29e043bc2bfe2cceeb7a8d2512c5fb6fd9cc4a5" title="f29e043bc2bfe2cceeb7a8d2512c5fb6fd9cc4a5">f29e043bc2bfe2cceeb7a8d2512c5fb6fd9cc4a5</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="8057.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T12%3A37%3A52%2B01%3A00&amp;precision=second" title="2013-10-07T12:37:52+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Combine the detector delay offset into the monitor offset.
</p>
<p>
Refs <a class="closed ticket" href="8057.html" title="enhancement: Remove LoadDetectorInfo from DirectEnergyConversion.py script (closed: fixed)">#8057</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ba7e1e5884249a4ca15155a7e49aec3d07f7b3c6" title="ba7e1e5884249a4ca15155a7e49aec3d07f7b3c6">ba7e1e5884249a4ca15155a7e49aec3d07f7b3c6</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="8057.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-08T13%3A28%3A25%2B01%3A00&amp;precision=second" title="2013-10-08T13:28:25+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Branch: feature/8057_remove_loaddetectorinfo_dec in <strong>BOTH</strong> code and systemtests repositories
</p>
<p>
Tester: The first thing to check is that LoadDetectorInfo has been deleted from the DirectEnergyConversion scripts. I have not touched DgsReduction as I feel that we may as well do that when we attempt the to it next release.
</p>
<p>
Things that have changed:
</p>
<ul><li>MARI,MERLIN,MAPS,LET instrument definitions now all have parameters for delay time, wall thickness &amp; tube pressure. Their names match those used by the SNS instruments
</li><li>The ScaleX algorithm has been updated to combine offsetting the X values using the delay time &amp; shifting due to putting the monitor at t=0
</li><li>The calibration has been shifted to be applied at the point the files are either loaded or the existing workspace pulled from the ADS in Inelastic/CommonFunctions.py. This should allow the calibration to be applied once outside the reducer and then not applied again. by setting the reducer calib argument to None.
</li></ul><p>
The system test results shifted by ~1e-7 which is why new reference results were needed. The result of moving the location of the pressure/wall thickness parameters has reduced the size of the ParameterMap significantly and resulted in smaller processed files. 
</p>
<p>
 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="8057.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-08T13%3A31%3A09%2B01%3A00&amp;precision=second" title="2013-10-08T13:31:09+01:00 in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Alex Buts</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-23">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:23" class="cnum">
      <a href="8057.html#comment:23">comment:23</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-14T18%3A36%3A52%2B01%3A00&amp;precision=second" title="2013-10-14T18:36:52+01:00 in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Merge branch 'feature/8057_remove_loaddetectorinfo_dec'
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/7bff58ace35899aee71a7301d14c435a843f541a"><span class="icon">​</span>7bff58ace35899aee71a7301d14c435a843f541a</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-24">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:24" class="cnum">
      <a href="8057.html#comment:24">comment:24</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-14T18%3A38%3A18%2B01%3A00&amp;precision=second" title="2013-10-14T18:38:18+01:00 in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/feature/8057_remove_loaddetectorinfo_dec'
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/systemtests/commit/669e10311c09454ee1d8ec3be6269c2f0d1f29cf"><span class="icon">​</span>669e10311c09454ee1d8ec3be6269c2f0d1f29cf</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-25">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:25" class="cnum">
      <a href="8057.html#comment:25">comment:25</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-14T18%3A45%3A26%2B01%3A00&amp;precision=second" title="2013-10-14T18:45:26+01:00 in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
Change to system tests reference results causes substantial concern, but I can not find anything wrong with the changes. Moreover, it looks like the initial reduction was not working correctly, at least in the situations where the relative change values exceeds 1e-4.
</p>
<p>
Rob (LET) agrees that changes are acceptable. Still have to discuss it with Jon and Russell. 
MERLIN's changes fall within 10<sup>-4</sup> relative error limit. 
 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-26">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:26" class="cnum">
      <a href="8057.html#comment:26">comment:26</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-23T11%3A49%3A11%2B01%3A00&amp;precision=second" title="2013-10-23T11:49:11+01:00 in Timeline">7 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Component</strong>
        changed from <em>Framework</em> to <em>Direct Inelastic</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-27">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:27" class="cnum">
      <a href="8057.html#comment:27">comment:27</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A20%3A59%2B01%3A00&amp;precision=second" title="2015-06-04T02:20:59+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/8902"><span class="icon">​</span>8902</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8057?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8057?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8057?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>