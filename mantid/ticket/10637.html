<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #10637 (Close and review all leak issues with Poco::XML document, nodelist, etc. objects)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="10636.html" title="Ticket #10636" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10637?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10637?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10637?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="10638.html" title="Ticket #10638" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 10637, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="10636.html" title="Ticket #10636">Previous Ticket</a></span></li><li><span><a class="next" href="10638.html" title="Ticket #10638">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/10637.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="10637.html">Ticket #10637</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-26T10%3A00%3A54Z&amp;precision=second" title="2014-11-26T10:00:54Z in Timeline">6 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T04%3A05%3A23%2B01%3A00&amp;precision=second" title="2015-06-04T04:05:23+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Close and review all leak issues with Poco::XML document, nodelist, etc. objects</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Federico+M+Pouzols">Federico M Pouzols</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Federico+M+Pouzols">Federico M Pouzols</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;3.4.html">Release 3.4</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Framework">Framework</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;keywords=~Maintenance">Maintenance</a>
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span><a class="closed ticket" href="8053.html" title="Investigate possible memory leak from unreleased use of poco XML document and node lists.">#8053</a>, <a class="closed ticket" href="8484.html" title="Fix unreleased use of POCO::XML document and nodelists in Algorithms code">#8484</a>, <a class="closed ticket" href="8485.html" title="Fix unreleased use of POCO::XML document and nodelists in DataHandling code">#8485</a>, <a class="closed ticket" href="8486.html" title="Fix unreleased use of POCO::XML document and node lists in MantidQT code">#8486</a>, <a class="closed ticket" href="8487.html" title="Fix unreleased use of POCO::XML document and nodelists in Geometry code">#8487</a>, <a class="closed ticket" href="8489.html" title="Fix unreleased use of POCO::XML document and nodelists in Kernel code">#8489</a>, <a class="closed ticket" href="8490.html" title="Fix unreleased use of POCO::XML document and nodelists in LiveData code">#8490</a>, <a class="closed ticket" href="8491.html" title="Fix unreleased use of POCO::XML document and nodelists in MD code">#8491</a>, <a class="closed ticket" href="8492.html" title="Fix unreleased use of POCO::XML document or nodelists in SINQHMListener">#8492</a>, <a class="closed ticket" href="8511.html" title="Fix unreleased use of POCO::XML document and nodelists in VATES">#8511</a></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Harry Jeffery
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
      <span class="lastmod" title="2015-03-30 10:55:39.110354+00:00">
        (last modified by Federico M Pouzols)
        (<a href="https://trac.mantidproject.org/mantid/ticket/10637?action=diff&amp;version=10">diff</a>)
      </span>
    </h3>
    <div class="searchable">
      <p>
These issues include:
</p>
<ul><li>leaks / unreleased objects
</li><li>objects released via the release() method instead of the (preferred) AutoPtr
</li></ul><p>
This is an umbrella ticket for a bunch of tickets (see 'Blocked By' list) and possibly a few more issues. Work on this seems to have started in <a class="closed ticket" href="8053.html" title="enhancement: Investigate possible memory leak from unreleased use of poco XML document ... (closed: fixed)">#8053</a> which spawned a good bunch of tickets. Some relatively old tickets about this were closed but some others remain open. Note that some of the issues may have been fixed since then, but definitely not all of them.
</p>
<p>
To do: make sure that there are no leaks with document and nodelist objects, and that these are not released explicitly with the release() method but but using AutoPtr. In some cases, release() might be fine: <a class="ext-link" href="8487.html#comment:26"><span class="icon">​</span>http://trac.mantidproject.org/mantid/ticket/8487#comment:26</a>.
</p>
<p>
Relevant calls that need to be checked include at least:
</p>
<ul><li>parseString
</li><li>getElementsByTagName
</li><li>createTextNode
</li><li>create*Node
</li></ul><ul><li>Poco::XML::Node::attributes()
</li><li>Poco::XML::Node::childNodes()
</li></ul><p>
There could be additional issues, like in FilterChannelTest.
</p>
<p>
This ticket should help reducing the list of valgrind memory issues, although it may not be easy to see this
</p>
<p>
Addition (see #<a href="10637.html#comment:5" title="Comment 5 for Ticket #10637">comment:5</a> for details): check that the code using Poco::XML does not include too many unnecessary Poco headers, and that Poco XML classes are forward-declared as much as possible in Mantid headers.
</p>
<p>
Addition: also watch out for calls to Poco::XML::Node::attributes() and - Poco::XML::Node::childNodes(), the returned map / list must be released (<a class="ext-link" href="http://pocoproject.org/docs/Poco.XML.Node.html#28889"><span class="icon">​</span>http://pocoproject.org/docs/Poco.XML.Node.html#28889</a>).
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="10637.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-27T12%3A37%3A43Z&amp;precision=second" title="2014-11-27T12:37:43Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>assigned</em>
    </li><li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/10637?action=diff&amp;version=1">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="10637.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-27T14%3A23%3A25Z&amp;precision=second" title="2014-11-27T14:23:25Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocked By</strong>
        <em>8488</em> removed
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="10637.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-27T14%3A23%3A32Z&amp;precision=second" title="2014-11-27T14:23:32Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>assigned</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="10637.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-09T09%3A16%3A37Z&amp;precision=second" title="2014-12-09T09:16:37Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Backlog</em> to <em>Release 3.4</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="10637.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-01-16T10%3A42%3A00Z&amp;precision=second" title="2015-01-16T10:42:00Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/10637?action=diff&amp;version=5">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
As part of this ticket the following issue could also be dealt with: when using Poco::XML, the current code sometimes includes too many headers that are not needed. This concerns Poco::XML related headers and also for example Poco/File.h which is included sometimes even if that functionality is not used, probably as a leftover from old code, or a "copy-paste" side effect. Also in several header files, includes could be replaced by forward declarations of Poco::Document, etc. classes. This has been partially improved in some of the tickets that block this one.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="10637.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-01-16T10%3A43%3A11Z&amp;precision=second" title="2015-01-16T10:43:11Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/10637?action=diff&amp;version=6">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="10637.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T11%3A48%3A52%2B01%3A00&amp;precision=second" title="2015-03-30T11:48:52+01:00 in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/10637?action=diff&amp;version=7">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="10637.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T11%3A54%3A09%2B01%3A00&amp;precision=second" title="2015-03-30T11:54:09+01:00 in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/10637?action=diff&amp;version=8">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="10637.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T11%3A54%3A27%2B01%3A00&amp;precision=second" title="2015-03-30T11:54:27+01:00 in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/10637?action=diff&amp;version=9">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="10637.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T11%3A55%3A39%2B01%3A00&amp;precision=second" title="2015-03-30T11:55:39+01:00 in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/10637?action=diff&amp;version=10">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="10637.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T12%3A29%3A23%2B01%3A00&amp;precision=second" title="2015-03-30T12:29:23+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
use AutoPtr - better code example, kill unnec Poco headers, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/069e211d3735804173ff5c5056bd8314c2969a72" title="069e211d3735804173ff5c5056bd8314c2969a72">069e211d3735804173ff5c5056bd8314c2969a72</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="10637.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T12%3A29%3A23%2B01%3A00&amp;precision=second" title="2015-03-30T12:29:23+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
use AutoPtr - better as code example, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/c8b67927e7fcd55f90098ac4cf1104eafafd53ba" title="c8b67927e7fcd55f90098ac4cf1104eafafd53ba">c8b67927e7fcd55f90098ac4cf1104eafafd53ba</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="10637.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T12%3A29%3A24%2B01%3A00&amp;precision=second" title="2015-03-30T12:29:24+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Use Poco::AutoPtr, rearrange lib Poco headers, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/a04bfffb44665b2d606429ad386f7e1219fb99b4" title="a04bfffb44665b2d606429ad386f7e1219fb99b4">a04bfffb44665b2d606429ad386f7e1219fb99b4</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="10637.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T12%3A29%3A24%2B01%3A00&amp;precision=second" title="2015-03-30T12:29:24+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
use AutoPtr, sort Poco headers, uncomment+disable tests, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ac75c8d0eaa940aad0db7c425ceb20e443bcec53" title="ac75c8d0eaa940aad0db7c425ceb20e443bcec53">ac75c8d0eaa940aad0db7c425ceb20e443bcec53</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="10637.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T12%3A29%3A24%2B01%3A00&amp;precision=second" title="2015-03-30T12:29:24+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
rearrange poco headers and un-include unused ones, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/1b01f6fb30e895675eae2524c10124018a81d7de" title="1b01f6fb30e895675eae2524c10124018a81d7de">1b01f6fb30e895675eae2524c10124018a81d7de</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="10637.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T12%3A29%3A24%2B01%3A00&amp;precision=second" title="2015-03-30T12:29:24+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
sort poco headers, kill unused ones, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ef444ab51efe6d4005aacec84b33a8eab60c1f19" title="ef444ab51efe6d4005aacec84b33a8eab60c1f19">ef444ab51efe6d4005aacec84b33a8eab60c1f19</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="10637.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T12%3A29%3A24%2B01%3A00&amp;precision=second" title="2015-03-30T12:29:24+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Use AutoPtr, release poco objects, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/41fcf7234623ee50c8bfd5c77fc0cabb880904cf" title="41fcf7234623ee50c8bfd5c77fc0cabb880904cf">41fcf7234623ee50c8bfd5c77fc0cabb880904cf</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="10637.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T12%3A29%3A24%2B01%3A00&amp;precision=second" title="2015-03-30T12:29:24+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
sort poco headers and remove/un-include unused ones, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/814bb29840b208c204c9fe29fbdc9af0fe03d744" title="814bb29840b208c204c9fe29fbdc9af0fe03d744">814bb29840b208c204c9fe29fbdc9af0fe03d744</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="10637.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T12%3A29%3A24%2B01%3A00&amp;precision=second" title="2015-03-30T12:29:24+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
sort lib Poco headers, remove/un-include unused ones, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/fc3d1c57bf76b70b4ce64533c698844c950f6665" title="fc3d1c57bf76b70b4ce64533c698844c950f6665">fc3d1c57bf76b70b4ce64533c698844c950f6665</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="10637.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T12%3A32%3A22%2B01%3A00&amp;precision=second" title="2015-03-30T12:32:22+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/master' into 10637_close_review_all_leak_issues_with_poco_xml
</p>
<p>
Conflicts:
</p>
<blockquote>
<p>
Code/Mantid/Framework/Kernel/src/InstrumentInfo.cpp
</p>
</blockquote>
<p>
Sort out conflict in includes section, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b362ec863907b43120e83dc35480de970cf260c1" title="b362ec863907b43120e83dc35480de970cf260c1">b362ec863907b43120e83dc35480de970cf260c1</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="10637.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T12%3A45%3A14%2B01%3A00&amp;precision=second" title="2015-03-30T12:45:14+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
This is being verified as <a class="ext-link" href="https://github.com/mantidproject/mantid/pull/486"><span class="icon">​</span>pull request #486</a>.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="10637.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T13%3A18%3A41%2B01%3A00&amp;precision=second" title="2015-03-30T13:18:41+01:00 in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Harry Jeffery</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-23">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:23" class="cnum">
      <a href="10637.html#comment:23">comment:23</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T14%3A54%3A03%2B01%3A00&amp;precision=second" title="2015-03-30T14:54:03+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
check pointers before -&gt;release() in destructor, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/50e91dcffc72ceaf202f488ac1697e24a58029cc" title="50e91dcffc72ceaf202f488ac1697e24a58029cc">50e91dcffc72ceaf202f488ac1697e24a58029cc</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-24">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:24" class="cnum">
      <a href="10637.html#comment:24">comment:24</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T16%3A12%3A22%2B01%3A00&amp;precision=second" title="2015-03-30T16:12:22+01:00 in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Jenkins, retest this please.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-25">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:25" class="cnum">
      <a href="10637.html#comment:25">comment:25</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T16%3A51%3A24%2B01%3A00&amp;precision=second" title="2015-03-30T16:51:24+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Jenkins, retest this please
</p>

    </div>

              </div>
              <div class="change" id="trac-change-26">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:26" class="cnum">
      <a href="10637.html#comment:26">comment:26</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T18%3A56%3A39%2B01%3A00&amp;precision=second" title="2015-03-30T18:56:39+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Jenkins, retest this please
</p>

    </div>

              </div>
              <div class="change" id="trac-change-27">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:27" class="cnum">
      <a href="10637.html#comment:27">comment:27</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T21%3A04%3A08%2B01%3A00&amp;precision=second" title="2015-03-30T21:04:08+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Jenkins, retest this please
</p>

    </div>

              </div>
              <div class="change" id="trac-change-28">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:28" class="cnum">
      <a href="10637.html#comment:28">comment:28</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-03-30T23%3A49%3A31%2B01%3A00&amp;precision=second" title="2015-03-30T23:49:31+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Jenkins, retest this please
</p>

    </div>

              </div>
              <div class="change" id="trac-change-29">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:29" class="cnum">
      <a href="10637.html#comment:29">comment:29</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-04-02T17%3A26%3A59%2B01%3A00&amp;precision=second" title="2015-04-02T17:26:59+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/master' into 10637_close_review_all_leak_issues_with_poco_xml
</p>
<p>
Conflicts:
</p>
<blockquote>
<p>
Code/Mantid/Framework/DataObjects/src/CoordTransformAffine.cpp
Code/Mantid/Framework/DataObjects/src/CoordTransformDistance.cpp
Code/Mantid/Framework/DataObjects/test/CoordTransformAffineParserTest.h
Code/Mantid/Framework/DataObjects/test/CoordTransformDistanceParserTest.h
Code/Mantid/Framework/SINQ/src/SINQHMListener.cpp
</p>
</blockquote>
<p>
Sorting out conflict with big MDEvents move, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/01941117d9a2600664be01ba37e434d626e6a0d9" title="01941117d9a2600664be01ba37e434d626e6a0d9">01941117d9a2600664be01ba37e434d626e6a0d9</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-30">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:30" class="cnum">
      <a href="10637.html#comment:30">comment:30</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-04-02T17%3A27%3A00%2B01%3A00&amp;precision=second" title="2015-04-02T17:27:00+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
fixed issues with includes after merge, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8d3f273b064a8b63b6973d0f74f24dbf316fa8a4" title="8d3f273b064a8b63b6973d0f74f24dbf316fa8a4">8d3f273b064a8b63b6973d0f74f24dbf316fa8a4</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-31">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:31" class="cnum">
      <a href="10637.html#comment:31">comment:31</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-04-02T17%3A28%3A20%2B01%3A00&amp;precision=second" title="2015-04-02T17:28:20+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
I've fixed the merge conflict. Let's see if the issue with LoadMaskTest on mac persists.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-32">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:32" class="cnum">
      <a href="10637.html#comment:32">comment:32</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-04-06T22%3A02%3A50%2B01%3A00&amp;precision=second" title="2015-04-06T22:02:50+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
don't release m_pRootElem, causes double free with m_pDoc, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/555ba6ebf3826bc16d36e211633766d6063c0c35" title="555ba6ebf3826bc16d36e211633766d6063c0c35">555ba6ebf3826bc16d36e211633766d6063c0c35</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-33">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:33" class="cnum">
      <a href="10637.html#comment:33">comment:33</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-04-06T22%3A03%3A30%2B01%3A00&amp;precision=second" title="2015-04-06T22:03:30+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
fix typo in last commit, re <a class="closed ticket" href="10637.html" title="Close and review all leak issues with Poco::XML document, nodelist, etc. ... (closed: fixed)">#10637</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/fa3e89cf1c31264c6e7a7de203fecb2d14683335" title="fa3e89cf1c31264c6e7a7de203fecb2d14683335">fa3e89cf1c31264c6e7a7de203fecb2d14683335</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-34">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:34" class="cnum">
      <a href="10637.html#comment:34">comment:34</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-04-06T22%3A07%3A11%2B01%3A00&amp;precision=second" title="2015-04-06T22:07:11+01:00 in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Aha, something was causing a segfault in the LoadMask unit test, only on mac, and only in say 30-50% of builds. But I got one crash where the error message was clear: double free corruption. I realized that I added a couple of -&gt;release() calls in the LoadMask destructor, one for m_pDoc and another one for m_pRootElem. That's wrong, m_pRootElem is assigned from Poco::DOM::Document::documentElement() which does not require a release and is simply a pointer to the root element of the document tree that is freed when doing m_pDoc-&gt;release().
</p>

    </div>

              </div>
              <div class="change" id="trac-change-35">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:35" class="cnum">
      <a href="10637.html#comment:35">comment:35</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-04-07T08%3A39%3A17%2B01%3A00&amp;precision=second" title="2015-04-07T08:39:17+01:00 in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Merge pull request <a class="closed ticket" href="486.html" title="defect: Make phi in detectors table display cosistent with theta (closed: fixed)">#486</a> from mantidproject/10637_close_review_all_leak_issues_with_poco_xml
</p>
<p>
Close and review all leak issues with Poco::XML document, nodelist, etc. objects
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/051c23a6a51d68659f13126e34141fbdc17ea10b"><span class="icon">​</span>051c23a6a51d68659f13126e34141fbdc17ea10b</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-36">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:36" class="cnum">
      <a href="10637.html#comment:36">comment:36</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-04-22T10%3A21%3A42%2B01%3A00&amp;precision=second" title="2015-04-22T10:21:42+01:00 in Timeline">5 years</a> ago by Nick Draper
                </h3>
                
    <div class="comment searchable">
      
      <p>
Somehow these slipped through without a resolution.  Set to Fixed.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-37">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:37" class="cnum">
      <a href="10637.html#comment:37">comment:37</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T04%3A05%3A23%2B01%3A00&amp;precision=second" title="2015-06-04T04:05:23+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/11479"><span class="icon">​</span>11479</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10637?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10637?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10637?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>