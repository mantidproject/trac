<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #5026 (SANS: Get HAB masking working)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="5025.html" title="Ticket #5025" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/5026?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/5026?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/5026?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="5027.html" title="Ticket #5027" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 5026, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="5025.html" title="Ticket #5025">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="5027.html" title="Ticket #5027">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="5026.html">Ticket #5026</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-03-26T10%3A59%3A29%2B01%3A00&amp;precision=second" title="2012-03-26T10:59:29+01:00 in Timeline">9 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T00%3A15%3A20%2B01%3A00&amp;precision=second" title="2015-06-04T00:15:20+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">SANS: Get HAB masking working</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Anders+Markvardsen">Anders Markvardsen</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Anders+Markvardsen">Anders Markvardsen</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=blocker">blocker</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;2.1.html">Release 2.1</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=MantidPlot">MantidPlot</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Martyn Gigg
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <br style="clear: both" />
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="5026.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-03-27T11%3A40%3A23%2B01%3A00&amp;precision=second" title="2012-03-27T11:40:23+01:00 in Timeline">9 years</a> ago by Anders Markvardsen
                </h3>
                
    <div class="comment searchable">
      
      <p>
Trying to make the isis sans masking clearer. re <a class="closed ticket" href="5026.html" title="defect: SANS: Get HAB masking working (closed: fixed)">#5026</a>
</p>
<p>
Adding more commends in code to make it more clear what
goes on in the python masking. As it turns out HAB masking
can in fact be applied, but was well hidden and not
documented on the wiki 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/c6db43b92f449cf443a28795f13b5df5ab834de4" title="c6db43b92f449cf443a28795f13b5df5ab834de4">c6db43b92f449cf443a28795f13b5df5ab834de4</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="5026.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-03-27T20%3A20%3A05%2B01%3A00&amp;precision=second" title="2012-03-27T20:20:05+01:00 in Timeline">9 years</a> ago by Anders Markvardsen
                </h3>
                
    <div class="comment searchable">
      
      <p>
Small improvement to a python comment. re <a class="closed ticket" href="5026.html" title="defect: SANS: Get HAB masking working (closed: fixed)">#5026</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/0732089eccc196ac8823d2160dbe2b9806e9df8d" title="0732089eccc196ac8823d2160dbe2b9806e9df8d">0732089eccc196ac8823d2160dbe2b9806e9df8d</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="5026.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-03-28T14%3A59%3A39%2B01%3A00&amp;precision=second" title="2012-03-28T14:59:39+01:00 in Timeline">9 years</a> ago by Anders Markvardsen
                </h3>
                
    <div class="comment searchable">
      
      <p>
Cleanup of spectrum etc isis masking. re <a class="closed ticket" href="5026.html" title="defect: SANS: Get HAB masking working (closed: fixed)">#5026</a>
</p>
<p>
More specifically made wiki and code consistent for masking and
adjusted commands according to sans scientists info to:
</p>
<p>
MASK/CLEAR<a href="https://trac.mantidproject.org/mantid/TIME">TIME</a>
</p>
<p>
MASK<a href="https://trac.mantidproject.org/mantid/REAR/FRONT/HAB">REAR/FRONT/HAB</a> Hn[&gt;Hm]  or  MASK Vn[&gt;Vm]  - to mask single wires or 'strips'
MASK<a href="https://trac.mantidproject.org/mantid/REAR/FRONT/HAB">REAR/FRONT/HAB</a>  Hn&gt;Hm+Vn&gt;Vm                - to mask a rectangular 'box'
</p>
<p>
MASK Ssp1[&gt;Ssp2]
</p>
<p>
MASK/TIME t1 t2
</p>
<p>
MASK/LINE width angle
[edit] Qualifiers
/CLEAR
Clears any detector masks in operation
Without any /TIME qualifier only spatial masks are cleared; with a /TIME qualifier only time masks are cleared
/TIME
[optional] Specifies that the command applies to time masks
/LINE
Masking arm only has effect for SANS2D
/REAR
Specifies that the mask applies to the Rear detector (if SANS2D) and the Main detector (if LOQ). This is default if not specified
/FRONT
Specifies that the mask applies to the Front detector (if SANS2D) and the High-Angle Bank (if LOQ)
/HAB
This command is equivalent to /FRONT
</p>
<p>
[edit] Parameters
Hm Hn
Specify VERTICAL wires (columns) on the detector
For SANS2D, 0&lt;H&lt;191; for LOQ 0&lt;H&lt;127
Ssp1 Ssp2
Specifies a specific spectrum numbers; eg, S16641
t1 t2
Neutron times of flight (microseconds) specifying the time region to be masked
Vm Vn
Specify HORIZONTAL wires (rows) on the detector
For SANS2D, 0&lt;V&lt;191; for LOQ 0&lt;V&lt;127 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/908e21833d26d93d2a2020cf8b8fb3c6fe24163b" title="908e21833d26d93d2a2020cf8b8fb3c6fe24163b">908e21833d26d93d2a2020cf8b8fb3c6fe24163b</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="5026.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-03-28T18%3A10%3A53%2B01%3A00&amp;precision=second" title="2012-03-28T18:10:53+01:00 in Timeline">9 years</a> ago by Anders Markvardsen
                </h3>
                
    <div class="comment searchable">
      
      <p>
fix broken test...... re <a class="closed ticket" href="5026.html" title="defect: SANS: Get HAB masking working (closed: fixed)">#5026</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/76ca2a8bb6ba917acb8f34b46a91297b9edc4025" title="76ca2a8bb6ba917acb8f34b46a91297b9edc4025">76ca2a8bb6ba917acb8f34b46a91297b9edc4025</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="5026.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-04-02T08%3A41%3A39%2B01%3A00&amp;precision=second" title="2012-04-02T08:41:39+01:00 in Timeline">9 years</a> ago by Anders Markvardsen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
As it turned out HAB masking in fact did work. Use this ticket to clean up some of the discrepencies between what the wiki <a href="http://www.mantidproject.org/SANS_User_File_Commands#MASK">http://www.mantidproject.org/SANS_User_File_Commands#MASK</a>
say MASK command should do and what the code was doing.
</p>
<p>
This one is tested in SANSMaskCommandsTest.py - test_single_spectrum
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="5026.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-04-02T08%3A41%3A46%2B01%3A00&amp;precision=second" title="2012-04-02T08:41:46+01:00 in Timeline">9 years</a> ago by Anders Markvardsen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="5026.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-04-30T11%3A19%3A54%2B01%3A00&amp;precision=second" title="2012-04-30T11:19:54+01:00 in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Martyn Gigg</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="5026.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-05-04T12%3A02%3A33%2B01%3A00&amp;precision=second" title="2012-05-04T12:02:33+01:00 in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="5026.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T00%3A15%3A20%2B01%3A00&amp;precision=second" title="2015-06-04T00:15:20+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/5872"><span class="icon">​</span>5872</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/5026?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/5026?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/5026?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>