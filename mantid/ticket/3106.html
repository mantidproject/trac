<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #3106 (LoadEventNexus only loads a 1:1 spectra map)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="3105.html" title="Ticket #3105" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/3106?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/3106?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/3106?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="3107.html" title="Ticket #3107" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 3106, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="3105.html" title="Ticket #3105">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="3107.html" title="Ticket #3107">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="3106.html">Ticket #3106</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-05-27T14%3A27%3A22%2B01%3A00&amp;precision=second" title="2011-05-27T14:27:22+01:00 in Timeline">9 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-03T22%3A56%3A16%2B01%3A00&amp;precision=second" title="2015-06-03T22:56:16+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">LoadEventNexus only loads a 1:1 spectra map</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Martyn+Gigg">Martyn Gigg</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Martyn+Gigg">Martyn Gigg</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=critical">critical</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Iteration&#32;29.html">Iteration 29</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Mantid">Mantid</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Steve Williams
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
ISIS event files still have hardware grouping so that the spectra are not a 1:1 map of the detectors. The spectra as usual start from 1 and the only place the mapping is defined is in the legacy 'isis_vms_compat' block.
</p>
<p>
For now read this block to set up the correct spectra-&gt;detector mapping.
</p>

    </div>
  </div>
</div>
          
    <div id="attachments">
        <h2 class="foldable">Attachments</h2>
        <div>
          <dl class="attachments">
              <dt>
    <a href="../attachment/ticket/3106/DataHandlingTest.LoadInstrumentTestPerformance.test_SNAP.runtime.v.revision.ALL.png.html" title="View attachment">DataHandlingTest.LoadInstrumentTestPerformance.test_SNAP.runtime.v.revision.ALL.png</a><a href="../raw-attachment/ticket/3106/DataHandlingTest.LoadInstrumentTestPerformance.test_SNAP.runtime.v.revision.ALL.png" class="trac-rawlink" title="Download">​</a>
       (<span title="52425 bytes">51.2 KB</span>) -
      added by <em>Janik Zikovsky</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-17T16%3A39%3A32%2B01%3A00&amp;precision=second" title="2011-06-17T16:39:32+01:00 in Timeline">9 years</a> ago.
  </dt>
              <dd>
                Performance test for loading SNAP instrument
              </dd>
          </dl>
          
        </div>
    </div>

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="3106.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-05-27T15%3A02%3A14%2B01%3A00&amp;precision=second" title="2011-05-27T15:02:14+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12114]</a>) Update to LoadEventNexus and LoadNexusMonitors to read in the spectra table from the NeXus file if it exists. It is only defined for the isis_vms_compat block at the moment. Refs <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a> <a class="closed ticket" href="3099.html" title="defect: LoadNexusMonitors does not load ISIS monitors (closed: worksforme)">#3099</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="3106.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-05-31T11%3A21%3A16%2B01%3A00&amp;precision=second" title="2011-05-31T11:21:16+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li><li>
      <strong>Priority</strong>
        changed from <em>major</em> to <em>critical</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="3106.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-05-31T11%3A27%3A53%2B01%3A00&amp;precision=second" title="2011-05-31T11:27:53+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12165]</a>) Fix LoadEventNexus for ISIS event files to remove the monitor spectra from the main detector block. Also added a method to return simply the number of monitors on an instrument rather than always dragging the vector of IDs across.  Refs <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="3106.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-05-31T15%3A49%3A00%2B01%3A00&amp;precision=second" title="2011-05-31T15:49:00+01:00 in Timeline">9 years</a> ago by Janik Zikovsky
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12177]</a>) Refs <a class="closed ticket" href="3116.html" title="enhancement: TOPAZ Event Nexus files no longer load (closed: fixed)">#3116</a>, Refs <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>: Reverted change to LoadEventNexus that breaks loading TOPAZ event nexus files.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="3106.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-05-31T15%3A54%3A04%2B01%3A00&amp;precision=second" title="2011-05-31T15:54:04+01:00 in Timeline">9 years</a> ago by Janik Zikovsky
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12178]</a>) Refs <a class="closed ticket" href="3116.html" title="enhancement: TOPAZ Event Nexus files no longer load (closed: fixed)">#3116</a>, <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>: Actual fix to LoadEventNexus this time.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="3106.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-01T13%3A46%3A36%2B01%3A00&amp;precision=second" title="2011-06-01T13:46:36+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12210]</a>) Refs <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>. Created a new algorithm that replaces LoadLogsFromSNSNexus and can be used for any of the NXlog and IXseblock entries in a NeXus file. LoadEventNexus and LoadISISNexus2 now use these also.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="3106.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-01T14%3A16%3A08%2B01%3A00&amp;precision=second" title="2011-06-01T14:16:08+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12212]</a>) Missed the proton charge NeXus files that don't define the field explicity. Re <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="3106.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-01T16%3A05%3A26%2B01%3A00&amp;precision=second" title="2011-06-01T16:05:26+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12217]</a>) Swap to indexing the events by spectra for those files that have loaded a spectra mapping as well, currently just the ISIS ones. Those that use the default mapping remain unchanged until I can figure out all the consequences for changing everyone to index events by spectra. It basically requires the spectra number to match the event ID and not just start from zero. Refs <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="3106.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-01T21%3A05%3A13%2B01%3A00&amp;precision=second" title="2011-06-01T21:05:13+01:00 in Timeline">9 years</a> ago by Janik Zikovsky
                </h3>
                
    <div class="comment searchable">
      
      <p>
Hi Martyn,
</p>
<p>
LoadRunLogs does not seem to load some of the log entries that LoadLogsFromSNSNexus; in particular, the phi, chi, omega logs of a TOPAZ event nexus are not loaded whereas they were previously.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="3106.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-02T09%3A46%3A51%2B01%3A00&amp;precision=second" title="2011-06-02T09:46:51+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12247]</a>) Add a test to check the number of log entries. Re <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="3106.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-02T09%3A59%3A47%2B01%3A00&amp;precision=second" title="2011-06-02T09:59:47+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12249]</a>) My poor naming skills have let me down again. Rename LoadRunLogs to LoadNexusLogs as it doesn't touch any other type of log. Re <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="3106.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-02T10%3A36%3A55%2B01%3A00&amp;precision=second" title="2011-06-02T10:36:55+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12250]</a>) Fix a problem with loading NXpositioner logs and update the test to actually check for the number of loaded logs. Refs <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="3106.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-02T11%3A31%3A00%2B01%3A00&amp;precision=second" title="2011-06-02T11:31:00+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12253]</a>) Fix for non 1:1 mappings from LoadEventNexus. It turns out NSP1 doesn't match SPEC.size. Re <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="3106.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-02T13%3A49%3A08%2B01%3A00&amp;precision=second" title="2011-06-02T13:49:08+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12256]</a>) Correct a typo that leads to the spectramap equality operator always returning true. Re <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="3106.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-02T16%3A49%3A02%2B01%3A00&amp;precision=second" title="2011-06-02T16:49:02+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12264]</a>) Fix a bug in NeXus log loading when an selog entry from a multi-period dataset doesn't have a time field but has a dimension &gt; 1. Refs <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="3106.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-03T10%3A44%3A03%2B01%3A00&amp;precision=second" title="2011-06-03T10:44:03+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12293]</a>) Fix an issue that causes a crash on Windows when loading trying to load a bad log from a NeXus file. This should fix the system test crash. Re <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="3106.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-07T15%3A04%3A15%2B01%3A00&amp;precision=second" title="2011-06-07T15:04:15+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12382]</a>) LoadInstrument now has a new property called RewriteSpectraMap. If it is true (the default) then a new spectra map and axis are created on the input workspace and a 1:1 mapping of spectra-&gt;detector ID is set up. This should cure the issue that users of Python algorithms and CreateWorkspace don't get anything that is that useful. LoadEventNexus has also been updated to handle spectra rather than single pixel IDs for all files rather than just ISIS ones. A little tidy up is still required but the functionality is complete. Re <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="3106.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-09T10%3A21%3A21%2B01%3A00&amp;precision=second" title="2011-06-09T10:21:21+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12428]</a>) A more robust spectra detector map iterator, i.e. actually works in Debug on Windows. There was a subtle heap corruption bug that only the Windows debug checked iterators picked up. Re <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="3106.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-09T11%3A51%3A08%2B01%3A00&amp;precision=second" title="2011-06-09T11:51:08+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12432]</a>) Fix for one implementation broke the other one. This will do better. Re <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="3106.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-09T12%3A40%3A44%2B01%3A00&amp;precision=second" title="2011-06-09T12:40:44+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12433]</a>) More subtleties that the windows compiler in debug is picking up. Hoping this is the source of the Mac test problem. Re <a class="closed ticket" href="3106.html" title="enhancement: LoadEventNexus only loads a 1:1 spectra map (closed: fixed)">#3106</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="3106.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-09T16%3A43%3A43%2B01%3A00&amp;precision=second" title="2011-06-09T16:43:43+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-17T16%3A39%3A32%2B01%3A00&amp;precision=second" title="2011-06-17T16:39:32+01:00 in Timeline">9 years</a> ago by Janik Zikovsky
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/3106/DataHandlingTest.LoadInstrumentTestPerformance.test_SNAP.runtime.v.revision.ALL.png.html"><em>DataHandlingTest.LoadInstrumentTestPerformance.test_SNAP.runtime.v.revision.ALL.png</em></a><a href="../raw-attachment/ticket/3106/DataHandlingTest.LoadInstrumentTestPerformance.test_SNAP.runtime.v.revision.ALL.png" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Performance test for loading SNAP instrument
</p>

    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="3106.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-17T16%3A44%3A17%2B01%3A00&amp;precision=second" title="2011-06-17T16:44:17+01:00 in Timeline">9 years</a> ago by Janik Zikovsky
                </h3>
                
    <div class="comment searchable">
      
      <p>
Hi Martyn,
</p>
<p>
According to performance tests, Rev <a class="missing changeset" title="No default repository defined">[12382]</a> introduced a slow-down in instrument loading (from 3.6 seconds to 5.4 seconds for SNAP, in this example). You can see it in the attached graph (the full report is hosted at ORNL so I don't think you can get to it?). Other instruments have slowed as well...
</p>
<p>
The performance test does not send out emails saying "so-and-so has slowed" because it occasionally is way slower due to multiple jobs running on the same machine (as you can see from the spikes in the graph). It is probably not such a big deal but I thought you should be aware of this.
</p>
<p>
Cheers,
</p>
<p>
Janik
</p>

    </div>

              </div>
              <div class="change" id="trac-change-23">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:23" class="cnum">
      <a href="3106.html#comment:23">comment:23</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-27T14%3A43%3A55%2B01%3A00&amp;precision=second" title="2011-06-27T14:43:55+01:00 in Timeline">9 years</a> ago by Steve Williams
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Steve Williams</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-24">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:24" class="cnum">
      <a href="3106.html#comment:24">comment:24</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-27T17%3A25%3A47%2B01%3A00&amp;precision=second" title="2011-06-27T17:25:47+01:00 in Timeline">9 years</a> ago by Steve Williams
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Checked some log and spectra map information from the LET1511, SANS2D5512 and CNCS7860 nexus files. The files loaded and the workspace data I checked matched and the HDF files. Each spectrum in the CNCS file was linked to a detector with the same number.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-25">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:25" class="cnum">
      <a href="3106.html#comment:25">comment:25</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-03T22%3A56%3A16%2B01%3A00&amp;precision=second" title="2015-06-03T22:56:16+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/3953"><span class="icon">​</span>3953</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/3106?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/3106?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/3106?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>