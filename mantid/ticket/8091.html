<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #8091 (Control Spawning of Plot Windows)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="8090.html" title="Ticket #8090" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8091?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8091?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8091?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="8092.html" title="Ticket #8092" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 8091, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="8090.html" title="Ticket #8090">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="8092.html" title="Ticket #8092">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="8091.html">Ticket #8091</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-08T09%3A43%3A04%2B01%3A00&amp;precision=second" title="2013-10-08T09:43:04+01:00 in Timeline">7 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A22%3A23%2B01%3A00&amp;precision=second" title="2015-06-04T02:22:23+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Control Spawning of Plot Windows</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Owen+Arnold">Owen Arnold</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Federico+M+Pouzols">Federico M Pouzols</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;3.3.html">Release 3.3</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=GUI">GUI</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              jon.taylor@…, nick.draper@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Dan Nixon
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
The current MantidPlot behaviour is that every time you right-click and Plot (slice, spectrum) you get a new instance of a plot window. This can easily get out of hand. Some users want to re-use the same plot instance rather than generate new windows each time.
</p>
<p>
We should have a one-time configuration option that allows users to have a 1:1 mapping between the various plot types and their MantidPlot instance. The option should be off by default to preserve existing behaviour.
</p>
<p>
This is a requirement request from Jon Taylor, from the MantidPlot/Vates meeting 07/Oct/2013.
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="8091.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-02-14T11%3A05%3A00Z&amp;precision=second" title="2014-02-14T11:05:00Z in Timeline">7 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>assigned</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Bulk move to assigned at the introduction of the triage step
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="8091.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-15T14%3A50%3A24%2B01%3A00&amp;precision=second" title="2014-10-15T14:50:24+01:00 in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Owner</strong>
        changed from <em>Anyone</em> to <em>Federico M Pouzols</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="8091.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-27T16%3A30%3A57Z&amp;precision=second" title="2014-10-27T16:30:57Z in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>assigned</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Added config option: ReusePlotInstances (On/Off), re <a class="closed ticket" href="8091.html" title="enhancement: Control Spawning of Plot Windows (closed: fixed)">#8091</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/5f500a75aca8d6d63ccd0e69bcdb7ad583e18cc6" title="5f500a75aca8d6d63ccd0e69bcdb7ad583e18cc6">5f500a75aca8d6d63ccd0e69bcdb7ad583e18cc6</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="8091.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-27T16%3A30%3A57Z&amp;precision=second" title="2014-10-27T16:30:57Z in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Support option 'ReusePlotInstances' in MantidPlot UI, re <a class="closed ticket" href="8091.html" title="enhancement: Control Spawning of Plot Windows (closed: fixed)">#8091</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/84ba0ed77aeca753277f0ef5d5a5a5487a1fe1a2" title="84ba0ed77aeca753277f0ef5d5a5a5487a1fe1a2">84ba0ed77aeca753277f0ef5d5a5a5487a1fe1a2</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="8091.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-27T17%3A45%3A28Z&amp;precision=second" title="2014-10-27T17:45:28Z in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added individual close slice viewer win, re <a class="closed ticket" href="8091.html" title="enhancement: Control Spawning of Plot Windows (closed: fixed)">#8091</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/aba0f88fe8a6337cf572b1344bf10fbd4aeababf" title="aba0f88fe8a6337cf572b1344bf10fbd4aeababf">aba0f88fe8a6337cf572b1344bf10fbd4aeababf</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="8091.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-27T17%3A45%3A28Z&amp;precision=second" title="2014-10-27T17:45:28Z in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
tooltip, and try to keep positions, re <a class="closed ticket" href="8091.html" title="enhancement: Control Spawning of Plot Windows (closed: fixed)">#8091</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/9be889d5621dc7a830c2cfbfc7e8416a2216eb0c" title="9be889d5621dc7a830c2cfbfc7e8416a2216eb0c">9be889d5621dc7a830c2cfbfc7e8416a2216eb0c</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="8091.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-27T18%3A13%3A51Z&amp;precision=second" title="2014-10-27T18:13:51Z in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Nicer error handling/messaging - spectrum and slice viewers, re <a class="closed ticket" href="8091.html" title="enhancement: Control Spawning of Plot Windows (closed: fixed)">#8091</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/56d66937308d58ef2de2dbdb06ecd35e53473fce" title="56d66937308d58ef2de2dbdb06ecd35e53473fce">56d66937308d58ef2de2dbdb06ecd35e53473fce</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="8091.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-27T18%3A13%3A51Z&amp;precision=second" title="2014-10-27T18:13:51Z in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Nicer error handling/messaging - color fill plot, re <a class="closed ticket" href="8091.html" title="enhancement: Control Spawning of Plot Windows (closed: fixed)">#8091</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/4a6f4269bdbab9512e131ad3ec960b06a9d12dcb" title="4a6f4269bdbab9512e131ad3ec960b06a9d12dcb">4a6f4269bdbab9512e131ad3ec960b06a9d12dcb</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="8091.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-28T14%3A42%3A30Z&amp;precision=second" title="2014-10-28T14:42:30Z in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
comment out, not really possible, cause of plot differences, re <a class="closed ticket" href="8091.html" title="enhancement: Control Spawning of Plot Windows (closed: fixed)">#8091</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/0457dc3b1c3054216636803ebcb889041e7f1414" title="0457dc3b1c3054216636803ebcb889041e7f1414">0457dc3b1c3054216636803ebcb889041e7f1414</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="8091.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-28T15%3A16%3A35Z&amp;precision=second" title="2014-10-28T15:16:35Z in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
fixed initialization, re <a class="closed ticket" href="8091.html" title="enhancement: Control Spawning of Plot Windows (closed: fixed)">#8091</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/af5c9066eda258436c816ed8751ae816e8da1348" title="af5c9066eda258436c816ed8751ae816e8da1348">af5c9066eda258436c816ed8751ae816e8da1348</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="8091.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-28T16%3A07%3A29Z&amp;precision=second" title="2014-10-28T16:07:29Z in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
fixed window name issues on windoze, re <a class="closed ticket" href="8091.html" title="enhancement: Control Spawning of Plot Windows (closed: fixed)">#8091</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8ffc5e7c668412041ae2604327209c7a4885efd1" title="8ffc5e7c668412041ae2604327209c7a4885efd1">8ffc5e7c668412041ae2604327209c7a4885efd1</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="8091.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-28T16%3A22%3A37Z&amp;precision=second" title="2014-10-28T16:22:37Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li><li>
      <strong>Milestone</strong>
        changed from <em>Backlog</em> to <em>Release 3.3</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
A new plotting mode has been added that prevents the traditional
(annoying) spawning of new windows for every new plot. This new
plotting mode is disabled by default, as suggested. The checkbox to
enable it can be found in:
</p>
<blockquote>
<p>
View-&gt;Preferences-&gt;Mantid-&gt;Options (tab): "Re-use plot instances for different types of plots"
</p>
</blockquote>
<p>
(<a href="http://www.mantidproject.org/MantidPlot:_Preferences_Dialog_Mantid#Options">http://www.mantidproject.org/MantidPlot:_Preferences_Dialog_Mantid#Options</a>)
</p>
<p>
The new option has been added in the ConfigService as:
"MantidOptions.ReusePlotInstances" = On/Off
</p>
<p>
When you enable this option, there are now 5 (reused) instances of
different types of plots/interfaces that can be shown from the
workspaces (dock) window, by right-clicking on workspaces:
</p>
<ul><li>spectrum plot (with/without errors, with/without distribution, etc.)
</li><li>color fill plot
</li><li>spectrum viewer
</li><li>instrument view
</li><li>slice viewer
</li></ul><p>
There can only be one spectrum plot at a time, and one color fill
plot, etc.
</p>
<p>
I updated and expanded a bit the description of the general View-&gt;Preferences:
<a href="http://www.mantidproject.org/MantidPlot:_The_View_Menu#View_-.3E_Preferences">http://www.mantidproject.org/MantidPlot:_The_View_Menu#View_-.3E_Preferences</a>
. And then updated the screenshot of the Preferences Dialog / Options:
<a href="http://www.mantidproject.org/MantidPlot:_Preferences_Dialog_Mantid#Options">http://www.mantidproject.org/MantidPlot:_Preferences_Dialog_Mantid#Options</a>
</p>
<p>
It would be great if Jon Taylor and/or others who were interested in
this change could check and provide feedback, as there would certainly
be other alternative, plausible ways to address this ticket.
</p>
<p>
<strong>To test:</strong> 
</p>
<ul><li>check that you can enable/disable the new option (If you hover
the mouse you should see a tool tip explanation), and that new
windows are created or not depending on your choice. 
</li></ul><ul><li>With the option disabled you should see the traditional MantidPlot
behavior. When you enable it, if for example you plot several color
fill plots from different workspaces, all these plots should be
shown on a single window.
</li></ul><ul><li>check that you can switch between the new "controled" mode and the
old "spawning" mode by using the tickbox in preferences / options, at any time.
</li></ul><hr />
<p>
Note the following imperfection:
</p>
<ul><li>The implementation seems sound for the spectrum plots and the color
fill plots: new plots re-use the same window.
</li></ul><ul><li>The implementation for spectrum viewer, instrument view, and slice
viewer is deficient: if there's a previous windows it is closed and
destroyed, and a new window is created and shown. This is because a
"refresh" or "update underlying data / workspace" functionality is
not provided. "Refresh window" methods are required for these three
classes that would be able to take a new workspace and show the
relevant information without requiring a destroy/new cycle. That
functionality is currently entangled in the constructors and other
methods. I created three (lowish priority) separate tickets for
these, as suggested by Owen. See <a class="new ticket" href="10445.html" title="InstrumentWindow should have a refresh/update method to change the ... (new)">#10445</a>, <a class="new ticket" href="10446.html" title="SliceViewerWindow should have a refresh/update method to change the ... (new)">#10446</a>, and <a class="closed ticket" href="10447.html" title="SpectrumView should have a refresh/update method to change the workspace ... (closed: fixed)">#10447</a>.
</li></ul><p>
 
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-30T10%3A36%3A32Z&amp;precision=second" title="2014-10-30T10:36:32Z in Timeline">6 years</a> ago
                      by Federico M Pouzols
                    (<a href="https://trac.mantidproject.org/mantid/ticket/8091?cversion=0&amp;cnum_hist=12#comment:12">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/8091?action=comment-diff&amp;cnum=12&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="8091.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T11%3A00%3A25Z&amp;precision=second" title="2014-10-31T11:00:25Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Dan Nixon</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="8091.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T11%3A45%3A15Z&amp;precision=second" title="2014-10-31T11:45:15Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
After having plotted two workspaces with the "Re-use plot instances for different types of plots" option disabled I closed the two plot windows changed the option in Preferences and attempted to plot one of the workspaces again, this gave the following segfault:
</p>
<pre class="wiki">Program received signal SIGSEGV, Segmentation fault.
0x00000000006ef4af in QListData::size (this=0x1bc83b0) at /usr/include/qt4/QtCore/qlist.h:98
98	    inline int size() const { return d-&gt;end - d-&gt;begin; }
(gdb) bt
#0  0x00000000006ef4af in QListData::size (this=0x1bc83b0) at /usr/include/qt4/QtCore/qlist.h:98
#1  0x00000000006f4d74 in QList&lt;Graph*&gt;::size (this=0x1bc83b0) at /usr/include/qt4/QtCore/qlist.h:137
#2  0x0000000000857225 in MultiLayer::setLayersNumber (this=0x1bc8300, n=0) at /home/dan/testing-builds/test1/Code/Mantid/MantidPlot/src/MultiLayer.cpp:1237
#3  0x0000000000647de1 in ApplicationWindow::prepareMultiLayer (this=0x1996000, isNew=@0x7fffffffd1e0: false, window=0x1bc8300, newWindowName=..., clearWindow=true) at /home/dan/testing-builds/test1/Code/Mantid/MantidPlot/src/ApplicationWindow.cpp:2796
#4  0x00000000009d4c9a in MantidUI::plot1D (this=0x1abbb80, toPlot=..., spectrumPlot=true, errs=false, distr=false, style=Graph::Unspecified, plotWindow=0x1bc8300, clearWindow=true) at /home/dan/testing-builds/test1/Code/Mantid/MantidPlot/src/Mantid/MantidUI.cpp:3063
#5  0x00000000009d4843 in MantidUI::plot1D (this=0x1abbb80, toPlot=..., spectrumPlot=true, errs=false, distr=false, plotWindow=0x0, clearWindow=false) at /home/dan/testing-builds/test1/Code/Mantid/MantidPlot/src/Mantid/MantidUI.cpp:2994
#6  0x00000000009a0c14 in MantidDockWidget::plotSpectra (this=0x1cb9a40) at /home/dan/testing-builds/test1/Code/Mantid/MantidPlot/src/Mantid/MantidDock.cpp:1263
#7  0x0000000000ad4f07 in MantidDockWidget::qt_static_metacall (_o=0x1cb9a40, _c=QMetaObject::InvokeMetaMethod, _id=15, _a=0x7fffffffd4f0) at /home/dan/testing-builds/test1-build/MantidPlot/src/Mantid/moc_MantidDock.cxx:108
#8  0x00007ffff33fe87a in QMetaObject::activate(QObject*, QMetaObject const*, int, void**) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#9  0x00007ffff3b5aa62 in QAction::triggered(bool) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#10 0x00007ffff3b5c433 in QAction::activate(QAction::ActionEvent) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#11 0x00007ffff3f8a489 in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#12 0x00007ffff3f8e9b9 in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#13 0x00007ffff3bb050a in QWidget::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#14 0x00007ffff3f927bb in QMenu::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#15 0x00007ffff3b60e2c in QApplicationPrivate::notify_helper(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#16 0x00007ffff3b675dd in QApplication::notify(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#17 0x0000000000996476 in MantidApplication::notify (this=0x7fffffffe460, receiver=0x5935b90, event=0x7fffffffdc10) at /home/dan/testing-builds/test1/Code/Mantid/MantidPlot/src/Mantid/MantidApplication.cpp:29
#18 0x00007ffff33ea4dd in QCoreApplication::notifyInternal(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#19 0x00007ffff3b66d93 in QApplicationPrivate::sendMouseEvent(QWidget*, QMouseEvent*, QWidget*, QWidget*, QWidget**, QPointer&lt;QWidget&gt;&amp;, bool) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#20 0x00007ffff3bdbcfc in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#21 0x00007ffff3bdb269 in QApplication::x11ProcessEvent(_XEvent*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#22 0x00007ffff3c02b02 in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#23 0x00007fffe90b2e04 in g_main_context_dispatch () from /lib/x86_64-linux-gnu/libglib-2.0.so.0
#24 0x00007fffe90b3048 in ?? () from /lib/x86_64-linux-gnu/libglib-2.0.so.0
#25 0x00007fffe90b30ec in g_main_context_iteration () from /lib/x86_64-linux-gnu/libglib-2.0.so.0
#26 0x00007ffff34177be in QEventDispatcherGlib::processEvents(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#27 0x00007ffff3c02bb6 in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#28 0x00007ffff33e90af in QEventLoop::processEvents(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#29 0x00007ffff33e93a5 in QEventLoop::exec(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#30 0x00007ffff33eeb79 in QCoreApplication::exec() () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#31 0x0000000000ae4c0c in main (argc=1, argv=0x7fffffffe5f8) at /home/dan/testing-builds/test1/Code/Mantid/MantidPlot/src/main.cpp:219
(gdb) p d
$1 = (QListData::Data *) 0x0
</pre>
    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T11%3A45%3A42Z&amp;precision=second" title="2014-10-31T11:45:42Z in Timeline">6 years</a> ago
                      by Dan Nixon
                    (<a href="https://trac.mantidproject.org/mantid/ticket/8091?cversion=0&amp;cnum_hist=14#comment:14">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/8091?action=comment-diff&amp;cnum=14&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="8091.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T14%3A06%3A33Z&amp;precision=second" title="2014-10-31T14:06:33Z in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Fix crash when users close plot windows, re <a class="closed ticket" href="8091.html" title="enhancement: Control Spawning of Plot Windows (closed: fixed)">#8091</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/c8877c94de15485178ac296f9306d7318ccb2d45" title="c8877c94de15485178ac296f9306d7318ccb2d45">c8877c94de15485178ac296f9306d7318ccb2d45</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="8091.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T14%3A26%3A05Z&amp;precision=second" title="2014-10-31T14:26:05Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Good catch! This is now properly handled using (guarded) QPointer.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="8091.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-07T09%3A14%3A52Z&amp;precision=second" title="2014-11-07T09:14:52Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="8091.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-07T09%3A44%3A35Z&amp;precision=second" title="2014-11-07T09:44:35Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/feature/8091_control_spawning_of_plot_windows'
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/4b0e772141f60ca801c0c97c6b0d22fa2b28b8ee"><span class="icon">​</span>4b0e772141f60ca801c0c97c6b0d22fa2b28b8ee</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="8091.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-07T09%3A47%3A07Z&amp;precision=second" title="2014-11-07T09:47:07Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
I quite like this, however one thing that would be nice is to be able to enable and disable the controlled/spawning mode on a per feature basis.
</p>
<p>
For instance I would quite like to only ever have one spectrum viewer instance but also have "unlimited" spectra plot instances. But this is something that could easily be implemented later.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="8091.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-07T09%3A50%3A38Z&amp;precision=second" title="2014-11-07T09:50:38Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
I like this suggestion a lot. I'd add a ticket about it.
Let's check with Owen and also see if we get feedback from users.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="8091.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A22%3A23%2B01%3A00&amp;precision=second" title="2015-06-04T02:22:23+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/8936"><span class="icon">​</span>8936</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8091?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8091?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8091?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>