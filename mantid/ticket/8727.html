<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #8727 (icat external download file creation)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="8726.html" title="Ticket #8726" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8727?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8727?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8727?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="8728.html" title="Ticket #8728" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 8727, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="8726.html" title="Ticket #8726">Previous Ticket</a></span></li><li><span><a class="next" href="8728.html" title="Ticket #8728">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/8727.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="8727.html">Ticket #8727</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-17T12%3A47%3A21Z&amp;precision=second" title="2014-01-17T12:47:21Z in Timeline">7 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A48%3A41%2B01%3A00&amp;precision=second" title="2015-06-04T02:48:41+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">icat external download file creation</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Jay+Rainey">Jay Rainey</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Jay+Rainey">Jay Rainey</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=critical">critical</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;3.1.html">Release 3.1</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Framework">Framework</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;keywords=~ICAT">ICAT</a>
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span><a class="closed ticket" href="8730.html" title="[ICAT] Better IDS error handling">#8730</a></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Arturs Bekasovs
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
If the user attempts to download a file from the catalog and does not have access to the archives it's downloaded over HTTPS.
</p>
<p>
However, if an error occurs then the content of this is written to the name of the file the user tried to download.
</p>
<p>
This can be mis-leading and lead to problems. Especially if the user presses "Load" as the file is downloaded and then attempted to load into Mantid, which will not work.
</p>
<p>
As such, we should never create a file nor write to it if an error occurs on the IDS. Instead, we must output a valid error message to the user. (The contents of which were previously written to a file).
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="8727.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-17T14%3A42%3A50Z&amp;precision=second" title="2014-01-17T14:42:50Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocked By</strong>
        <em>8730</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="8727.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-22T11%3A41%3A50Z&amp;precision=second" title="2014-01-22T11:41:50Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Moved IDSError method to algorithm helper. Refs <a class="closed ticket" href="8727.html" title="enhancement: icat external download file creation (closed: fixed)">#8727</a>.
</p>
<ul><li>As I will use the exact same logic when checking for an IDS error in <tt>CatalogDownloadDataFiles</tt>.
</li><li>Updated IDSError method signature and logic to be more robust and usable across algorithms.
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/927cda45cfea4173ee414d3c3c744a4b7f3d67a3" title="927cda45cfea4173ee414d3c3c744a4b7f3d67a3">927cda45cfea4173ee414d3c3c744a4b7f3d67a3</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="8727.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-22T11%3A41%3A50Z&amp;precision=second" title="2014-01-22T11:41:50Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added IDS error handling to catalog download algorithm. Refs <a class="closed ticket" href="8727.html" title="enhancement: icat external download file creation (closed: fixed)">#8727</a>.
</p>
<ul><li>The file being downloaded is no longer saved to disk if an error occurs.
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/83e5faf4a9e9039fa2b4fa08dc9d15da78d2b49e" title="83e5faf4a9e9039fa2b4fa08dc9d15da78d2b49e">83e5faf4a9e9039fa2b4fa08dc9d15da78d2b49e</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="8727.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-22T11%3A41%3A50Z&amp;precision=second" title="2014-01-22T11:41:50Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Handle exception if file being loaded does not exist. Refs <a class="closed ticket" href="8727.html" title="enhancement: icat external download file creation (closed: fixed)">#8727</a>.
</p>
<ul><li>As the "Load" button involves downloading and loading the file from the archives I have had to return early in the load method if a path to the file does not exist (e.g. it was not written to disk as an error has occurred).
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/635e267e14db1af06b0a3b40bee8ddf8ee7553b1" title="635e267e14db1af06b0a3b40bee8ddf8ee7553b1">635e267e14db1af06b0a3b40bee8ddf8ee7553b1</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="8727.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-22T14%3A05%3A02Z&amp;precision=second" title="2014-01-22T14:05:02Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
<strong>Note:</strong> you must <strong>not</strong> have access to the archives in order to test this ticket.
</p>
<h2 id="Problem">Problem</h2>
<p>
A file was being created (the one the user wanted to download) even IF an error occurred on the IDS. Moreover, the error returned from the IDS was written to the aforementioned file, and no user-friendly error was output to the user.
</p>
<h2 id="Forcingfailure">Forcing failure</h2>
<p>
As it's difficult to force the IDS to return an error you will have to force one yourself, such as a 404. To do this:
</p>
<h3 id="ObtainingavalidURL">Obtaining a valid URL</h3>
<ol><li>Open Mantid and set the <tt>Log level</tt> to <tt>Debug</tt>.
</li><li>Log into the catalog and click <tt>Search</tt>.
</li><li>Perform a search and the investigation table will be populated.
</li><li>Double click an investigation to select it and the datafiles table will be populated.
</li><li>Select a datafile to download. Take note (copy) the URL that is output into debug.
</li></ol><h3 id="InvalidatingtheURLforce404">Invalidating the URL (force 404)</h3>
<p>
As you now have a valid URL that you must make invalid! To do this:
</p>
<ol><li>Find <tt>ICat4Catalog.cpp</tt>.
</li><li>Find the method <tt>getDownloadUrl</tt> and change the value being assigned to <tt>url</tt> to the URL you previous copied.
</li><li>Update the URL you just pasted by appending more numbers to <tt>datafileIds=???</tt> where <tt>???</tt> is the id of the datafile.
</li></ol><p>
Every download you perform on the archives will now attempt to use this URL. As such, you should now receive an error message from the IDS.
</p>
<h2 id="Testing">Testing</h2>
<ol><li>As you have modified the file you will need to rebuild Mantid.
</li><li>Log into the catalog and perform a search. The investigation table will be populated.
</li><li>Double click an investigation to select it and the datafiles table will be populated.
</li><li>Select a datafile to download and click <tt>Download to...</tt>
</li><li>You should now receive a better error from the IDS and no files should be written to disk (since an error occurred).
</li></ol>
    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="8727.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-28T12%3A55%3A14Z&amp;precision=second" title="2014-01-28T12:55:14Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Summary</strong>
        changed from <em>[ICAT] External download file creation</em> to <em>icat external download file creation</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="8727.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-31T09%3A37%3A10Z&amp;precision=second" title="2014-01-31T09:37:10Z in Timeline">7 years</a> ago by Peter Parker
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Peter Parker</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="8727.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-31T11%3A25%3A32Z&amp;precision=second" title="2014-01-31T11:25:32Z in Timeline">7 years</a> ago by Peter Parker
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Two small things we could improve in the code:
</p>
<ul><li>Populating a set using <tt>tmp, tmp + sizeof(tmp) / sizeof(tmp[0])</tt> is quite messy, and error-prone.  We've used <a class="ext-link" href="http://www.boost.org/doc/libs/1_35_0/libs/assign/doc/index.html#list_of"><span class="icon">​</span>boost::assign::list_of</a> elsewhere and it works quite well, at least until we can get C++11 initialiser lists supported on all platforms.
</li></ul><ul><li>Rather than converting HTTP Response codes to strings, just keep them in their original HTTPStatus form.  It just makes things a little simpler, and is something extra the compiler can check for us.
</li></ul>
    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="8727.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-31T15%3A57%3A10Z&amp;precision=second" title="2014-01-31T15:57:10Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Priority</strong>
        changed from <em>major</em> to <em>critical</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="8727.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-02-03T09%3A31%3A19Z&amp;precision=second" title="2014-02-03T09:31:19Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Use HTTPStatus enum types and not strings. Refs <a class="closed ticket" href="8727.html" title="enhancement: icat external download file creation (closed: fixed)">#8727</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/448a32c875408b5b26355ac69106c4475e13a648" title="448a32c875408b5b26355ac69106c4475e13a648">448a32c875408b5b26355ac69106c4475e13a648</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="8727.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-02-03T09%3A31%3A19Z&amp;precision=second" title="2014-02-03T09:31:19Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Update algorithms to use HTTPResponse status. Refs <a class="closed ticket" href="8727.html" title="enhancement: icat external download file creation (closed: fixed)">#8727</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/002b320a593f2f24917134cc361ba60597f4e5ed" title="002b320a593f2f24917134cc361ba60597f4e5ed">002b320a593f2f24917134cc361ba60597f4e5ed</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="8727.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-02-03T09%3A57%3A07Z&amp;precision=second" title="2014-02-03T09:57:07Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
I refactored the code as suggested by Peter in <a href="8727.html#comment:8" title="Comment 8 for Ticket #8727">comment:8</a>. The functionality should be tested again to ensure these changes are correct.
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-02-03T10%3A04%3A20Z&amp;precision=second" title="2014-02-03T10:04:20Z in Timeline">7 years</a> ago
                      by Jay Rainey
                    (<a href="https://trac.mantidproject.org/mantid/ticket/8727?cversion=0&amp;cnum_hist=12#comment:12">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/8727?action=comment-diff&amp;cnum=12&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="8727.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-02-03T10%3A42%3A01Z&amp;precision=second" title="2014-02-03T10:42:01Z in Timeline">7 years</a> ago by Arturs Bekasovs
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        changed from <em>Peter Parker</em> to <em>Arturs Bekasovs</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="8727.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-02-03T15%3A59%3A50Z&amp;precision=second" title="2014-02-03T15:59:50Z in Timeline">7 years</a> ago by Arturs Bekasovs
                </h3>
                
    <div class="comment searchable">
      
      <p>
The code seems to be clear and the changes are appropriate. The code re-factoring was very useful - converting enums to strings for comparison wasn't neat.
</p>
<p>
Reproduced the problem on the current master.
</p>
<p>
The changes have fixed the problem - I get an error message when trying to download a file with purposefully tweaked URL. The file doesn't get created at all in that case. Files are downloaded/loaded fine when URL is not touched.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="8727.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-02-03T16%3A00%3A14Z&amp;precision=second" title="2014-02-03T16:00:14Z in Timeline">7 years</a> ago by Arturs Bekasovs
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/feature/8727_icat_external_dl_file_creation'
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/44c3ccc11795a4bd7c05e7955087fb56755d4416"><span class="icon">​</span>44c3ccc11795a4bd7c05e7955087fb56755d4416</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="8727.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A48%3A41%2B01%3A00&amp;precision=second" title="2015-06-04T02:48:41+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/9571"><span class="icon">​</span>9571</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8727?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8727?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8727?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>