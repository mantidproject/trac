<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #1037 (Crash if accessing python variables assigned to qtiplot windows that have been closed)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="1036.html" title="Ticket #1036" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/1037?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/1037?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/1037?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="1038.html" title="Ticket #1038" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 1037, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="1036.html" title="Ticket #1036">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="1038.html" title="Ticket #1038">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="1037.html">Ticket #1037</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2009-11-25T16%3A15%3A28Z&amp;precision=second" title="2009-11-25T16:15:28Z in Timeline">11 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-03T21%3A58%3A28%2B01%3A00&amp;precision=second" title="2015-06-03T21:58:28+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Crash if accessing python variables assigned to qtiplot windows that have been closed</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Russell+Taylor">Russell Taylor</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Russell+Taylor">Russell Taylor</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;2.0.html">Release 2.0</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=MantidPlot">MantidPlot</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Janik Zikovsky
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
      <span class="lastmod" title="2009-11-25 16:16:48+00:00">
        (last modified by Russell Taylor)
        (<a href="https://trac.mantidproject.org/mantid/ticket/1037?action=diff&amp;version=1">diff</a>)
      </span>
    </h3>
    <div class="searchable">
      <p>
In the immediate window, if you do:
</p>
<pre class="wiki">instrument_view = getInstrumentView("workspace-name")
</pre><p>
show the window:
</p>
<pre class="wiki">instrument_view.showWindow()
</pre><p>
close it manually and then try to use the <tt>instrument_view</tt> variable again then you get a crash.
</p>
<p>
The same thing happens for a variable obtained from a graph window that's been closed (e.g. <tt>graph_spec = plotSpectrum("RawData", 0)</tt> ).
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="1037.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2009-11-25T16%3A16%3A48Z&amp;precision=second" title="2009-11-25T16:16:48Z in Timeline">11 years</a> ago by Russell Taylor
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/1037?action=diff&amp;version=1">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="1037.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2010-08-05T17%3A56%3A08%2B01%3A00&amp;precision=second" title="2010-08-05T17:56:08+01:00 in Timeline">10 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Iteration 24</em> to <em>Iteration 25</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
This is due to python variable pointing to a stale pointer in the same way that the workspace variables used to when a workspace was deleted. That was solved by using a proxy object and returning that when a workspace was requested.
</p>
<p>
The problem with trying the same thing in MantidPlot is that this would have to be done for absolutely every wrapped MantidPlot function and would be unmaintainable with the current simple exposure using sip.
</p>
<p>
More investigation into sip and it's return types is needed.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="1037.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2010-12-16T09%3A49%3A14Z&amp;precision=second" title="2010-12-16T09:49:14Z in Timeline">10 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Iteration 26</em> to <em>Iteration 27</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Bulk move of tickets to iteration 27, if your ticket is essential for Iteration 26 then move it back.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="1037.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-02-15T09%3A09%3A16Z&amp;precision=second" title="2011-02-15T09:09:16Z in Timeline">10 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Iteration 27</em> to <em>Iteration 28</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Bulk move of tickets at the end of iteration 27
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="1037.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-04-27T08%3A35%3A29%2B01%3A00&amp;precision=second" title="2011-04-27T08:35:29+01:00 in Timeline">9 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Iteration 28</em> to <em>Iteration 29</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Bulk move of tickets at the end of iteration 28
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="1037.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-27T09%3A20%3A13%2B01%3A00&amp;precision=second" title="2011-06-27T09:20:13+01:00 in Timeline">9 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Iteration 29</em> to <em>Iteration 30</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
"New" tickets moved at the code freeze of iteration 29
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="1037.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-09-19T10%3A30%3A09%2B01%3A00&amp;precision=second" title="2011-09-19T10:30:09+01:00 in Timeline">9 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Iteration 30</em> to <em>Iteration 31</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Bulk move of tickets to iteration 31 at the iteration 30 code freeze
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="1037.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-12-19T19%3A47%3A52Z&amp;precision=second" title="2011-12-19T19:47:52Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Owner</strong>
        changed from <em>Martyn Gigg</em> to <em>Russell Taylor</em>
    </li><li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li><li>
      <strong>Component</strong>
        set to <em>MantidPlot</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
I'm going to sort this out by using a proxy object much like the (original Framework python API) WorkspaceProxy. The proxy can listen for the 'destroyed' signal that all QObjects emit when they are deleted, and then set the wrapped reference to None. It's a pity that sip doesn't just do this - it seems like it could - but it doesn't. PySide isn't any better in this respect.
</p>
<p>
We will still have to intercept some functions: those that return a pointer to a QObject, and those that take one as an argument. Still this is a relatively small subset (perhaps 3 dozen or so) of the total number of methods.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="1037.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-12-30T22%3A35%3A37Z&amp;precision=second" title="2011-12-30T22:35:37Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Split up mantidplot.py and move it into a directory. Re <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>.
</p>
<p>
mantidplot.py is starting to get big, and once all the proxy business
for qti objects is added is will really swell. So the proxy objects
will go in a separate file and everything is in a mantidplot directory
that is imported. It shouldn't matter if an old mantidplot.py is lying
around in the old place - python will prefer to import the directory.
Fingers crossed that I've got the installation settings right. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/4564706275d7d74ae5272cb89356fd4965979b46" title="4564706275d7d74ae5272cb89356fd4965979b46">4564706275d7d74ae5272cb89356fd4965979b46</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="1037.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-12-30T23%3A02%3A35Z&amp;precision=second" title="2011-12-30T23:02:35Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Try to copy directory successfully on Windows. Re <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/a0eb4109530b5651df9bccbe56aa5e9bc1423cf1" title="a0eb4109530b5651df9bccbe56aa5e9bc1423cf1">a0eb4109530b5651df9bccbe56aa5e9bc1423cf1</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="1037.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-12-30T23%3A07%3A15Z&amp;precision=second" title="2011-12-30T23:07:15Z in Timeline">9 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>.  Trying to fix tests. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/2221796f38d808f005e2b0eb5ceefb10a5a0014f" title="2221796f38d808f005e2b0eb5ceefb10a5a0014f">2221796f38d808f005e2b0eb5ceefb10a5a0014f</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="1037.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-12-31T03%3A02%3A09Z&amp;precision=second" title="2011-12-31T03:02:09Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Try to fix Windows installer. Re <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>.
</p>
<p>
It's a real pain that it doesn't use CPack like the others. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/147436fbcd143432c0b22913e15bae87a4b00893" title="147436fbcd143432c0b22913e15bae87a4b00893">147436fbcd143432c0b22913e15bae87a4b00893</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="1037.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-12-31T03%3A32%3A05Z&amp;precision=second" title="2011-12-31T03:32:05Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Last attempt for now.... Re <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/78c6444cf22b3062016643790d42ee2f22a32722" title="78c6444cf22b3062016643790d42ee2f22a32722">78c6444cf22b3062016643790d42ee2f22a32722</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="1037.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-03T22%3A36%3A26Z&amp;precision=second" title="2012-01-03T22:36:26Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Remove qtiplotrc.py startup file. Re <a class="closed ticket" href="4335.html" title="task: Clean up inherited qtiplot python imports (closed: fixed)">#4335</a>.
</p>
<p>
And qtiUtil.py as well.
We hardly used anything in them. The only thing we did was the import
of functions from the qti module into the global namespace. This
will be replaced by proxy methods to prevent crashes if objects
are deleted (see <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>). 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/87a32aceead0a4ee6f732fe45768253731926d19" title="87a32aceead0a4ee6f732fe45768253731926d19">87a32aceead0a4ee6f732fe45768253731926d19</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="1037.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-03T22%3A36%3A27Z&amp;precision=second" title="2012-01-03T22:36:27Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Use proxy objects when accessing MantidPlot objects from Python.
</p>
<p>
Protects against crashes if the windows are closed. Re <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>.
Some methods, objects are not done yet. These are ones that are
probably rarely, if ever, used and will be done tomorrow. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/6e32d1dc935d126c2d64d4f6cc10b4b754662a5f" title="6e32d1dc935d126c2d64d4f6cc10b4b754662a5f">6e32d1dc935d126c2d64d4f6cc10b4b754662a5f</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="1037.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-04T14%3A38%3A43Z&amp;precision=second" title="2012-01-04T14:38:43Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Disconnect from the the 'destroyed' signal on deletion. Re <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>.
</p>
<p>
Prevents a segmentation fault on exiting MantidPlot.
Also intercept a few more methods. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/d5b9a012f55c221ea0ee210112c522fd7ca175d5" title="d5b9a012f55c221ea0ee210112c522fd7ca175d5">d5b9a012f55c221ea0ee210112c522fd7ca175d5</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="1037.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-04T19%3A07%3A46Z&amp;precision=second" title="2012-01-04T19:07:46Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Change return type of Layer.addImage to void. Re <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>.
</p>
<p>
An ImageWidget is not a QObject, so our proxy method won't work.
Ensure that pointers to ImageWidgets created in C++ cannot 'get out'.
The addImage method can still be called with an ImageWidget constructed
in python, or a filename. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/77d19bb2810e39b06d2ec8d894a1023eaaf2c99c" title="77d19bb2810e39b06d2ec8d894a1023eaaf2c99c">77d19bb2810e39b06d2ec8d894a1023eaaf2c99c</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="1037.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-04T19%3A07%3A47Z&amp;precision=second" title="2012-01-04T19:07:47Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Complete wrapping of MantidPlot python objects with proxies. Re <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>.
</p>
<p>
In general, users should only ever get references to proxy objects,
which are automatically set to None when the referenced window is
closed. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/a722a49be1207255a97a23cdf94b80a1396f8e22" title="a722a49be1207255a97a23cdf94b80a1396f8e22">a722a49be1207255a97a23cdf94b80a1396f8e22</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="1037.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-06T19%3A24%3A47Z&amp;precision=second" title="2012-01-06T19:24:47Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Change import of mantidplot to mantiplotpy in applicable places.
</p>
<p>
Didn't realise it was used so much..... Re <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/432e2fdac4a93c0203110982b768eb4a50af2f2a" title="432e2fdac4a93c0203110982b768eb4a50af2f2a">432e2fdac4a93c0203110982b768eb4a50af2f2a</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="1037.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-07T15%3A32%3A06Z&amp;precision=second" title="2012-01-07T15:32:06Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
This is a pretty big one to test!
</p>
<p>
Everything documented under:
</p>
<blockquote>
<p>
<a href="http://www.mantidproject.org/MantidPlot:_Help#Python_Scripting_in_MantidPlot">http://www.mantidproject.org/MantidPlot:_Help#Python_Scripting_in_MantidPlot</a>,
<a href="http://www.mantidproject.org/MantidPlot:_Help#Plotting_and_Displaying_Workspaces">http://www.mantidproject.org/MantidPlot:_Help#Plotting_and_Displaying_Workspaces</a> and
<a href="http://www.mantidproject.org/MantidPlot:_Help#Working_with_Instruments">http://www.mantidproject.org/MantidPlot:_Help#Working_with_Instruments</a>
</p>
</blockquote>
<p>
should still work, and it should not be possible to crash MantidPlot by entering a python command that operates on a variable that relates to a window after that window has been closed manually.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="1037.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-09T16%3A04%3A03Z&amp;precision=second" title="2012-01-09T16:04:03Z in Timeline">9 years</a> ago by Janik Zikovsky
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Janik Zikovsky</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="1037.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-09T22%3A23%3A02Z&amp;precision=second" title="2012-01-09T22:23:02Z in Timeline">9 years</a> ago by Janik Zikovsky
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>: Unit test for mantid plot python proxies
</p>
<p>
Exposed the close() method to python so that the windows close properly from python.
Refs <a class="closed ticket" href="4282.html" title="enhancement: Investigate 'Floating windows' for graphs, matrices etc (closed: fixed)">#4282</a>: make sure the FloatingWindow is deleted when closed.
Testing several proxy methods. Russell: Layer.legend() and Layer.grid() do not work for me! 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/2c795e49bff68c98d2f0df3b26d5f6e5f44bcbb2" title="2c795e49bff68c98d2f0df3b26d5f6e5f44bcbb2">2c795e49bff68c98d2f0df3b26d5f6e5f44bcbb2</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-23">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:23" class="cnum">
      <a href="1037.html#comment:23">comment:23</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-09T23%3A02%3A47Z&amp;precision=second" title="2012-01-09T23:02:47Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Make Grid and Legend work with proxy objects. Re <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b026dc53ed158b51a35dbbac1f9f918eccb0ac79" title="b026dc53ed158b51a35dbbac1f9f918eccb0ac79">b026dc53ed158b51a35dbbac1f9f918eccb0ac79</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-24">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:24" class="cnum">
      <a href="1037.html#comment:24">comment:24</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-10T16%3A08%3A52Z&amp;precision=second" title="2012-01-10T16:08:52Z in Timeline">9 years</a> ago by Janik Zikovsky
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a> long set of MantidPlot proxies unit tests
</p>
<p>
... for closing objects that were open before
Russell: Layer.spectrogram() does not seem to work even with the same fix as grid() etc. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/10e23cf5f7aa8971bf01b00193dfe7bcc8bc1e27" title="10e23cf5f7aa8971bf01b00193dfe7bcc8bc1e27">10e23cf5f7aa8971bf01b00193dfe7bcc8bc1e27</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-25">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:25" class="cnum">
      <a href="1037.html#comment:25">comment:25</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-10T16%3A27%3A47Z&amp;precision=second" title="2012-01-10T16:27:47Z in Timeline">9 years</a> ago by Janik Zikovsky
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>: folder deletion asks for confirmation, hanging up test
</p>
<p>
so commented out those tests for now 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bd5084d72a190fd8e9e4efe703f05795bf79aadc" title="bd5084d72a190fd8e9e4efe703f05795bf79aadc">bd5084d72a190fd8e9e4efe703f05795bf79aadc</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-26">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:26" class="cnum">
      <a href="1037.html#comment:26">comment:26</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-10T17%3A39%3A11Z&amp;precision=second" title="2012-01-10T17:39:11Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
sip needs to be told that Spectrogram is a QObject. Re <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/da23c140e1b559d4d0e64f4fbcf34fc4db420685" title="da23c140e1b559d4d0e64f4fbcf34fc4db420685">da23c140e1b559d4d0e64f4fbcf34fc4db420685</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-27">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:27" class="cnum">
      <a href="1037.html#comment:27">comment:27</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-10T18%3A58%3A27Z&amp;precision=second" title="2012-01-10T18:58:27Z in Timeline">9 years</a> ago by Janik Zikovsky
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
OK, I'm satisfied with the suite of unit tests that all return values that were exposed to python are safe for deletion.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-28">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:28" class="cnum">
      <a href="1037.html#comment:28">comment:28</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-17T22%3A55%3A50Z&amp;precision=second" title="2012-01-17T22:55:50Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Revert "Change import of mantidplot to mantiplotpy in applicable places."
</p>
<p>
This reverts commit <a class="changeset" href="https://github.com/mantidproject/mantid/commit/432e2fdac4a93c0203110982b768eb4a50af2f2a" title="432e2fdac4a93c0203110982b768eb4a50af2f2a">432e2fdac4a93c0203110982b768eb4a50af2f2a</a> (Re <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>)
Back to mantidplot again. Re <a class="closed ticket" href="4538.html" title="task: Rename the qti MantidPlot python module to _qti (closed: fixed)">#4538</a>. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/7c9601a1b51e265adb26a07aa6b1cf64ffff8eab" title="7c9601a1b51e265adb26a07aa6b1cf64ffff8eab">7c9601a1b51e265adb26a07aa6b1cf64ffff8eab</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-29">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:29" class="cnum">
      <a href="1037.html#comment:29">comment:29</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-18T16%3A34%3A52Z&amp;precision=second" title="2012-01-18T16:34:52Z in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Revert "Change import of mantidplot to mantiplotpy in applicable places."
</p>
<p>
This reverts commit <a class="changeset" href="https://github.com/mantidproject/mantid/commit/432e2fdac4a93c0203110982b768eb4a50af2f2a" title="432e2fdac4a93c0203110982b768eb4a50af2f2a">432e2fdac4a93c0203110982b768eb4a50af2f2a</a> (Re <a class="closed ticket" href="1037.html" title="defect: Crash if accessing python variables assigned to qtiplot windows that have ... (closed: fixed)">#1037</a>)
Back to mantidplot again. Re <a class="closed ticket" href="4538.html" title="task: Rename the qti MantidPlot python module to _qti (closed: fixed)">#4538</a>. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/7c9601a1b51e265adb26a07aa6b1cf64ffff8eab" title="7c9601a1b51e265adb26a07aa6b1cf64ffff8eab">7c9601a1b51e265adb26a07aa6b1cf64ffff8eab</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-30">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:30" class="cnum">
      <a href="1037.html#comment:30">comment:30</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-03T21%3A58%3A28%2B01%3A00&amp;precision=second" title="2015-06-03T21:58:28+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/1885"><span class="icon">​</span>1885</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/1037?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/1037?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/1037?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>