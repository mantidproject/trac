<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #2233 (Improve rebinning of SofQW)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="2232.html" title="Ticket #2232" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/2233?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/2233?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/2233?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="2234.html" title="Ticket #2234" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 2233, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="2232.html" title="Ticket #2232">Previous Ticket</a></span></li><li><span><a class="next" href="2234.html" title="Ticket #2234">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/2233.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="2233.html">Ticket #2233</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-01-13T12%3A12%3A48Z&amp;precision=second" title="2011-01-13T12:12:48Z in Timeline">10 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-03T22%3A49%3A04%2B01%3A00&amp;precision=second" title="2015-06-03T22:49:04+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Improve rebinning of SofQW</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Nick+Draper">Nick Draper</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Martyn+Gigg">Martyn Gigg</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;2.0.html">Release 2.0</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Mantid">Mantid</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              scu@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span><a class="closed ticket" href="2214.html" title="SofQW appears incorrect for direct inelastic data">#2214</a></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Stuart Campbell
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
      <span class="lastmod" title="2012-02-01 15:47:44.627848+00:00">
        (last modified by Stuart Campbell)
        (<a href="https://trac.mantidproject.org/mantid/ticket/2233?action=diff&amp;version=31">diff</a>)
      </span>
    </h3>
    <div class="searchable">
      <p>
The 2D rebinning of SofQW is simplistic and needs to be improved.
</p>
<p>
The underlying data is not simple but need to be rebinned into a regular grid with error analysis.  Sample code from lamp at the ILL is attached. and some potentially useful code from matlab.
</p>

    </div>
  </div>
</div>
          
    <div id="attachments">
        <h2 class="foldable">Attachments</h2>
        <div>
          <dl class="attachments">
              <dt>
    <a href="../attachment/ticket/2233/RE&#32;sofqw.txt.html" title="View attachment">RE sofqw.txt</a><a href="../raw-attachment/ticket/2233/RE&#32;sofqw.txt" class="trac-rawlink" title="Download">​</a>
       (<span title="15701 bytes">15.3 KB</span>) -
      added by <em>Nick Draper</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-01-13T12%3A13%3A04Z&amp;precision=second" title="2011-01-13T12:13:04Z in Timeline">10 years</a> ago.
  </dt>
              <dt>
    <a href="../attachment/ticket/2233/correct&#32;conversion&#32;to&#32;Q.txt.html" title="View attachment">correct conversion to Q.txt</a><a href="../raw-attachment/ticket/2233/correct&#32;conversion&#32;to&#32;Q.txt" class="trac-rawlink" title="Download">​</a>
       (<span title="3063 bytes">3.0 KB</span>) -
      added by <em>Nick Draper</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-01-13T12%3A13%3A18Z&amp;precision=second" title="2011-01-13T12:13:18Z in Timeline">10 years</a> ago.
  </dt>
              <dt>
    <a href="../attachment/ticket/2233/SofQW2_Negative_Q.png.html" title="View attachment">SofQW2_Negative_Q.png</a><a href="../raw-attachment/ticket/2233/SofQW2_Negative_Q.png" class="trac-rawlink" title="Download">​</a>
       (<span title="46468 bytes">45.4 KB</span>) -
      added by <em>Stuart Campbell</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-18T16%3A58%3A48Z&amp;precision=second" title="2012-01-18T16:58:48Z in Timeline">9 years</a> ago.
  </dt>
          </dl>
          
        </div>
    </div>

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-01-13T12%3A13%3A04Z&amp;precision=second" title="2011-01-13T12:13:04Z in Timeline">10 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/2233/RE&#32;sofqw.txt.html"><em>RE sofqw.txt</em></a><a href="../raw-attachment/ticket/2233/RE&#32;sofqw.txt" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-01-13T12%3A13%3A18Z&amp;precision=second" title="2011-01-13T12:13:18Z in Timeline">10 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/2233/correct&#32;conversion&#32;to&#32;Q.txt.html"><em>correct conversion to Q.txt</em></a><a href="../raw-attachment/ticket/2233/correct&#32;conversion&#32;to&#32;Q.txt" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="2233.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-01-13T12%3A16%3A42Z&amp;precision=second" title="2011-01-13T12:16:42Z in Timeline">10 years</a> ago by Nick Draper
                </h3>
                
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="2233.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-02-15T09%3A09%3A23Z&amp;precision=second" title="2011-02-15T09:09:23Z in Timeline">10 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Iteration 27</em> to <em>Iteration 28</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Bulk move of tickets at the end of iteration 27
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="2233.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-04-27T08%3A35%3A43%2B01%3A00&amp;precision=second" title="2011-04-27T08:35:43+01:00 in Timeline">9 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Iteration 28</em> to <em>Iteration 29</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Bulk move of tickets at the end of iteration 28
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="2233.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-01T21%3A38%3A46%2B01%3A00&amp;precision=second" title="2011-06-01T21:38:46+01:00 in Timeline">9 years</a> ago by Stuart Campbell
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Cc</strong>
        <em>scu@…</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="2233.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-27T09%3A20%3A15%2B01%3A00&amp;precision=second" title="2011-06-27T09:20:15+01:00 in Timeline">9 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Iteration 29</em> to <em>Iteration 30</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
"New" tickets moved at the code freeze of iteration 29
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="2233.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-07-19T10%3A59%3A07%2B01%3A00&amp;precision=second" title="2011-07-19T10:59:07+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="2233.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-07-21T16%3A05%3A59%2B01%3A00&amp;precision=second" title="2011-07-21T16:05:59+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
In <a class="missing changeset" title="No default repository defined">[13369]</a>:
</p>
<div class="message"><p>
Refs <a class="closed ticket" href="2233.html" title="enhancement: Improve rebinning of SofQW (closed: fixed)">#2233</a>. New SofQW looks correct but is slow so needs improvement. Test is disabled for this reason at the moment but I'd like to checkpoint my work.<br />
</p>
</div>
    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="2233.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-07-21T16%3A12%3A55%2B01%3A00&amp;precision=second" title="2011-07-21T16:12:55+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
In <a class="missing changeset" title="No default repository defined">[13370]</a>:
</p>
<div class="message"><p>
Fix for OpenMP loop type for windows. Refs <a class="closed ticket" href="2233.html" title="enhancement: Improve rebinning of SofQW (closed: fixed)">#2233</a><br />
</p>
</div>
    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="2233.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-07-21T16%3A30%3A41%2B01%3A00&amp;precision=second" title="2011-07-21T16:30:41+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
In <a class="missing changeset" title="No default repository defined">[13372]</a>:
</p>
<div class="message"><p>
Fix for multiple constructor matches on Mac. Refs <a class="closed ticket" href="2233.html" title="enhancement: Improve rebinning of SofQW (closed: fixed)">#2233</a><br />
</p>
</div>
    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="2233.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-07-22T14%3A45%3A22%2B01%3A00&amp;precision=second" title="2011-07-22T14:45:22+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
In <a class="missing changeset" title="No default repository defined">[13411]</a>:
</p>
<div class="message"><p>
Improved the performance of SofQW2. Enabling the unit test. Still room for improvement though I think. Refs <a class="closed ticket" href="2233.html" title="enhancement: Improve rebinning of SofQW (closed: fixed)">#2233</a><br />
</p>
</div>
    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="2233.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-07-22T19%3A10%3A11%2B01%3A00&amp;precision=second" title="2011-07-22T19:10:11+01:00 in Timeline">9 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
In <a class="missing changeset" title="No default repository defined">[13428]</a>:
</p>
<div class="message"><p>
Fix for Intel compiler getting stuck. Re <a class="closed ticket" href="2233.html" title="enhancement: Improve rebinning of SofQW (closed: fixed)">#2233</a>.<br />
</p>
</div>
    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="2233.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-07-25T10%3A30%3A14%2B01%3A00&amp;precision=second" title="2011-07-25T10:30:14+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
In <a class="missing changeset" title="No default repository defined">[13472]</a>:
</p>
<div class="message"><p>
Added dedicated Quadrilateral class that has no dynamic vertex allocation to improve speed for rebinning. Refs <a class="closed ticket" href="2233.html" title="enhancement: Improve rebinning of SofQW (closed: fixed)">#2233</a><br />
</p>
</div>
    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="2233.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-07-25T10%3A31%3A24%2B01%3A00&amp;precision=second" title="2011-07-25T10:31:24+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
In <a class="missing changeset" title="No default repository defined">[13473]</a>:
</p>
<div class="message"><p>
Speed improvements for rebinned SofQW. At the moment the algorithm name is SofQW2 so that it doesn't supercede the other until I get verification that it is doing the right thing. Re <a class="closed ticket" href="2233.html" title="enhancement: Improve rebinning of SofQW (closed: fixed)">#2233</a><br />
</p>
</div>
    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="2233.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-08-01T11%3A08%3A04%2B01%3A00&amp;precision=second" title="2011-08-01T11:08:04+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
In <a class="missing changeset" title="No default repository defined">[13623]</a>:
</p>
<div class="message"><p>
Refs <a class="closed ticket" href="2233.html" title="enhancement: Improve rebinning of SofQW (closed: fixed)">#2233</a>. Correct the theta binning to only take in to account the detector's angular width rather than a continuum between this and the next.<br />
</p>
</div>
    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="2233.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-08-01T11%3A13%3A59%2B01%3A00&amp;precision=second" title="2011-08-01T11:13:59+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
In <a class="missing changeset" title="No default repository defined">[13624]</a>:
</p>
<div class="message"><p>
Refs <a class="closed ticket" href="2233.html" title="enhancement: Improve rebinning of SofQW (closed: fixed)">#2233</a> Update tests values.<br />
</p>
</div>
    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="2233.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-08-04T09%3A25%3A31%2B01%3A00&amp;precision=second" title="2011-08-04T09:25:31+01:00 in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="2233.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-09-19T14%3A39%3A55%2B01%3A00&amp;precision=second" title="2011-09-19T14:39:55+01:00 in Timeline">9 years</a> ago by Wenduo Zhou
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Wenduo Zhou</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="2233.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-09-20T16%3A50%3A24%2B01%3A00&amp;precision=second" title="2011-09-20T16:50:24+01:00 in Timeline">9 years</a> ago by Wenduo Zhou
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>verify</em>
    </li><li>
      <strong>Tester</strong>
        <em>Wenduo Zhou</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="2233.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-09-21T19%3A24%3A13%2B01%3A00&amp;precision=second" title="2011-09-21T19:24:13+01:00 in Timeline">9 years</a> ago by Stuart Campbell
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Stuart Campbell</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="2233.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-09-21T21%3A35%3A14%2B01%3A00&amp;precision=second" title="2011-09-21T21:35:14+01:00 in Timeline">9 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
I tried the following script...
</p>
<pre class="wiki">LoadEventNexus(Filename='/home/scu/Code/Mantid/Test/Data/BSS_16715_event.nxs',OutputWorkspace='WS')
ConvertUnits(InputWorkspace='WS',OutputWorkspace='WS',Target='DeltaE',EMode='Indirect')
Rebin(InputWorkspace='WS',OutputWorkspace='WS',Params='-0.012,0.0004,0.012')
SofQW(InputWorkspace='WS',OutputWorkspace='16715_sqw',QAxisBinning='0.2,0.2,2',EMode='Indirect')
SofQW2(InputWorkspace='WS',OutputWorkspace='16715_sqw2',QAxisBinning='0.2,0.2,2',EMode='Indirect')
</pre><p>
The output from SofQW looks ok, but the output from SofQW2 is all 0.0's.
</p>
<p>
I also get the same for CNCS, but it takes about 10mins to run.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="2233.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-09-22T18%3A45%3A02%2B01%3A00&amp;precision=second" title="2011-09-22T18:45:02+01:00 in Timeline">9 years</a> ago by Stuart Campbell
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li><li>
      <strong>Milestone</strong>
        changed from <em>Iteration 30</em> to <em>Iteration 31</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
After discussing with Nick, this can go to the next iteration.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="2233.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-11-14T09%3A31%3A29Z&amp;precision=second" title="2011-11-14T09:31:29Z in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="2233.html" title="enhancement: Improve rebinning of SofQW (closed: fixed)">#2233</a>. Make SofQW2 a better at checking what information is required.
</p>
<p>
The algorithm will now throw if Ei has not been provided in Direct mode, whether within the workspace from GetEi or set explicity. In Indirect mode it will throw if it cannot find efixed on a component or in its tree. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/45e67dccdc37761e6bdb1370ccc43398850177c3" title="45e67dccdc37761e6bdb1370ccc43398850177c3">45e67dccdc37761e6bdb1370ccc43398850177c3</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-23">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:23" class="cnum">
      <a href="2233.html#comment:23">comment:23</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-11-14T09%3A32%3A17Z&amp;precision=second" title="2011-11-14T09:32:17Z in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-24">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:24" class="cnum">
      <a href="2233.html#comment:24">comment:24</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-11-14T09%3A33%3A14Z&amp;precision=second" title="2011-11-14T09:33:14Z in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
I think this should fix the problems with everything being zero.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-25">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:25" class="cnum">
      <a href="2233.html#comment:25">comment:25</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-11-14T19%3A16%3A25Z&amp;precision=second" title="2011-11-14T19:16:25Z in Timeline">9 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="2233.html" title="enhancement: Improve rebinning of SofQW (closed: fixed)">#2233</a>. Make SofQW2 a better at checking what information is required.
</p>
<p>
The algorithm will now throw if Ei has not been provided in Direct mode, whether within the workspace from GetEi or set explicity. In Indirect mode it will throw if it cannot find efixed on a component or in its tree. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/45e67dccdc37761e6bdb1370ccc43398850177c3" title="45e67dccdc37761e6bdb1370ccc43398850177c3">45e67dccdc37761e6bdb1370ccc43398850177c3</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-26">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:26" class="cnum">
      <a href="2233.html#comment:26">comment:26</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-13T16%3A32%3A51Z&amp;precision=second" title="2012-01-13T16:32:51Z in Timeline">9 years</a> ago by Nick Draper
                </h3>
                
    <div class="comment searchable">
      
      <p>
There remains a known issue about how this handles masked data, but that is dealt with in a separate ticket
</p>

    </div>

              </div>
              <div class="change" id="trac-change-27">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:27" class="cnum">
      <a href="2233.html#comment:27">comment:27</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-13T18%3A46%3A11Z&amp;precision=second" title="2012-01-13T18:46:11Z in Timeline">9 years</a> ago by Stuart Campbell
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-28">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:28" class="cnum">
      <a href="2233.html#comment:28">comment:28</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-18T16%3A57%3A24Z&amp;precision=second" title="2012-01-18T16:57:24Z in Timeline">9 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <ul><li>Load CNCS_7860_event.nxs from AutoTestData directory.
</li><li>ConvertUnits into DeltaE, Direct Mode, Efixed = 3.0
</li><li>Rebin -2.9,0.01,2.9
</li></ul><p>
 
Run SofQW:(QAxisBinning="0.0,0.2,2.0")<br />
without specifying Efixed/Ei:
</p>
<pre class="wiki">Error in execution of algorithm SofQW:
Workspace2D::getSpectrum, histogram number out of range
</pre><p>
specifying Ei explicitly: --&gt; Works OK - except Q range looks to go -ve.
</p>
<p>
Run SofQW2:(QAxisBinning="0.0,0.2,2.0")<br />
without specifying Efixed/Ei:
</p>
<pre class="wiki">No errors - took 577 seconds.
</pre><p>
specifying an Ei explicitly: 
</p>
<pre class="wiki">No errors - took 810 seconds.
</pre><p>
Again data looks like it is going -ve, but I think that this is a centre/edge of bin issue.
</p>

    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-18T16%3A58%3A48Z&amp;precision=second" title="2012-01-18T16:58:48Z in Timeline">9 years</a> ago by Stuart Campbell
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/2233/SofQW2_Negative_Q.png.html"><em>SofQW2_Negative_Q.png</em></a><a href="../raw-attachment/ticket/2233/SofQW2_Negative_Q.png" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-29">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:29" class="cnum">
      <a href="2233.html#comment:29">comment:29</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-18T16%3A59%3A45Z&amp;precision=second" title="2012-01-18T16:59:45Z in Timeline">9 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
Uploaded screenshot to show how the data seems to go into negative Qs'.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-30">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:30" class="cnum">
      <a href="2233.html#comment:30">comment:30</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-18T17%3A08%3A18Z&amp;precision=second" title="2012-01-18T17:08:18Z in Timeline">9 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <ul><li>Load BSS_15600_event.nxs
</li><li>ConvertUnits into DeltaE, Indirect, default Efixed.
</li><li>Rebin, -0.012,0.001,0.012
</li></ul><p>
 
Run SofQW2 (QAxisBinning="0.0,0.2,2.0"):
Using default Ef:
</p>
<pre class="wiki">SofQW2: Cannot find EFixed parameter for component "0". This is required in indirect mode. Please check the IDF contains these values.
Exception thrown in parallel region
Error in execution of algorithm SofQW2:
SofQW2: error (see log)
</pre><p>
Specifying Ef=2.08:
</p>
<pre class="wiki">Works ok - Q goes -ve.
</pre><p>
SofQW shows the same behaviour.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-31">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:31" class="cnum">
      <a href="2233.html#comment:31">comment:31</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-02-01T15%3A47%3A44Z&amp;precision=second" title="2012-02-01T15:47:44Z in Timeline">9 years</a> ago by Stuart Campbell
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/2233?action=diff&amp;version=31">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Doesn't give zeros for BASIS anymore.  The Q axis still seems to go -ve if you specify q binning of 0.0,0.2,2.0.  But this can be a ticket for the next iteration.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-32">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:32" class="cnum">
      <a href="2233.html#comment:32">comment:32</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-02-01T15%3A58%3A04Z&amp;precision=second" title="2012-02-01T15:58:04Z in Timeline">9 years</a> ago by Stuart Campbell
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
About the -ve issue - looks like just a plotting issue - the underlying data has the correct limits.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-33">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:33" class="cnum">
      <a href="2233.html#comment:33">comment:33</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-03T22%3A49%3A04%2B01%3A00&amp;precision=second" title="2015-06-03T22:49:04+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/3080"><span class="icon">​</span>3080</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/2233?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/2233?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/2233?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>