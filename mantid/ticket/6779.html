<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #6779 (Memory leak with Python algorithm properties)
     â€“ Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="6778.html" title="Ticket #6778" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/6779?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/6779?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/6779?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="6780.html" title="Ticket #6780" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 6779, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="6778.html" title="Ticket #6778">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="6780.html" title="Ticket #6780">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="6779.html">Ticket #6779</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-26T11%3A14%3A45Z&amp;precision=second" title="2013-03-26T11:14:45Z in Timeline">8 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T01%3A27%3A59%2B01%3A00&amp;precision=second" title="2015-06-04T01:27:59+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Memory leak with Python algorithm properties</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Martyn+Gigg">Martyn Gigg</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Martyn+Gigg">Martyn Gigg</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=critical">critical</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;2.5.html">Release 2.5</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Mantid">Mantid</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Anders Markvardsen
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
It seems that properties declared in a python algorithm never get deleted. This was found when running the Visual Leak Detector on Windows, which reported many leaks from the Python algorithms code.
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="6779.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-26T11%3A18%3A23Z&amp;precision=second" title="2013-03-26T11:18:23Z in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="6779.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-26T11%3A22%3A03Z&amp;precision=second" title="2013-03-26T11:22:03Z in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="6779.html" title="defect: Memory leak with Python algorithm properties (closed: fixed)">#6779</a> Use shared_ptr as Python HeldType for PythonAlgorithms
</p>
<p>
This allows us to release Python from managing the memory when the
algorithms are created via the instantiator from the factory. It also
keeps Python managing the object references correctly when created
purely from Python. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bd6cd3ac7140fd0adce9fa973f956f93d41f14f2" title="bd6cd3ac7140fd0adce9fa973f956f93d41f14f2">bd6cd3ac7140fd0adce9fa973f956f93d41f14f2</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="6779.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-26T11%3A22%3A12Z&amp;precision=second" title="2013-03-26T11:22:12Z in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="6779.html" title="defect: Memory leak with Python algorithm properties (closed: fixed)">#6779</a> Use shared_ptr as Python HeldType for PythonAlgorithms
</p>
<p>
This allows us to release Python from managing the memory when the
algorithms are created via the instantiator from the factory. It also
keeps Python managing the object references correctly when created
purely from Python. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bd6cd3ac7140fd0adce9fa973f956f93d41f14f2" title="bd6cd3ac7140fd0adce9fa973f956f93d41f14f2">bd6cd3ac7140fd0adce9fa973f956f93d41f14f2</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="6779.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-26T12%3A28%3A18Z&amp;precision=second" title="2013-03-26T12:28:18Z in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Kill another subtle memory leak. Refs <a class="closed ticket" href="6779.html" title="defect: Memory leak with Python algorithm properties (closed: fixed)">#6779</a>
</p>
<p>
Two of the PythonAlgorithm declareProperty methods were calling
declareProperty on the same class rather than from the base class
causing a double clone of the properties.
</p>
<p>
The names (only on the c++ side) have been changed to avoid future
confusion. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/43c3bc02dcea2e6d327438b174eabfe5e07318f6" title="43c3bc02dcea2e6d327438b174eabfe5e07318f6">43c3bc02dcea2e6d327438b174eabfe5e07318f6</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="6779.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-26T12%3A29%3A02Z&amp;precision=second" title="2013-03-26T12:29:02Z in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Kill another subtle memory leak. Refs <a class="closed ticket" href="6779.html" title="defect: Memory leak with Python algorithm properties (closed: fixed)">#6779</a>
</p>
<p>
Two of the PythonAlgorithm declareProperty methods were calling
declareProperty on the same class rather than from the base class
causing a double clone of the properties.
</p>
<p>
The names (only on the c++ side) have been changed to avoid future
confusion. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/43c3bc02dcea2e6d327438b174eabfe5e07318f6" title="43c3bc02dcea2e6d327438b174eabfe5e07318f6">43c3bc02dcea2e6d327438b174eabfe5e07318f6</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="6779.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-26T15%3A16%3A07Z&amp;precision=second" title="2013-03-26T15:16:07Z in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Branch: feature/6779_python_algs_memleak
</p>
<p>
Tester: This is a difficult on to test. The leaks were discovered using Visual Leak Detector on Windows, which requires a debug build of Mantid and the inclusion of the "vld.h" header in a single source file in each dll that requires checking. For this Kernel,API suffice.
</p>
<p>
The test script
</p>
<div class="code"><pre><span class="kn">import</span> <span class="nn">mantid</span>
</pre></div><p>
is enough to trigger the leak as it happens when properties are registered in Python.
</p>
<p>
Of course all of the builds &amp; system tests should be working.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="6779.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-28T14%3A11%3A15Z&amp;precision=second" title="2013-03-28T14:11:15Z in Timeline">8 years</a> ago by Anders Markvardsen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Anders Markvardsen</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="6779.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-29T08%3A06%3A40Z&amp;precision=second" title="2013-03-29T08:06:40Z in Timeline">8 years</a> ago by Anders Markvardsen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
The summary of output from a run of visual leak detector is
</p>
<p>
Visual Leak Detector detected 6034 memory leaks (491716 bytes).
Largest number used: 2384441 bytes.
Total allocations: 109777615 bytes.
Visual Leak Detector is now exiting.
The program '<a class="missing changeset" title="No default repository defined">[2684]</a> MantidPlot.exe' has exited with code 0 (0x0).
</p>
<p>
Hence it claim there is still leaks although looking at the very long output this ticket improves this
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="6779.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-29T08%3A08%3A15Z&amp;precision=second" title="2013-03-29T08:08:15Z in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="6779.html" title="defect: Memory leak with Python algorithm properties (closed: fixed)">#6779</a> Use shared_ptr as Python HeldType for PythonAlgorithms
</p>
<p>
This allows us to release Python from managing the memory when the
algorithms are created via the instantiator from the factory. It also
keeps Python managing the object references correctly when created
purely from Python. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bd6cd3ac7140fd0adce9fa973f956f93d41f14f2" title="bd6cd3ac7140fd0adce9fa973f956f93d41f14f2">bd6cd3ac7140fd0adce9fa973f956f93d41f14f2</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="6779.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-29T08%3A08%3A16Z&amp;precision=second" title="2013-03-29T08:08:16Z in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Kill another subtle memory leak. Refs <a class="closed ticket" href="6779.html" title="defect: Memory leak with Python algorithm properties (closed: fixed)">#6779</a>
</p>
<p>
Two of the PythonAlgorithm declareProperty methods were calling
declareProperty on the same class rather than from the base class
causing a double clone of the properties.
</p>
<p>
The names (only on the c++ side) have been changed to avoid future
confusion. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/43c3bc02dcea2e6d327438b174eabfe5e07318f6" title="43c3bc02dcea2e6d327438b174eabfe5e07318f6">43c3bc02dcea2e6d327438b174eabfe5e07318f6</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="6779.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-04-05T12%3A48%3A36%2B01%3A00&amp;precision=second" title="2013-04-05T12:48:36+01:00 in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="6779.html" title="defect: Memory leak with Python algorithm properties (closed: fixed)">#6779</a> Use shared_ptr as Python HeldType for PythonAlgorithms
</p>
<p>
This allows us to release Python from managing the memory when the
algorithms are created via the instantiator from the factory. It also
keeps Python managing the object references correctly when created
purely from Python. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bd6cd3ac7140fd0adce9fa973f956f93d41f14f2" title="bd6cd3ac7140fd0adce9fa973f956f93d41f14f2">bd6cd3ac7140fd0adce9fa973f956f93d41f14f2</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="6779.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-04-05T12%3A48%3A36%2B01%3A00&amp;precision=second" title="2013-04-05T12:48:36+01:00 in Timeline">8 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Kill another subtle memory leak. Refs <a class="closed ticket" href="6779.html" title="defect: Memory leak with Python algorithm properties (closed: fixed)">#6779</a>
</p>
<p>
Two of the PythonAlgorithm declareProperty methods were calling
declareProperty on the same class rather than from the base class
causing a double clone of the properties.
</p>
<p>
The names (only on the c++ side) have been changed to avoid future
confusion. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/43c3bc02dcea2e6d327438b174eabfe5e07318f6" title="43c3bc02dcea2e6d327438b174eabfe5e07318f6">43c3bc02dcea2e6d327438b174eabfe5e07318f6</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="6779.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-04-16T11%3A30%3A14%2B01%3A00&amp;precision=second" title="2013-04-16T11:30:14+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="6779.html" title="defect: Memory leak with Python algorithm properties (closed: fixed)">#6779</a> Use shared_ptr as Python HeldType for PythonAlgorithms
</p>
<p>
This allows us to release Python from managing the memory when the
algorithms are created via the instantiator from the factory. It also
keeps Python managing the object references correctly when created
purely from Python. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bd6cd3ac7140fd0adce9fa973f956f93d41f14f2" title="bd6cd3ac7140fd0adce9fa973f956f93d41f14f2">bd6cd3ac7140fd0adce9fa973f956f93d41f14f2</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="6779.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-04-16T11%3A30%3A14%2B01%3A00&amp;precision=second" title="2013-04-16T11:30:14+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Kill another subtle memory leak. Refs <a class="closed ticket" href="6779.html" title="defect: Memory leak with Python algorithm properties (closed: fixed)">#6779</a>
</p>
<p>
Two of the PythonAlgorithm declareProperty methods were calling
declareProperty on the same class rather than from the base class
causing a double clone of the properties.
</p>
<p>
The names (only on the c++ side) have been changed to avoid future
confusion. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/43c3bc02dcea2e6d327438b174eabfe5e07318f6" title="43c3bc02dcea2e6d327438b174eabfe5e07318f6">43c3bc02dcea2e6d327438b174eabfe5e07318f6</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="6779.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-04-19T16%3A05%3A28%2B01%3A00&amp;precision=second" title="2013-04-19T16:05:28+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="6779.html" title="defect: Memory leak with Python algorithm properties (closed: fixed)">#6779</a> Use shared_ptr as Python HeldType for PythonAlgorithms
</p>
<p>
This allows us to release Python from managing the memory when the
algorithms are created via the instantiator from the factory. It also
keeps Python managing the object references correctly when created
purely from Python. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bd6cd3ac7140fd0adce9fa973f956f93d41f14f2" title="bd6cd3ac7140fd0adce9fa973f956f93d41f14f2">bd6cd3ac7140fd0adce9fa973f956f93d41f14f2</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="6779.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-04-19T16%3A05%3A28%2B01%3A00&amp;precision=second" title="2013-04-19T16:05:28+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Kill another subtle memory leak. Refs <a class="closed ticket" href="6779.html" title="defect: Memory leak with Python algorithm properties (closed: fixed)">#6779</a>
</p>
<p>
Two of the PythonAlgorithm declareProperty methods were calling
declareProperty on the same class rather than from the base class
causing a double clone of the properties.
</p>
<p>
The names (only on the c++ side) have been changed to avoid future
confusion. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/43c3bc02dcea2e6d327438b174eabfe5e07318f6" title="43c3bc02dcea2e6d327438b174eabfe5e07318f6">43c3bc02dcea2e6d327438b174eabfe5e07318f6</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="6779.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T01%3A27%3A59%2B01%3A00&amp;precision=second" title="2015-06-04T01:27:59+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/7625"><span class="icon">â€‹</span>7625</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/mantid/pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/6779?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/6779?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/6779?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>