<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #3193 (Anvred corrections for single crystal)
     â€“ Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="3192.html" title="Ticket #3192" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/3193?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/3193?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/3193?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="3194.html" title="Ticket #3194" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 3193, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="3192.html" title="Ticket #3192">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="3194.html" title="Ticket #3194">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="3193.html">Ticket #3193</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-16T12%3A30%3A57%2B01%3A00&amp;precision=second" title="2011-06-16T12:30:57+01:00 in Timeline">9 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-03T22%3A56%3A58%2B01%3A00&amp;precision=second" title="2015-06-03T22:56:58+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Anvred corrections for single crystal</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Vickie+Lynch">Vickie Lynch</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Vickie+Lynch">Vickie Lynch</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Iteration&#32;29.html">Iteration 29</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Mantid">Mantid</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Michael Reuter
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
New algorithm, AnvredCorrections, to do spherical absorption corrections.  The pixel and wavelength corrections will be optional if the data has not been divided by vanadium.  Following A.J.Schultz's anvred, the weight factors should be:
</p>
<ul><li>   sin<strong>2(theta) / (lamda</strong>4 * spec * eff * trans)
</li><li> where theta = scattering_angle/2
</li><li>       lamda = wavelength (in angstroms?)
</li><li>       spec  = incident spectrum correction
</li><li>       eff   = pixel efficiency
</li><li>       trans = absorption correction
</li></ul>
    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="3193.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-16T12%3A31%3A09%2B01%3A00&amp;precision=second" title="2011-06-16T12:31:09+01:00 in Timeline">9 years</a> ago by Vickie Lynch
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li><li>
      <strong>Owner</strong>
        set to <em>Vickie Lynch</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="3193.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-16T12%3A48%3A06%2B01%3A00&amp;precision=second" title="2011-06-16T12:48:06+01:00 in Timeline">9 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12604]</a>) Refs <a class="closed ticket" href="3193.html" title="enhancement: Anvred corrections for single crystal (closed: fixed)">#3193</a> Anvred correction are implemented for historgrams, but not finished for events; have not compared results with ISAW
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="3193.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-16T15%3A50%3A07%2B01%3A00&amp;precision=second" title="2011-06-16T15:50:07+01:00 in Timeline">9 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12610]</a>) Refs <a class="closed ticket" href="3193.html" title="enhancement: Anvred corrections for single crystal (closed: fixed)">#3193</a> Same anvred corrections for histograms and events
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="3193.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-17T12%3A43%3A18%2B01%3A00&amp;precision=second" title="2011-06-17T12:43:18+01:00 in Timeline">9 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12633]</a>) Refs <a class="closed ticket" href="3193.html" title="enhancement: Anvred corrections for single crystal (closed: fixed)">#3193</a> Power correct for weights; interpolation removed; checkbox renamed to OnlySphericalAbsorption
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="3193.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-17T12%3A45%3A51%2B01%3A00&amp;precision=second" title="2011-06-17T12:45:51+01:00 in Timeline">9 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12634]</a>) Refs <a class="closed ticket" href="3193.html" title="enhancement: Anvred corrections for single crystal (closed: fixed)">#3193</a> BuildLamdaWeights arguments changed
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="3193.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-17T18%3A40%3A04%2B01%3A00&amp;precision=second" title="2011-06-17T18:40:04+01:00 in Timeline">9 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12649]</a>) Refs <a class="closed ticket" href="3193.html" title="enhancement: Anvred corrections for single crystal (closed: fixed)">#3193</a> add detector id to EventLists and do corrections in place for events
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="3193.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-17T21%3A37%3A48%2B01%3A00&amp;precision=second" title="2011-06-17T21:37:48+01:00 in Timeline">9 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
Matched these corrections from IsawEV with this algorithm.  Data was TOPAZ_2511, power=3, Radius=0.17, smu scattering =1.302, amu absorption=1.686 for detector id = 3245368.
</p>
<p>
<strong></strong> max_grid_id = 58
Built APPROXIMATE weights with wl power 3.0
Made Q mapper in 1477.4 ms
LOADED 4194304 EVENTS IN  58.4 ms
LOADED 8388608 EVENTS IN  46.5 ms
lamda = 1.9289504weight = 0.014794302
lamda = 1.5949249weight = 0.02419433
lamda = 3.3021934weight = 0.0039280728
lamda = 2.9713235weight = 0.005017997
LOADED 12582912 EVENTS IN 1131.4 ms
lamda = 0.91291904weight = 0.11080247
lamda = 2.0927753weight = 0.011891115
lamda = 1.443294weight = 0.031490322
lamda = 0.72511417weight = 0.21441211
lamda = 3.006553weight = 0.004906128
LOADED 16777216 EVENTS IN 2674.0 ms
lamda = 1.0574653weight = 0.07451244
lamda = 0.9779252weight = 0.09283592
lamda = 1.8250223weight = 0.016975451
lamda = 0.9119101weight = 0.110777274
lamda = 2.5400462weight = 0.0073058195
lamda = 1.6446884weight = 0.022292988
LOADED 20971520 EVENTS IN 112.6 ms
lamda = 1.8626993weight = 0.016036544
lamda = 2.2585537weight = 0.009883552
lamda = 1.1580445weight = 0.058009826
lamda = 2.3457797weight = 0.008955821
lamda = 0.8593342weight = 0.13432859
lamda = 1.8878386weight = 0.015616583
LOADED 25165824 EVENTS IN 124.3 ms
LOADED 25552337 EVENTS IN  11.2 ms
lamda = 0.9953789weight = 0.08766594
lamda = 2.80196weight = 0.0057731555
lamda = 2.1811604weight = 0.0106836995
lamda = 2.0104656weight = 0.013128343
lamda = 2.1067512weight = 0.0117581105
lamda = 0.23956504weight = 5.8878136
lamda = 2.667289weight = 0.006539576
lamda = 2.8211741weight = 0.0056747673
lamda = 2.5578222weight = 0.0072482186
lamda = 3.1017652weight = 0.004538702
lamda = 0.81347775weight = 0.15362896
lamda = 2.5024123weight = 0.0075995494
lamda = 3.170335weight = 0.0043077185
lamda = 2.3631904weight = 0.008763356
lamda = 1.0908056weight = 0.06710697
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="3193.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-20T12%3A45%3A06%2B01%3A00&amp;precision=second" title="2011-06-20T12:45:06+01:00 in Timeline">9 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[12663]</a>) Refs <a class="closed ticket" href="3193.html" title="enhancement: Anvred corrections for single crystal (closed: fixed)">#3193</a> Test for AnvredCorrection
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="3193.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-20T13%3A04%3A17%2B01%3A00&amp;precision=second" title="2011-06-20T13:04:17+01:00 in Timeline">9 years</a> ago by Vickie Lynch
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Agrees with corrections in IsawEV.  Test and wiki page added.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="3193.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-28T19%3A01%3A09%2B01%3A00&amp;precision=second" title="2011-06-28T19:01:09+01:00 in Timeline">9 years</a> ago by Michael Reuter
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Michael Reuter</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="3193.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2011-06-29T14%3A11%3A02%2B01%3A00&amp;precision=second" title="2011-06-29T14:11:02+01:00 in Timeline">9 years</a> ago by Michael Reuter
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Everything is within acceptable limits.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="3193.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-03T22%3A56%3A58%2B01%3A00&amp;precision=second" title="2015-06-03T22:56:58+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/4040"><span class="icon">â€‹</span>4040</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/3193?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/3193?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/3193?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>