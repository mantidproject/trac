<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #4557 (express MD axis units as related to lattice vectors rather then momentum)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="4556.html" title="Ticket #4556" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/4557?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/4557?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/4557?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="4558.html" title="Ticket #4558" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 4557, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="4556.html" title="Ticket #4556">Previous Ticket</a></span></li><li><span><a class="next" href="4558.html" title="Ticket #4558">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/4557.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="4557.html">Ticket #4557</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-19T10%3A53%3A34Z&amp;precision=second" title="2012-01-19T10:53:34Z in Timeline">9 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-03T23%3A55%3A54%2B01%3A00&amp;precision=second" title="2015-06-03T23:55:54+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">express MD axis units as related to lattice vectors rather then momentum</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Alex+Buts">Alex Buts</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Alex+Buts">Alex Buts</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=blocker">blocker</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;2.0.html">Release 2.0</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=VATES">VATES</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              zikovskyjl@…, saviciat@…, campbellsi@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span><a class="closed ticket" href="4522.html" title="MD Slice viewer should display Dimension name, not dim ID">#4522</a></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Andrei Savici
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
When we can not agree if B-matrix should be used directly in the transformation into reciprocal coordinate system, (e.g to use reciprocal lattice coordinate system or notional coordinate system -- currently used by Mslice and Horace) we can of course normalize resulting image by reciprocal lattice parameters a*, b* c* (2p/a, 2p/b, 2p/c) as this is usually the natural scale of the process, occurring in the experiment. 
</p>
<p>
This means converting momentum components and momentum constrains for QhQkQl mode of ConvertToMDEvents procedure into kind of "hkl" system of coordinates.
</p>
<p>
As soon as axis caption clearly say so, it can be done within the routine, defining the transformation matrix. This creates some inconsistency with axis untis but can be accepted as temporary measure. 
</p>
<p>
In more general way it should be implemented within transformation into any target coordinate system but this can not be achieved for iteration 32. 
</p>
<p>
Like in Mslice, I am intending to keep |Q| mode in units of momentum. 
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="4557.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-19T10%3A55%3A08Z&amp;precision=second" title="2012-01-19T10:55:08Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocked By</strong>
        <em>4522</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="4557.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-19T16%3A51%3A17Z&amp;precision=second" title="2012-01-19T16:51:17Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="4557.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-19T18%3A46%3A35Z&amp;precision=second" title="2012-01-19T18:46:35Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="4557.html" title="enhancement: express MD axis units as related to lattice vectors rather then momentum (closed: fixed)">#4557</a> Enabled test needed for that
</p>
<p>
And hopefully fix it on Unix 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/667e688fd6bc38fe95a0b00d1eb5e61cb86e7ae2" title="667e688fd6bc38fe95a0b00d1eb5e61cb86e7ae2">667e688fd6bc38fe95a0b00d1eb5e61cb86e7ae2</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="4557.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-20T12%3A02%3A15Z&amp;precision=second" title="2012-01-20T12:02:15Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="4557.html" title="enhancement: express MD axis units as related to lattice vectors rather then momentum (closed: fixed)">#4557</a> This fixes it
</p>
<p>
Though couple of additional unit tests will be useful. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8e337fdf300ef462d42994e89dfffc2fa46a4f55" title="8e337fdf300ef462d42994e89dfffc2fa46a4f55">8e337fdf300ef462d42994e89dfffc2fa46a4f55</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="4557.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-20T12%3A17%3A02Z&amp;precision=second" title="2012-01-20T12:17:02Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
new boolean property introduced which enables this behaviour. 
</p>
<p>
would be nice if python interface to slice viewer selects dimensions on the basis of their id-s and not axis names. 
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-20T12%3A17%3A55Z&amp;precision=second" title="2012-01-20T12:17:55Z in Timeline">9 years</a> ago
                      by Alex Buts
                    (<a href="https://trac.mantidproject.org/mantid/ticket/4557?cversion=0&amp;cnum_hist=5#comment:5">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/4557?action=comment-diff&amp;cnum=5&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="4557.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-24T04%3A56%3A29Z&amp;precision=second" title="2012-01-24T04:56:29Z in Timeline">9 years</a> ago by Andrei Savici
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Andrei Savici</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="4557.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-25T00%3A01%3A54Z&amp;precision=second" title="2012-01-25T00:01:54Z in Timeline">9 years</a> ago by Andrei Savici
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Something is very wrong. It's even worst than it was before. In our test script, I tried 
</p>
<pre class="wiki">SetUB(Workspace='CNCS_7860_event',a='10.4165',b='3.4165',c='10.4165',u='1,0,0',v='0,0,1')
</pre><p>
and
</p>
<pre class="wiki">ConvertToMDEvents(InputWorkspace='preMDpart'+str(i),OutputWorkspace='MDpart'+str(i),QDimensions='QhQkQl',QinHKL=False,dEAnalysisMode='Direct',MinValues='-2,-2,-3,-1',MaxValues='2,2,3,3',SplitInto="20,20,20,1")
</pre><p>
The U matrix transforms in such a way that the first Q component is along h, the second along k, the third along l, not 1st along u, second along v. If you want that, the description of the transformation is in the UB matrix document.
</p>
<p>
Here is a quick sanity check: The arcs should meet at 0, when plotted with
</p>
<pre class="wiki">ps=plotSlice("MD", xydim=[0,2], slicepoint=[0,0] )
</pre><p>
in such a way that the arcs are perpendicular to the component along the beam direction 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="4557.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-25T13%3A10%3A46Z&amp;precision=second" title="2012-01-25T13:10:46Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
This is what generated by getUmatrix procedure on Oriented lattice in case of uv specified in the example. 
</p>
<p>
I am going to compare results from Umatrix with Mslice and dropping all suspicious permutations out of there (which includes returning the matrix multiplications on ConvertToMDEvents methods to its initial form. 
</p>
<p>
 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="4557.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-27T16%3A40%3A37Z&amp;precision=second" title="2012-01-27T16:40:37Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="4557.html" title="enhancement: express MD axis units as related to lattice vectors rather then momentum (closed: fixed)">#4557</a> Some unit/sanity test for orientation matrix 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/edb58c4a4159f8f3d75d6c25b13d1739f0abc3eb" title="edb58c4a4159f8f3d75d6c25b13d1739f0abc3eb">edb58c4a4159f8f3d75d6c25b13d1739f0abc3eb</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="4557.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-27T16%3A40%3A38Z&amp;precision=second" title="2012-01-27T16:40:38Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="4557.html" title="enhancement: express MD axis units as related to lattice vectors rather then momentum (closed: fixed)">#4557</a> Returned to previous behaviour if Q units are selected. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/80da26b2b75e1dccf6a217ec534d4a913378199f" title="80da26b2b75e1dccf6a217ec534d4a913378199f">80da26b2b75e1dccf6a217ec534d4a913378199f</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="4557.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-27T16%3A54%3A52Z&amp;precision=second" title="2012-01-27T16:54:52Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="4557.html" title="enhancement: express MD axis units as related to lattice vectors rather then momentum (closed: fixed)">#4557</a> Fixing failing unit test 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8369b27cd3b42de177e7014839a68e10d396356e" title="8369b27cd3b42de177e7014839a68e10d396356e">8369b27cd3b42de177e7014839a68e10d396356e</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="4557.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-27T20%3A31%3A12Z&amp;precision=second" title="2012-01-27T20:31:12Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="4557.html" title="enhancement: express MD axis units as related to lattice vectors rather then momentum (closed: fixed)">#4557</a> It seems sort things out 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/11ae6ce2f701203dafce5c9f66e9e4662f1855a9" title="11ae6ce2f701203dafce5c9f66e9e4662f1855a9">11ae6ce2f701203dafce5c9f66e9e4662f1855a9</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="4557.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-27T20%3A39%3A27Z&amp;precision=second" title="2012-01-27T20:39:27Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="4557.html" title="enhancement: express MD axis units as related to lattice vectors rather then momentum (closed: fixed)">#4557</a> Fixing unit test 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/242a86fe5b17a920575a0801032f7d7ca2d486b4" title="242a86fe5b17a920575a0801032f7d7ca2d486b4">242a86fe5b17a920575a0801032f7d7ca2d486b4</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="4557.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-27T20%3A41%3A58Z&amp;precision=second" title="2012-01-27T20:41:58Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
It seems sorts thing out as the script below (with possible modifications doing QinHKL) produces result, which looks very similar to Mslice. 
</p>
<pre class="wiki">
WS_Name = 'CNCS_7860_event'
Load(Filename='CNCS_7860_event.nxs',OutputWorkspace=WS_Name ) 

#ConvertUnits(InputWorkspace=WS_Name,OutputWorkspace=WS_Name,Target='DeltaE',EMode='Direct',EFixed='3')
#Rebin(InputWorkspace=WS_Name,OutputWorkspace=WS_Name,Params='-1,0.05,3',PreserveEvents=True) 
#SaveNXSPE(InputWorkspace=WS_Name,Filename='d:/Data/Slicer/'+WS_Name+'.nxspe',Efixed=3,Psi=0) 

AddSampleLog(Workspace=WS_Name,LogName='Ei',LogText='3',LogType='Number')
MD_Name='MD1'
SetUB(Workspace=WS_Name,a='10.4165',b='3.4165',c='10.4165',u='1,0,0',v='0,1,0')
ConvertToMDEvents(InputWorkspace=WS_Name,OutputWorkspace=MD_Name,QDimensions='QhQkQl',QinHKL=False,dEAnalysisMode='Direct',MinValues='-2,-2,-3,-1',MaxValues='2,2,3,3',SplitInto="20,20,20,1")
ps=plotSlice(MD_Name, xydim=["Q1","Q2"], slicepoint=[0,0] )

MD_Name='MD2'
SetUB(Workspace=WS_Name,a='10.4165',b='3.4165',c='10.4165',u='1,0,0',v='0,0,1')
ConvertToMDEvents(InputWorkspace=WS_Name,OutputWorkspace=MD_Name,QDimensions='QhQkQl',QinHKL=False,dEAnalysisMode='Direct',MinValues='-2,-2,-3,-1',MaxValues='2,2,3,3',SplitInto="20,20,20,1")
ps=plotSlice(MD_Name, xydim=["Q1","Q3"], slicepoint=[0,0] )


MD_Name='MD3'
SetUB(Workspace=WS_Name,a='10.4165',b='3.4165',c='10.4165',u='0,1,0',v='0,0,1')
ConvertToMDEvents(InputWorkspace=WS_Name,OutputWorkspace=MD_Name,QDimensions='QhQkQl',QinHKL=False,dEAnalysisMode='Direct',MinValues='-2,-2,-3,-1',MaxValues='2,2,3,3',SplitInto="20,20,20,1")
ps=plotSlice(MD_Name, xydim=["Q2","Q3"], slicepoint=[0,0] )

</pre>
    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-27T20%3A44%3A48Z&amp;precision=second" title="2012-01-27T20:44:48Z in Timeline">9 years</a> ago
                      by Stuart Campbell
                    (<a href="https://trac.mantidproject.org/mantid/ticket/4557?cversion=0&amp;cnum_hist=14#comment:14">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/4557?action=comment-diff&amp;cnum=14&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="4557.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-27T20%3A43%3A27Z&amp;precision=second" title="2012-01-27T20:43:27Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="4557.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-27T20%3A43%3A59Z&amp;precision=second" title="2012-01-27T20:43:59Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="4557.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-27T22%3A17%3A14Z&amp;precision=second" title="2012-01-27T22:17:14Z in Timeline">9 years</a> ago by Andrei Savici
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="4557.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-27T22%3A18%3A11Z&amp;precision=second" title="2012-01-27T22:18:11Z in Timeline">9 years</a> ago by Andrei Savici
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Seems to be working as described
</p>

    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="4557.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-01-29T20%3A49%3A45Z&amp;precision=second" title="2012-01-29T20:49:45Z in Timeline">9 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="4557.html" title="enhancement: express MD axis units as related to lattice vectors rather then momentum (closed: fixed)">#4557</a> uv was set to any cut when specified in ConvertToMDEvents 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/6516ddf8405f31b790d29ede63e05622f6c25477" title="6516ddf8405f31b790d29ede63e05622f6c25477">6516ddf8405f31b790d29ede63e05622f6c25477</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="4557.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-03T23%3A55%3A54%2B01%3A00&amp;precision=second" title="2015-06-03T23:55:54+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/5404"><span class="icon">​</span>5404</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/4557?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/4557?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/4557?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>