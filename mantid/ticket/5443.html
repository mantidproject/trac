<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #5443 (Load IDF info from Nexus instrument folder)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="5442.html" title="Ticket #5442" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/5443?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/5443?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/5443?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="5444.html" title="Ticket #5444" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 5443, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="5442.html" title="Ticket #5442">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="5444.html" title="Ticket #5444">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="5443.html">Ticket #5443</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-06-01T12%3A26%3A47%2B01%3A00&amp;precision=second" title="2012-06-01T12:26:47+01:00 in Timeline">8 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T00%3A32%3A40%2B01%3A00&amp;precision=second" title="2015-06-04T00:32:40+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Load IDF info from Nexus instrument folder</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Anders+Markvardsen">Anders Markvardsen</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Karl+Palmen">Karl Palmen</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=critical">critical</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;2.4.html">Release 2.4</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Mantid">Mantid</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              freddie.akeroyd@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Nick Draper
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Freddie will copy the following info from a processed Nexus file:
</p>
<p>
mantid_workspace_1
</p>
<blockquote>
<p>
instrument
</p>
</blockquote>
<blockquote>
<blockquote>
<p>
instrument_parameter_map (folder)
</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>
instrument_source
</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>
instrument_xml (folder)
</p>
</blockquote>
</blockquote>
<p>
over into ISIS raw Nexus files. 
</p>
<p>
Allow Mantid to load such information.
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="5443.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-08-10T13%3A43%3A52%2B01%3A00&amp;precision=second" title="2012-08-10T13:43:52+01:00 in Timeline">8 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Release 2.2</em> to <em>Release 2.3</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Moved at the end of release 2.2
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="5443.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-08-30T10%3A27%3A01%2B01%3A00&amp;precision=second" title="2012-08-30T10:27:01+01:00 in Timeline">8 years</a> ago by Anders Markvardsen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Priority</strong>
        changed from <em>major</em> to <em>critical</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="5443.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-09-11T15%3A38%3A52%2B01%3A00&amp;precision=second" title="2012-09-11T15:38:52+01:00 in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
    <div class="comment searchable">
      
      <p>
I've found that the file provided by Freddie is loaded by LoadISISNexus2. Getting this to read the instrument details like LoadNexusProcessed will be particulatly challenging, because of major differences in the structures of LoadISISNexus2 and LoadNexusProcessed, in particular only that latter uses the C++ interface to Nexus, which is needed for this.
So I'd use the C++ interface for this, putting most of the code into ExpermentInfo or some other suitable class accessible to other Load Nexus classes.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="5443.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-09-13T11%3A23%3A50%2B01%3A00&amp;precision=second" title="2012-09-13T11:23:50+01:00 in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="5443.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-09-17T13%3A13%3A19%2B01%3A00&amp;precision=second" title="2012-09-17T13:13:19+01:00 in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
    <div class="comment searchable">
      
      <p>
LoadISISNexus2 gets instrument parameters from Nexus file re <a class="closed ticket" href="5443.html" title="enhancement: Load IDF info from Nexus instrument folder (closed: fixed)">#5443</a>
</p>
<p>
Instrument parameters are got the old way (from IDF) if not found in Nexus file.
</p>
<p>
Default version was set to 1 to get this to work. It needs setting back to 0, so that old NexusProcessed files can be read. For this code for LoadISISNexus2 to communicated a default version will be added.
</p>
<p>
Also LoadISISNexus2 loads instrument parameters a second time for an additional log. This is still done the old way. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b09a42d1fec5321ff47f238ac6a3a686687e0253" title="b09a42d1fec5321ff47f238ac6a3a686687e0253">b09a42d1fec5321ff47f238ac6a3a686687e0253</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="5443.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-09-17T13%3A13%3A19%2B01%3A00&amp;precision=second" title="2012-09-17T13:13:19+01:00 in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
    <div class="comment searchable">
      
      <p>
Get LoadISISNexus to set default instrument version re <a class="closed ticket" href="5443.html" title="enhancement: Load IDF info from Nexus instrument folder (closed: fixed)">#5443</a>
</p>
<p>
Signed-off-by: Karl Palmen &lt;karl.palmen@…&gt; 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/79bf442b1d1ad716686fd13295767cab9089ce1c" title="79bf442b1d1ad716686fd13295767cab9089ce1c">79bf442b1d1ad716686fd13295767cab9089ce1c</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="5443.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-09-17T13%3A13%3A20%2B01%3A00&amp;precision=second" title="2012-09-17T13:13:20+01:00 in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
    <div class="comment searchable">
      
      <p>
Changed expected sample name to what it actually is re <a class="closed ticket" href="5443.html" title="enhancement: Load IDF info from Nexus instrument folder (closed: fixed)">#5443</a>
</p>
<p>
File read in this test is LOQ49886.nxs .
If this is not correct, a comment to this effect, should be provided in the test.
</p>
<p>
Signed-off-by: Karl Palmen &lt;karl.palmen@…&gt; 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/d69bc7d985201fb02e99c5228c057c9a186d5411" title="d69bc7d985201fb02e99c5228c057c9a186d5411">d69bc7d985201fb02e99c5228c057c9a186d5411</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="5443.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-09-17T16%3A34%3A34%2B01%3A00&amp;precision=second" title="2012-09-17T16:34:34+01:00 in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
    <div class="comment searchable">
      
      <p>
This is difficult to test partly, because the parameter map string is too long to view in HDF view.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="5443.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-10-18T16%3A39%3A36%2B01%3A00&amp;precision=second" title="2012-10-18T16:39:36+01:00 in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket is awaiting a test file from Freddie Ackeroyd requested by Anders Markvardsen.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="5443.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-10-18T16%3A55%3A35%2B01%3A00&amp;precision=second" title="2012-10-18T16:55:35+01:00 in Timeline">8 years</a> ago by Anders Markvardsen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Cc</strong>
        <em>freddie.akeroyd@…</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Hi Freddie, when time, let us know when you 
have run your program through the Mantid intermediate file
</p>
<p>
<br />Olympic\Babylon5\Scratch\Anders\MAP18314intermediate.nxs
</p>
<p>
This 'raw' ISIS Nexus file will be used to test this ticket
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="5443.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-10-30T09%3A18%3A58Z&amp;precision=second" title="2012-10-30T09:18:58Z in Timeline">8 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Release 2.3</em> to <em>Release 2.4</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
moved to Release 2.4
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="5443.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-11-01T17%3A07%3A49Z&amp;precision=second" title="2012-11-01T17:07:49Z in Timeline">8 years</a> ago by Freddie Akeroyd
                </h3>
                
    <div class="comment searchable">
      
      <p>
Anders,
</p>
<p>
File created and placed in Olympic\Babylon5\Scratch\Anders
</p>
<p>
Regards,
</p>
<p>
Freddie
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="5443.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-11-02T16%3A42%3A35Z&amp;precision=second" title="2012-11-02T16:42:35Z in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
    <div class="comment searchable">
      
      <p>
LoadISISNexus2 gets instrument parameters from Nexus file re <a class="closed ticket" href="5443.html" title="enhancement: Load IDF info from Nexus instrument folder (closed: fixed)">#5443</a>
</p>
<p>
Instrument parameters are got the old way (from IDF) if not found in Nexus file.
</p>
<p>
Default version was set to 1 to get this to work. It needs setting back to 0, so that old NexusProcessed files can be read. For this code for LoadISISNexus2 to communicated a default version will be added.
</p>
<p>
Also LoadISISNexus2 loads instrument parameters a second time for an additional log. This is still done the old way. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b09a42d1fec5321ff47f238ac6a3a686687e0253" title="b09a42d1fec5321ff47f238ac6a3a686687e0253">b09a42d1fec5321ff47f238ac6a3a686687e0253</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="5443.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-11-02T16%3A42%3A36Z&amp;precision=second" title="2012-11-02T16:42:36Z in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
    <div class="comment searchable">
      
      <p>
Get LoadISISNexus to set default instrument version re <a class="closed ticket" href="5443.html" title="enhancement: Load IDF info from Nexus instrument folder (closed: fixed)">#5443</a>
</p>
<p>
Signed-off-by: Karl Palmen &lt;karl.palmen@…&gt; 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/79bf442b1d1ad716686fd13295767cab9089ce1c" title="79bf442b1d1ad716686fd13295767cab9089ce1c">79bf442b1d1ad716686fd13295767cab9089ce1c</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="5443.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-11-02T16%3A42%3A36Z&amp;precision=second" title="2012-11-02T16:42:36Z in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
    <div class="comment searchable">
      
      <p>
Changed expected sample name to what it actually is re <a class="closed ticket" href="5443.html" title="enhancement: Load IDF info from Nexus instrument folder (closed: fixed)">#5443</a>
</p>
<p>
File read in this test is LOQ49886.nxs .
If this is not correct, a comment to this effect, should be provided in the test.
</p>
<p>
Signed-off-by: Karl Palmen &lt;karl.palmen@…&gt; 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/d69bc7d985201fb02e99c5228c057c9a186d5411" title="d69bc7d985201fb02e99c5228c057c9a186d5411">d69bc7d985201fb02e99c5228c057c9a186d5411</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="5443.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-08T15%3A15%3A47Z&amp;precision=second" title="2013-01-08T15:15:47Z in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
    <div class="comment searchable">
      
      <p>
The test file Olympic\Babylon5\Scratch\Anders\MAP18314intermediate.nxs 
has been found to have A1_Window moved upwards (in Y-coord)and so tests the change.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="5443.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-08T15%3A30%3A27Z&amp;precision=second" title="2013-01-08T15:30:27Z in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
    <div class="comment searchable">
      
      <p>
Olympic\Babylon5\Scratch\Anders\MAP18314intermediate.nxs is not a valid test file, because its main folder is 'mantid_workspace_1' as for a Nexus Processed File rather than 'raw_data_1'. 
</p>
<p>
But then this need not be the file Freddie added. The name of this file was not given by Freddie, but could be found by timestamp.
</p>
<p>
MAPS00018314.nxs of November 2012 found to be valid test file and also has A1_window moved up.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="5443.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-14T14%3A25%3A45Z&amp;precision=second" title="2013-01-14T14:25:45Z in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
    <div class="comment searchable">
      
      <p>
I'm now satisfied with the test for parameter map. I also need a test for instrument source and instrument_xml. Such a test can be done by loading the file, saving to Nexus and verify the two are the same for these attributes. Also it is necessary to verify that these attributes in the saved Nexus file did not originate somewhere else from the test file. For this I want a test file with a unique XML file with a unique name and with unique contents easily distinguished from other XML file (e.g. a unique valid from date). 
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-14T14%3A30%3A40Z&amp;precision=second" title="2013-01-14T14:30:40Z in Timeline">8 years</a> ago
                      by Karl Palmen
                    (<a href="https://trac.mantidproject.org/mantid/ticket/5443?cversion=0&amp;cnum_hist=18#comment:18">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/5443?action=comment-diff&amp;cnum=18&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="5443.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-25T13%3A50%3A19Z&amp;precision=second" title="2013-01-25T13:50:19Z in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
To test download the attached MAPS...18537.nxs file. Load it and view instrument. 
</p>
<p>
Verify that the A2_window has been moved out of place to the top. 
</p>
<p>
View the file in HDF view or similar verify that a raw_data_1/instrument folder exists.
</p>
<p>
Verify that it has subfolders instrument_parameter_map, instrument_source and instrument_xml.
</p>
<p>
Look in the instrument_xml/data. You should see the contents of a MAPS IDF file. Verify that the component type definition for A2_window is different from that in the MAPS IDF file that would otherwise be loaded.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="5443.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-25T13%3A54%3A17Z&amp;precision=second" title="2013-01-25T13:54:17Z in Timeline">8 years</a> ago by Karl Palmen
                </h3>
                
    <div class="comment searchable">
      
      <p>
The test file is too big to attach. It may be found in 
<br />Olympic\Babylon5\Scratch\Anders and is called MAPS00018537.nxs .
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="5443.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-28T12%3A24%3A02Z&amp;precision=second" title="2013-01-28T12:24:02Z in Timeline">8 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Nick Draper</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="5443.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-28T12%3A35%3A23Z&amp;precision=second" title="2013-01-28T12:35:23Z in Timeline">8 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Test:
</p>
<ol><li>remove maps definition from instrument folder
</li><li>check that a maps file loaded cannot be viewed in instrument view - yes empty view
</li><li>load file from comment 20
</li><li>Check instrument view - yes visible, and with A_2 window moved
</li></ol><p>
Passed
</p>

    </div>

              </div>
              <div class="change" id="trac-change-23">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:23" class="cnum">
      <a href="5443.html#comment:23">comment:23</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-28T12%3A39%3A54Z&amp;precision=second" title="2013-01-28T12:39:54Z in Timeline">8 years</a> ago by Nick Draper
                </h3>
                
    <div class="comment searchable">
      
      <p>
Test continued after:
</p>
<ol><li>followed to replace instrument files and reload an original maps file &amp; one with embedded instrument.
</li><li>view both, fine
</li></ol>
    </div>

              </div>
              <div class="change" id="trac-change-24">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:24" class="cnum">
      <a href="5443.html#comment:24">comment:24</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T00%3A32%3A40%2B01%3A00&amp;precision=second" title="2015-06-04T00:32:40+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/6289"><span class="icon">​</span>6289</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/5443?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/5443?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/5443?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>