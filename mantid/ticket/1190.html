<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #1190 (Respond to Cameron's emails)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="1189.html" title="Ticket #1189" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/1190?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/1190?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/1190?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="1191.html" title="Ticket #1191" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 1190, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="1189.html" title="Ticket #1189">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="1191.html" title="Ticket #1191">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="1190.html">Ticket #1190</a>
          <span class="status">(closed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2010-04-08T11%3A51%3A46%2B01%3A00&amp;precision=second" title="2010-04-08T11:51:46+01:00 in Timeline">11 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-03T22%3A30%3A09%2B01%3A00&amp;precision=second" title="2015-06-03T22:30:09+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Respond to Cameron's emails</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Steve+Williams">Steve Williams</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Steve+Williams">Steve Williams</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="missing milestone"></a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component"></a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Michael Whitty
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Respond to the following email and later follow ons to it
From: Neylon, Cameron (STFC,RAL,ISIS)
Sent: 31 March 2010 14:37
To: Draper, Nick (-,RAL,ISIS)
Subject: Re: [Mantid-help] Available python libraries in Mantid
</p>
<p>
Hi Nick
</p>
<p>
Thanks for this and sorry for being slow to reply - I did successfully put in a lab notebook entry from within Mantid so I've got that end working. I was wondering whether you could point me in the direction of documentation (or just the relevant code) that would enable me to programmatically do some SANS raw data addition and 1d reduction.
</p>
<p>
Essentially my plan is:
</p>
<p>
Feed program a list of sample and background runs and transmissions in some form - working towards a GUI at some point but some sort of batch file will probably be my starting point. I could use the existing Batch processing input format for this.
</p>
<p>
Have it do the additions/reductions requested and generate SASxml objects.
</p>
<p>
Post each resulting reduced data object as an xml file into the online lab notebook.
</p>
<p>
I've looked at the SANS scripts but its not immediately clear to me how much setup needs to be done and exactly which ones I want to call if not using the GUI. I'm guessing that the SANSBatchMode.py is probably the most informative script for figuring this out?
</p>
<p>
Cheers
</p>
<p>
Cameron
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="1190.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2010-04-08T12%3A01%3A39%2B01%3A00&amp;precision=second" title="2010-04-08T12:01:39+01:00 in Timeline">11 years</a> ago by Steve Williams
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[4247]</a>) For the SANS Python scripts fill some in some instrument defaults that will allow batch processing of input files re <a class="closed ticket" href="1190.html" title="enhancement: Respond to Cameron's emails (closed)">#1190</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="1190.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2010-04-13T13%3A13%3A00%2B01%3A00&amp;precision=second" title="2010-04-13T13:13:00+01:00 in Timeline">10 years</a> ago by Steve Williams
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
The only email, so far, to Cameron Neylon
</p>
<p>
Sorry for missing the attachments from the first email.
</p>
<p>
Cheers,
Steve
</p>
<hr />
<p>
From: Williams, Steve (STFC,RAL,ISIS)
Sent: 09 April 2010 09:47
To: Neylon, Cameron (STFC,RAL,ISIS)
Subject: FW: [Mantid-help] Available python libraries in Mantid
</p>
<p>
Hi Cameron,
</p>
<blockquote>
<p>
Sorry about the delay in giving you an answer there was a problem that I couldn't fix before I went away for Easter. We have a script which uses the functionality in SANSBatchMode.py to do much of what you want. I've attached the script and an example comma separated values file where the sample files (not background files yet) to be converted are listed. You will need to change the directory names at the top of the file to correspond to where the files are stored on your computer. You also need to get today's development build from download.mantidproject.org as there have been some recent updates.
</p>
</blockquote>
<p>
The script creates Mantid workspaces and creates text files as output. It doesn't have functionality to that adds raw files together, although I've been told that Richard Heenan has a way to do that. 
</p>
<p>
It may be helpful for your application if BatchReduce(), called at the end of the script, returned an array of the filenames that it created. Let us know if you want to us to change it to do that.
</p>
<p>
Regards,
Steve
</p>
<hr />
<p>
From: Draper, Nick (-,RAL,ISIS)
Sent: 01 April 2010 09:14
To: Neylon, Cameron (STFC,RAL,ISIS)
Cc: Williams, Steve (STFC,RAL,ISIS); Gigg, Martyn (Tessella,RAL,ISIS)
Subject: RE: [Mantid-help] Available python libraries in Mantid
</p>
<p>
Cameron,
</p>
<p>
I'll pass you on to my Colleague Steve for that, as he know more about the SANS scripts than I do.
</p>
<p>
Regards,
Nick Draper
</p>
<hr />
<p>
From: Neylon, Cameron (STFC,RAL,ISIS)
Sent: 31 March 2010 14:37
To: Draper, Nick (-,RAL,ISIS)
Subject: Re: [Mantid-help] Available python libraries in Mantid
</p>
<p>
Hi Nick
</p>
<p>
Thanks for this and sorry for being slow to reply - I did successfully put in a lab notebook entry from within Mantid so I've got that end working. I was wondering whether you could point me in the direction of documentation (or just the relevant code) that would enable me to programmatically do some SANS raw data addition and 1d reduction.
</p>
<p>
Essentially my plan is:
</p>
<p>
Feed program a list of sample and background runs and transmissions in some form - working towards a GUI at some point but some sort of batch file will probably be my starting point. I could use the existing Batch processing input format for this.
</p>
<p>
Have it do the additions/reductions requested and generate SASxml objects.
</p>
<p>
Post each resulting reduced data object as an xml file into the online lab notebook.
</p>
<p>
I've looked at the SANS scripts but its not immediately clear to me how much setup needs to be done and exactly which ones I want to call if not using the GUI. I'm guessing that the SANSBatchMode.py is probably the most informative script for figuring this out?
</p>
<p>
Cheers
</p>
<p>
Cameron
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="1190.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2010-04-16T15%3A55%3A48%2B01%3A00&amp;precision=second" title="2010-04-16T15:55:48+01:00 in Timeline">10 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
(In <a class="missing changeset" title="No default repository defined">[4303]</a>) For SANS reduction Python now clears the previous raw data workspaces, if any exist, upon assignment of a new one. Avoids excessive memory use in batch mode. Re <a class="closed ticket" href="1190.html" title="enhancement: Respond to Cameron's emails (closed)">#1190</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="1190.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2010-05-13T11%3A41%3A53%2B01%3A00&amp;precision=second" title="2010-05-13T11:41:53+01:00 in Timeline">10 years</a> ago by Steve Williams
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Iteration 23</em> to <em>Ongoing</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Hi Cameron,
PyQt is a good way to get applications to working quickly. Although we haven't yet used in the Mantid project or documented how to use it. Here is a (slightly trivial) example of using PyQt with Mantid. In MantidPlot press F3 to get the Python interpreter and copy in the following code
</p>
<p>
#<br />
import sys<br />
from PyQt4 import QtGui
</p>
<p>
reply = QtGui.QMessageBox.question(widget, 'Message',
</p>
<blockquote>
<p>
"Load raw?", QtGui.QMessageBox.Yes, QtGui.QMessageBox.No)
</p>
</blockquote>
<p>
if reply == QtGui.QMessageBox.Yes:
</p>
<blockquote>
<p>
data = LoadRawDialog()<a class="missing changeset" title="No default repository defined">[0]</a>
</p>
</blockquote>
<p>
else:
</p>
<blockquote>
<p>
data = LoadNexus()<a class="missing changeset" title="No default repository defined">[0]</a>
</p>
</blockquote>
<p>
#<br />
plotSpectrum(data, 0)
</p>
<p>
press ctrl-return to execute it. Martyn pointed me to a PyQt tutorial here <a class="ext-link" href="http://zetcode.com/tutorials/pyqt4/"><span class="icon">​</span>http://zetcode.com/tutorials/pyqt4/</a> , which I like.
</p>
<p>
Much of our code is written in C++ so that we can interact with the MantidAPI's and QtiPlot's C++ code in a deeper way. You're unlikely to need this as you can ask us to expose the functionality that you need to Python. But you can find the code to the main SANS GUI from here <a class="ext-link" href="http://trac.mantidproject.org/mantid/browser/trunk/Code/qtiplot/MantidQt/CustomInterfaces/"><span class="icon">​</span>http://trac.mantidproject.org/mantid/browser/trunk/Code/qtiplot/MantidQt/CustomInterfaces/</a> and particularly here SANSRunWindow.cpp. If you want more explanation of the that code please ask, it's not easy to understand at first or compile but we have more documentation and things to help.
</p>
<p>
Hope that helps, let us know how you get on,
</p>
<p>
Steve
</p>
<hr />
<p>
From: Neylon, Cameron (STFC,RAL,ISIS) 
Sent: 13 May 2010 07:22
To: Williams, Steve (STFC,RAL,ISIS)
Subject: Code for Mantid SANS GUI
</p>
<p>
Hi Guys
</p>
<p>
Could you point me to where the code for the SANS GUI is in Mantid. I'm
starting to work with PyQt and build up a few things and want to make sure
that I'm doing things in the same way. Will probably also re-use some of the
code.
</p>
<p>
Cheers
</p>
<p>
Cameron
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="1190.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2010-08-24T10%3A09%3A58%2B01%3A00&amp;precision=second" title="2010-08-24T10:09:58+01:00 in Timeline">10 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="1190.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2010-08-27T11%3A13%3A15%2B01%3A00&amp;precision=second" title="2010-08-27T11:13:15+01:00 in Timeline">10 years</a> ago by Michael Whitty
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Michael Whitty</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="1190.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2010-08-27T11%3A14%3A30%2B01%3A00&amp;precision=second" title="2010-08-27T11:14:30+01:00 in Timeline">10 years</a> ago by Michael Whitty
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
nothing's changed, email flow has stopped, ticket was set to verify so going to close it as "passing" to get it off the list
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="1190.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-22T15%3A40%3A02%2B01%3A00&amp;precision=second" title="2013-07-22T15:40:02+01:00 in Timeline">7 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        <em>Ongoing</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Milestone Ongoing deleted
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="1190.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-03T22%3A30%3A09%2B01%3A00&amp;precision=second" title="2015-06-03T22:30:09+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/2037"><span class="icon">​</span>2037</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/1190?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/1190?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/1190?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>