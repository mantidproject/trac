<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #8488 (ConvertToMD does not produces correct image any more)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="8487.html" title="Ticket #8487" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8488?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8488?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8488?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="8489.html" title="Ticket #8489" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 8488, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="8487.html" title="Ticket #8487">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="8489.html" title="Ticket #8489">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="8488.html">Ticket #8488</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-20T11%3A27%3A38Z&amp;precision=second" title="2013-11-20T11:27:38Z in Timeline">7 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A38%3A48%2B01%3A00&amp;precision=second" title="2015-06-04T02:38:48+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">ConvertToMD does not produces correct image any more</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Alex+Buts">Alex Buts</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Alex+Buts">Alex Buts</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;3.1.html">Release 3.1</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Framework">Framework</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              nick.draper@…, martyn.gigg@…, saviciat@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Andrei Savici
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
      <span class="lastmod" title="2013-11-20 11:34:13.489064+00:00">
        (last modified by Alex Buts)
        (<a href="https://trac.mantidproject.org/mantid/ticket/8488?action=diff&amp;version=1">diff</a>)
      </span>
    </h3>
    <div class="searchable">
      <p>
If I produce MD image using the script below (the data for it are availible on the test server) and compare it with he image, produced by Horace, they look substantially different. 
</p>
<p>
It was a time, where convert to MD was producing the images identical to Horace. 
</p>
<p>
The workspaces contain identical number of events. Just appearance/arrangements are different.
</p>
<p>
P.S.
Can not produce decent Mantid image as Sliceviewer SavePicture does not work any more. Ticket <a class="closed ticket" href="8482.html" title="defect: Sliceviewer does not save to image any more (closed: fixed)">#8482</a> has been created to fix that. 
</p>
<pre class="wiki"># Sample script to build Mantid's combined MD workspace -- Horace sqw equivalent
config['defaultsave.directory']='/home/wkc26243/Fe400'
save_dir = config.getString('defaultsave.directory')
if len(save_dir) ==0 :
    config['defaultsave.directory']=os.getcwd()
    save_dir = config.getString('defaultsave.directory')
print "Data will be saved into: ",save_dir
config.appendDataSearchDir(save_dir)

print 'start\n'
cur_ws='wsn';
md_ws='mdws4D';
MDWSF='';


pars = dict();
pars['InputWorkspace']=''
pars['QDimensions']='Q3D'
pars['dEAnalysisMode']='Direct'
pars['Q3DFrames']='HKL'
pars['QConversionScales']='HKL'
pars['PreprocDetectorsWS']='preprDet'
pars['MinValues']='-7,-7,-7.,-72.0'
pars['MaxValues']='7.,7.,7.,382.0'
pars['SplitInto']=50
pars['MaxRecursionDepth']=1
pars['MinRecursionDepth']=1

for n in xrange(15052,15178+1):
	source = 'MAP'+str(n)+'.nxspe';
	target  = 'MDMAP'+str(n)+'.nxs';
	if not(os.path.exists(target )):
		print 'Converting ',source
		LoadNXSPE(Filename=source,OutputWorkspace=cur_ws)
		os.remove(source);
		SetUB(Workspace=cur_ws,a='2.87',b='2.87',c='2.87')
		# rotated by proper number of degrees around axis Y
		# AddSampleLog(Workspace=cur_ws,LogName='Psi',LogText=str(ic),LogType='Number Series')   -- sample log i shuld be already there 
		SetGoniometer(Workspace=cur_ws,Axis0='Psi,0,1,0,1')

		pars['InputWorkspace']=cur_ws;
		md_ws=ConvertToMD(**pars)

		SaveMD(md_ws,Filename=target  );
		DeleteWorkspace(md_ws);
		DeleteWorkspace(cur_ws);	
		
	if (len(MDWSF) == 0):
		MDWSF = target;
	else:
		MDWSF=MDWSF+','+target;


ws4D = MergeMDFiles(MDWSF,OutputFilename='fe400_8k.nxs',Parallel='0');
######################################################################


</pre>
    </div>
  </div>
</div>
          
    <div id="attachments">
        <h2 class="foldable">Attachments</h2>
        <div>
          <dl class="attachments">
              <dt>
    <a href="../attachment/ticket/8488/MantidImage.png.html" title="View attachment">MantidImage.png</a><a href="../raw-attachment/ticket/8488/MantidImage.png" class="trac-rawlink" title="Download">​</a>
       (<span title="75443 bytes">73.7 KB</span>) -
      added by <em>Alex Buts</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-20T11%3A31%3A09Z&amp;precision=second" title="2013-11-20T11:31:09Z in Timeline">7 years</a> ago.
  </dt>
              <dd>
                Mantid image
              </dd>
              <dt>
    <a href="../attachment/ticket/8488/HoraceImage.png.html" title="View attachment">HoraceImage.png</a><a href="../raw-attachment/ticket/8488/HoraceImage.png" class="trac-rawlink" title="Download">​</a>
       (<span title="53998 bytes">52.7 KB</span>) -
      added by <em>Alex Buts</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-20T11%3A31%3A29Z&amp;precision=second" title="2013-11-20T11:31:29Z in Timeline">7 years</a> ago.
  </dt>
              <dd>
                Horace Image
              </dd>
          </dl>
          
        </div>
    </div>

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-20T11%3A31%3A09Z&amp;precision=second" title="2013-11-20T11:31:09Z in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/8488/MantidImage.png.html"><em>MantidImage.png</em></a><a href="../raw-attachment/ticket/8488/MantidImage.png" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Mantid image
</p>

    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-20T11%3A31%3A29Z&amp;precision=second" title="2013-11-20T11:31:29Z in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/8488/HoraceImage.png.html"><em>HoraceImage.png</em></a><a href="../raw-attachment/ticket/8488/HoraceImage.png" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Horace Image
</p>

    </div>

              </div>
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="8488.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-20T11%3A34%3A13Z&amp;precision=second" title="2013-11-20T11:34:13Z in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Cc</strong>
        <em>russell.taylor@…</em> removed
    </li><li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/8488?action=diff&amp;version=1">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="8488.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-25T10%3A25%3A08Z&amp;precision=second" title="2013-11-25T10:25:08Z in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="8488.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-25T10%3A25%3A16Z&amp;precision=second" title="2013-11-25T10:25:16Z in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Backlog</em> to <em>Release 3.1</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="8488.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-26T17%3A43%3A34Z&amp;precision=second" title="2013-11-26T17:43:34Z in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8488.html" title="defect: ConvertToMD does not produces correct image any more (closed: fixed)">#8488</a> This should fix it
</p>
<p>
Par file has the azimuthal angle sign convention opposite to the one, used by nxspe. To avoid any confusion, nxspe should always use one (right hand side) convention for azimuthal angle.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b8de0f6f2eb0172cab55b79466963a5582edaaad" title="b8de0f6f2eb0172cab55b79466963a5582edaaad">b8de0f6f2eb0172cab55b79466963a5582edaaad</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="8488.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-26T17%3A46%3A15Z&amp;precision=second" title="2013-11-26T17:46:15Z in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Apparently, all differences were caused by different sign conventions between nxspe and par files. 
</p>
<p>
to avoid any confusions, mantid will use its current convention event if par file is provided as data source. 
</p>
<p>
the changes is trivial so testing easy to do through code review. 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="8488.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-26T19%3A36%3A37Z&amp;precision=second" title="2013-11-26T19:36:37Z in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="8488.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-26T19%3A40%3A19Z&amp;precision=second" title="2013-11-26T19:40:19Z in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8488.html" title="defect: ConvertToMD does not produces correct image any more (closed: fixed)">#8488</a> should fix unit test
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/c35bd1bc26603f9efd7eadb8c66ff281b467a3f1" title="c35bd1bc26603f9efd7eadb8c66ff281b467a3f1">c35bd1bc26603f9efd7eadb8c66ff281b467a3f1</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="8488.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-27T18%3A10%3A11Z&amp;precision=second" title="2013-11-27T18:10:11Z in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8488.html" title="defect: ConvertToMD does not produces correct image any more (closed: fixed)">#8488</a> should fix it.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/de464df6fa75053df8af83fa0e960a44004326ef" title="de464df6fa75053df8af83fa0e960a44004326ef">de464df6fa75053df8af83fa0e960a44004326ef</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="8488.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-27T19%3A00%3A29Z&amp;precision=second" title="2013-11-27T19:00:29Z in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8488.html" title="defect: ConvertToMD does not produces correct image any more (closed: fixed)">#8488</a> should fix unit test
</p>
<p>
but some thinking on what is actually happens in rings  is needed
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/f071fa104c9a76d5ae7882ea76229c8021d7b760" title="f071fa104c9a76d5ae7882ea76229c8021d7b760">f071fa104c9a76d5ae7882ea76229c8021d7b760</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="8488.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-28T09%3A40%3A28Z&amp;precision=second" title="2013-11-28T09:40:28Z in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8488.html" title="defect: ConvertToMD does not produces correct image any more (closed: fixed)">#8488</a> final remarks
</p>
<p>
the minor one. Apparently all looks right.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/16ab04d4adc204d623b7d176a960a2b9e3f4740c" title="16ab04d4adc204d623b7d176a960a2b9e3f4740c">16ab04d4adc204d623b7d176a960a2b9e3f4740c</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="8488.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-28T09%3A59%3A33Z&amp;precision=second" title="2013-11-28T09:59:33Z in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8488.html" title="defect: ConvertToMD does not produces correct image any more (closed: fixed)">#8488</a> cpp check false positive suppressed
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/185eaef2666bd8e645a2cee8c32cc4823bad1976" title="185eaef2666bd8e645a2cee8c32cc4823bad1976">185eaef2666bd8e645a2cee8c32cc4823bad1976</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="8488.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-11-28T10%3A15%3A53Z&amp;precision=second" title="2013-11-28T10:15:53Z in Timeline">7 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
There were not one but two issues here. 
</p>
<p>
One with the opposite sign of the azimuthal angle in external ascii par file wrt. the one used anywhere in mantid and another one -- invalid average detectors angular size for the situation when detector's angle range passes through -Pi to Pi (due to simple summation/average this would give 0 instead of +Pi or -Pi which it should be)
</p>
<p>
Easiest way to test this is to reduce and saveNXSPE for ISIS inelastic instruments (with 4 to 1 internal map) and check if Mslice image using detectors from nxspe is equivalent to the image obtained using phx file. (issue 2) and in horace, image produced without par file is equivalent to the image, produced with par file (possible only with latest horace). I did that and it works. 
</p>
<p>
If tester is unfamiliar with the reduction and above mentioned programs, code review would allow to check if the changes address the issues mentioned above. 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="8488.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-14T04%3A24%3A04Z&amp;precision=second" title="2014-01-14T04:24:04Z in Timeline">7 years</a> ago by Andrei Savici
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Andrei Savici</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="8488.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-15T20%3A42%3A00Z&amp;precision=second" title="2014-01-15T20:42:00Z in Timeline">7 years</a> ago by Andrei Savici
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/bugfix/8488_horace_ne_manitd'
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/35088428256a40b13969d6386135572341c6192e"><span class="icon">​</span>35088428256a40b13969d6386135572341c6192e</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="8488.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-15T20%3A43%3A27Z&amp;precision=second" title="2014-01-15T20:43:27Z in Timeline">7 years</a> ago by Andrei Savici
                </h3>
                
    <div class="comment searchable">
      
      <p>
Tested with some HYSPEC data. Everything seems fine
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="8488.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-26T10%3A00%3A54Z&amp;precision=second" title="2014-11-26T10:00:54Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>10637</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="8488.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-27T14%3A23%3A25Z&amp;precision=second" title="2014-11-27T14:23:25Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>10637</em> removed
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="8488.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A38%3A48%2B01%3A00&amp;precision=second" title="2015-06-04T02:38:48+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/9332"><span class="icon">​</span>9332</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8488?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8488?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8488?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>