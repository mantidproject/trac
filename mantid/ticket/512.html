<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #512 (Bug in FindPeaks/TableWorkspace)
     â€“ Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="511.html" title="Ticket #511" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/512?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/512?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/512?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="513.html" title="Ticket #513" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 512, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="511.html" title="Ticket #511">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="513.html" title="Ticket #513">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="512.html">Ticket #512</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2009-03-17T12%3A24%3A34Z&amp;precision=second" title="2009-03-17T12:24:34Z in Timeline">12 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-03T21%3A54%3A11%2B01%3A00&amp;precision=second" title="2015-06-03T21:54:11+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Bug in FindPeaks/TableWorkspace</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Russell+Taylor">Russell Taylor</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Roman+Tolchenov">Roman Tolchenov</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Iteration&#32;17.html">Iteration 17</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component"></a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
FindPeaks crashes at the point where it first tries to insert a peak into the TableWorkspace for the results (line 398). The actual crash happens at line 78 of TableRow.h. The curious thing about this is that StripPeaks runs fine, even though the first thing that does is call FindPeaks as a subalgorithm.
</p>
<p>
Here's the output of gdb:
</p>
<p>
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x42557950 (LWP 15791)]
0x00007f119773fc62 in shared_ptr (this=0x42556480) at /usr/include/boost/shared_ptr.hpp:148
148     {
Current language:  auto; currently c++
(gdb) bt
<a class="missing ticket">#0</a>  0x00007f119773fc62 in shared_ptr (this=0x42556480) at /usr/include/boost/shared_ptr.hpp:148
<a class="closed ticket" href="1.html" title="defect: Create initial subversion directories (closed: fixed)">#1</a>  0x00007f11977420db in Mantid::DataObjects::TableRow::operator&lt;&lt; &lt;int&gt; (this=0x425566b0, t=@0x4255669c)
</p>
<blockquote>
<p>
at DataObjects/inc/MantidDataObjects/TableRow.h:78
</p>
</blockquote>
<p>
<a class="closed ticket" href="2.html" title="task: Understand CMT (closed: wontfix)">#2</a>  0x00007f119773c1aa in Mantid::Algorithms::FindPeaks::fitPeak (this=0x1b23710, input=@0x42556ab0, spectrum=1,
</p>
<blockquote>
<p>
i0=3222, i4=3222) at Algorithms/src/FindPeaks.cpp:398
</p>
</blockquote>
<p>
<a class="closed ticket" href="3.html" title="enhancement: GAUDI: Simple Text File Converter (closed: fixed)">#3</a>  0x00007f119773e21f in Mantid::Algorithms::FindPeaks::exec (this=0x1b23710) at Algorithms/src/FindPeaks.cpp:207
<a class="closed ticket" href="4.html" title="enhancement: GAUDI: Raw File Converter (closed: fixed)">#4</a>  0x00007f11abdbf52e in Mantid::API::Algorithm::execute (this=0x1b23710) at API/src/Algorithm.cpp:124
<a class="closed ticket" href="5.html" title="enhancement: GAUDI: Raw file data object (closed: fixed)">#5</a>  0x00007f11abdbdc75 in Mantid::API::Algorithm::executeAsyncImpl (this=0x1b23710) at API/src/Algorithm.cpp:449
<a class="closed ticket" href="6.html" title="enhancement: GAUDI: Integration Algrorithm (closed: fixed)">#6</a>  0x00007f11abdc2015 in Poco::ActiveRunnable&lt;bool, int, Mantid::API::Algorithm&gt;::run (this=0x1b23910)
</p>
<blockquote>
<p>
at /usr/include/Poco/ActiveRunnable.h:85
</p>
</blockquote>
<p>
<a class="closed ticket" href="7.html" title="enhancement: LOQ: Integration Algorithm (closed: fixed)">#7</a>  0x00007f11aaf470d0 in Poco::PooledThread::run () from /usr/lib/libPocoFoundation.so.5
<a class="closed ticket" href="8.html" title="enhancement: GAUDI: Derived Results Converter (closed: wontfix)">#8</a>  0x00007f11aaf4293e in Poco::ThreadImpl::entry () from /usr/lib/libPocoFoundation.so.5
<a class="closed ticket" href="9.html" title="task: Select and publish a suitable test set of RAW files (closed: fixed)">#9</a>  0x00007f11aa6d13ea in start_thread () from /lib/libpthread.so.0
<a class="closed ticket" href="10.html" title="task: User Requirements (closed: fixed)">#10</a> 0x00007f11a78c6c6d in clone () from /lib/libc.so.6
<a class="closed ticket" href="11.html" title="task: Software Requirements Document (closed: fixed)">#11</a> 0x0000000000000000 in ?? ()
(gdb) f 1
<a class="closed ticket" href="1.html" title="defect: Create initial subversion directories (closed: fixed)">#1</a>  0x00007f11977420db in Mantid::DataObjects::TableRow::operator&lt;&lt; &lt;int&gt; (this=0x425566b0, t=@0x4255669c)
</p>
<blockquote>
<p>
at DataObjects/inc/MantidDataObjects/TableRow.h:78
</p>
</blockquote>
<p>
78              TableColumn_ptr&lt;T&gt; c = m_columns[m_col];
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="512.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2009-04-16T13%3A55%3A52%2B01%3A00&amp;precision=second" title="2009-04-16T13:55:52+01:00 in Timeline">11 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Owner</strong>
        set to <em>Roman Tolchenov</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="512.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2009-04-16T16%3A41%3A44%2B01%3A00&amp;precision=second" title="2009-04-16T16:41:44+01:00 in Timeline">11 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Iteration 16</em> to <em>Iteration 17</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Batch move of tickets to Iteration 17
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="512.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2009-04-17T09%3A36%3A18%2B01%3A00&amp;precision=second" title="2009-04-17T09:36:18+01:00 in Timeline">11 years</a> ago by Russell Taylor
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Fixed in check-in <a class="closed ticket" href="2343.html" title="enhancement: System for generating main.cpp for developer testing (closed: fixed)">#2343</a>.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="512.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-03T21%3A54%3A11%2B01%3A00&amp;precision=second" title="2015-06-03T21:54:11+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/1360"><span class="icon">â€‹</span>1360</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/512?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/512?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/512?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>