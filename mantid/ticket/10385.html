<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #10385 (Profile LoadNexus Slow for group workspaces)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="10384.html" title="Ticket #10384" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10385?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10385?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10385?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="10386.html" title="Ticket #10386" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script><script type="text/javascript" src="../chrome/mastertickets/disable_resolve.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 10385, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="10384.html" title="Ticket #10384">Previous Ticket</a></span></li><li><span><a class="next" href="10386.html" title="Ticket #10386">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/10385.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="10385.html">Ticket #10385</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-17T16%3A37%3A44%2B01%3A00&amp;precision=second" title="2014-10-17T16:37:44+01:00 in Timeline">6 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T03%3A56%3A25%2B01%3A00&amp;precision=second" title="2015-06-04T03:56:25+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Profile LoadNexus Slow for group workspaces</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Owen+Arnold">Owen Arnold</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Owen+Arnold">Owen Arnold</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;3.3.html">Release 3.3</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Reflectometry">Reflectometry</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span><a class="verify ticket" href="9848.html" title="Multiperiod reflectometry processing">#9848</a></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span><a class="assigned ticket" href="10500.html" title="Data vs Instrument Load Times">#10500</a></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Pete Peterson
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Saving of large group workspaces is much faster now. Load times are still poor. Profiling should reveal why.
</p>

    </div>
  </div>
</div>
          
    <div id="attachments">
        <h2 class="foldable">Attachments</h2>
        <div>
          <dl class="attachments">
              <dt>
    <a href="../attachment/ticket/10385/Screen&#32;Shot&#32;2014-10-20&#32;at&#32;13.09.48.png.html" title="View attachment">Screen Shot 2014-10-20 at 13.09.48.png</a><a href="../raw-attachment/ticket/10385/Screen&#32;Shot&#32;2014-10-20&#32;at&#32;13.09.48.png" class="trac-rawlink" title="Download">​</a>
       (<span title="178711 bytes">174.5 KB</span>) -
      added by <em>Owen Arnold</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-20T13%3A10%3A18%2B01%3A00&amp;precision=second" title="2014-10-20T13:10:18+01:00 in Timeline">6 years</a> ago.
  </dt>
              <dt>
    <a href="../attachment/ticket/10385/Screen&#32;Shot&#32;2014-10-23&#32;at&#32;16.54.01.png.html" title="View attachment">Screen Shot 2014-10-23 at 16.54.01.png</a><a href="../raw-attachment/ticket/10385/Screen&#32;Shot&#32;2014-10-23&#32;at&#32;16.54.01.png" class="trac-rawlink" title="Download">​</a>
       (<span title="123121 bytes">120.2 KB</span>) -
      added by <em>Owen Arnold</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-23T16%3A54%3A48%2B01%3A00&amp;precision=second" title="2014-10-23T16:54:48+01:00 in Timeline">6 years</a> ago.
  </dt>
              <dd>
                updated profiler results
              </dd>
              <dt>
    <a href="../attachment/ticket/10385/profiletimings.py.html" title="View attachment">profiletimings.py</a><a href="../raw-attachment/ticket/10385/profiletimings.py" class="trac-rawlink" title="Download">​</a>
       (<span title="357 bytes">357 bytes</span>) -
      added by <em>Owen Arnold</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-03T21%3A22%3A43Z&amp;precision=second" title="2014-11-03T21:22:43Z in Timeline">6 years</a> ago.
  </dt>
          </dl>
          
        </div>
    </div>

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="10385.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-17T16%3A37%3A49%2B01%3A00&amp;precision=second" title="2014-10-17T16:37:49+01:00 in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>assigned</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="10385.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-17T16%3A41%3A56%2B01%3A00&amp;precision=second" title="2014-10-17T16:41:56+01:00 in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
Might be interesting to use the OSX instrument tools given that I know the load times are really bad on that platform. INTER00027729 is an offending run.
</p>
<ul><li>Load INTER00027729.raw (fast)
</li><li>Save it via SaveNexus (relatively fast)
</li><li>Load it LoadNexus (really slow)
</li></ul>
    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-20T13%3A11%3A52%2B01%3A00&amp;precision=second" title="2014-10-20T13:11:52+01:00 in Timeline">6 years</a> ago
                      by Owen Arnold
                    (<a href="https://trac.mantidproject.org/mantid/ticket/10385?cversion=0&amp;cnum_hist=2#comment:2">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/10385?action=comment-diff&amp;cnum=2&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="10385.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-20T13%3A10%3A01%2B01%3A00&amp;precision=second" title="2014-10-20T13:10:01+01:00 in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>assigned</em> to <em>inprogress</em>
    </li><li>
      <strong>Summary</strong>
        changed from <em>Profile LoadISISNexus2 Slow for group workspaces</em> to <em>Profile LoadNexus Slow for group workspaces</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-20T13%3A10%3A18%2B01%3A00&amp;precision=second" title="2014-10-20T13:10:18+01:00 in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/10385/Screen&#32;Shot&#32;2014-10-20&#32;at&#32;13.09.48.png.html"><em>Screen Shot 2014-10-20 at 13.09.48.png</em></a><a href="../raw-attachment/ticket/10385/Screen&#32;Shot&#32;2014-10-20&#32;at&#32;13.09.48.png" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="10385.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-20T13%3A11%3A09%2B01%3A00&amp;precision=second" title="2014-10-20T13:11:09+01:00 in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
Attached profiler results for Load of INTER00027731.raw, saved via SaveNexus and then loaded.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="10385.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-20T14%3A22%3A37%2B01%3A00&amp;precision=second" title="2014-10-20T14:22:37+01:00 in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
As a course-grain timing comparator, LoadNexus on INTER <strong>27731</strong> currently <strong>takes 5.94</strong> to load all 51 periods on a release build on my macbook pro
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="10385.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-23T11%3A33%3A27%2B01%3A00&amp;precision=second" title="2014-10-23T11:33:27+01:00 in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Extract spectrum info to object.
</p>
<p>
This is the first step towards reusing the same spectrum information rather than fetching it renewed each time.
One caveat with this is that you will HAVE to be sure that all workspaces in the group are equivalent in terms of instrument detector mappings etc.
What i intend to do next is:
</p>
<p>
1) For workspaces that look to relate to multiperiod group workspaces, default to reuse the spectrum-detectector mappings, once obtained on a lazy basis.
2) Put a boolean property with value in place (which defaults to true) called "PredictiveInstrumentLoading". If false, we would go back to old behaviour.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/1978e1484b60c48538484ca46450103e829bbb7c" title="1978e1484b60c48538484ca46450103e829bbb7c">1978e1484b60c48538484ca46450103e829bbb7c</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="10385.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-23T15%3A39%3A31%2B01%3A00&amp;precision=second" title="2014-10-23T15:39:31+01:00 in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Naming issue root problem.
</p>
<p>
There is a naming issue here, which is actually the root cause of the problem! The query that was being performed retrieved the number of workspace entries, NOT the number of periods.
Going forward. If the number of periods exactly matches the number of workspace entries, we have a multiperiod group workspace, and can happily apply the optimisations we want.
</p>
<p>
Next step will be to actually extract the nperiods. To do that we need to try to fetch it out of the logs for The first entry.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/fdf6281af77bfb069315c3fae6937bad26e09bab" title="fdf6281af77bfb069315c3fae6937bad26e09bab">fdf6281af77bfb069315c3fae6937bad26e09bab</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="10385.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-23T15%3A39%3A31%2B01%3A00&amp;precision=second" title="2014-10-23T15:39:31+01:00 in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Query default property.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/d0ba5d5f93dfb7b1c20474eece8952f88099963b" title="d0ba5d5f93dfb7b1c20474eece8952f88099963b">d0ba5d5f93dfb7b1c20474eece8952f88099963b</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="10385.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-23T15%3A39%3A31%2B01%3A00&amp;precision=second" title="2014-10-23T15:39:31+01:00 in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Multiperiod query.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8a0c59958fdc0b0f05ecfb616f273b34c6764aa9" title="8a0c59958fdc0b0f05ecfb616f273b34c6764aa9">8a0c59958fdc0b0f05ecfb616f273b34c6764aa9</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="10385.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-23T15%3A39%3A31%2B01%3A00&amp;precision=second" title="2014-10-23T15:39:31+01:00 in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Reuse the SpecInfo on multiperiod groups.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/61959e5705be8423f54eb8a77034d8e739880dfb" title="61959e5705be8423f54eb8a77034d8e739880dfb">61959e5705be8423f54eb8a77034d8e739880dfb</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="10385.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-23T16%3A40%3A05%2B01%3A00&amp;precision=second" title="2014-10-23T16:40:05+01:00 in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
As a course-grain timing comparator, LoadNexus on INTER <strong>27731</strong> currently <strong>NOW takes 5.10</strong> to load all 51 periods on a release build on my macbook pro. I'll need to tackle the other big areas highlighed by the profiler in order to achieve better results, I suspect I've moved the bottleneck now. I'm going to re-profile to see what effect this sort of strategy has had.
</p>

    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-23T16%3A54%3A48%2B01%3A00&amp;precision=second" title="2014-10-23T16:54:48+01:00 in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/10385/Screen&#32;Shot&#32;2014-10-23&#32;at&#32;16.54.01.png.html"><em>Screen Shot 2014-10-23 at 16.54.01.png</em></a><a href="../raw-attachment/ticket/10385/Screen&#32;Shot&#32;2014-10-23&#32;at&#32;16.54.01.png" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
updated profiler results
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="10385.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-23T16%3A59%3A31%2B01%3A00&amp;precision=second" title="2014-10-23T16:59:31+01:00 in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
Updated profiler results, it now looks like the major problem has shifted to the number of calls to NXDataSet::open (see cycle estimation results). We now make +1 calls to loadEntry, so in my profiler example, we have 468 calls to the offending function, that's <strong>9 calls per workspace entry</strong>. My next step will be to tackle this and reduce the number or redundant calls. Noting the success above, the multiperiod-only caching technique seems to be a good route to do this.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="10385.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-28T18%3A00%3A08Z&amp;precision=second" title="2014-10-28T18:00:08Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
My next step is going to be to try the following:
</p>
<ol><li>For multiperiod runs, copy process the first load as per normal, then, clone the workspace each time, set dataY, dataE and load the logs only.
</li><li>Check the above as a proof of concept
</li><li>Refactor the above
</li><li>Add a property which would default to the old behaviour. Set this property to be false by default.
</li></ol>
    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="10385.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-29T11%3A20%3A05Z&amp;precision=second" title="2014-10-29T11:20:05Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Try to use clone and write technique.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/9a677316ce4294e96ec8a2c793c9d9090dd13be8" title="9a677316ce4294e96ec8a2c793c9d9090dd13be8">9a677316ce4294e96ec8a2c793c9d9090dd13be8</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="10385.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-29T16%3A26%3A55Z&amp;precision=second" title="2014-10-29T16:26:55Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Test file is twice as fast now.
</p>
<p>
There are lots of TODOs still to resolve. We also need to add tests for this sort of multiperiod loading.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ccc1c235df1cb2d613326730fd9c0421f0751754" title="ccc1c235df1cb2d613326730fd9c0421f0751754">ccc1c235df1cb2d613326730fd9c0421f0751754</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="10385.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-29T17%3A33%3A04Z&amp;precision=second" title="2014-10-29T17:33:04Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Add failing test.
</p>
<p>
We are not currently handling log extraction properly, which is why the test is failing.
</p>
<p>
File size is just over the threshold, but shouldn't be a problem. I've tried to trim it down as much as possible.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/757b0046c62a550e10f005d04fa2284fa4f18286" title="757b0046c62a550e10f005d04fa2284fa4f18286">757b0046c62a550e10f005d04fa2284fa4f18286</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="10385.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T09%3A31%3A55Z&amp;precision=second" title="2014-10-31T09:31:55Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Remove log values
</p>
<p>
This fixes the regression test. We clear the logs off the temporary workspace, that way we don't have to do a similar thing in the loop, and we avoid copying them over each time. This is not a fully formed solution, but it's a start.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ab1da07fcd610910084b5c5e6ee641efddba9322" title="ab1da07fcd610910084b5c5e6ee641efddba9322">ab1da07fcd610910084b5c5e6ee641efddba9322</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="10385.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T09%3A31%3A55Z&amp;precision=second" title="2014-10-31T09:31:55Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Reporting added and extra property.
</p>
<p>
Also better robustness around workspace type.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8e03062228667837665c57b4ef45c5f95f82ef35" title="8e03062228667837665c57b4ef45c5f95f82ef35">8e03062228667837665c57b4ef45c5f95f82ef35</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="10385.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Extract spectrum info to object.
</p>
<p>
This is the first step towards reusing the same spectrum information rather than fetching it renewed each time.
One caveat with this is that you will HAVE to be sure that all workspaces in the group are equivalent in terms of instrument detector mappings etc.
What i intend to do next is:
</p>
<p>
1) For workspaces that look to relate to multiperiod group workspaces, default to reuse the spectrum-detectector mappings, once obtained on a lazy basis.
2) Put a boolean property with value in place (which defaults to true) called "PredictiveInstrumentLoading". If false, we would go back to old behaviour.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/1978e1484b60c48538484ca46450103e829bbb7c" title="1978e1484b60c48538484ca46450103e829bbb7c">1978e1484b60c48538484ca46450103e829bbb7c</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="10385.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Naming issue root problem.
</p>
<p>
There is a naming issue here, which is actually the root cause of the problem! The query that was being performed retrieved the number of workspace entries, NOT the number of periods.
Going forward. If the number of periods exactly matches the number of workspace entries, we have a multiperiod group workspace, and can happily apply the optimisations we want.
</p>
<p>
Next step will be to actually extract the nperiods. To do that we need to try to fetch it out of the logs for The first entry.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/fdf6281af77bfb069315c3fae6937bad26e09bab" title="fdf6281af77bfb069315c3fae6937bad26e09bab">fdf6281af77bfb069315c3fae6937bad26e09bab</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="10385.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Query default property.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/d0ba5d5f93dfb7b1c20474eece8952f88099963b" title="d0ba5d5f93dfb7b1c20474eece8952f88099963b">d0ba5d5f93dfb7b1c20474eece8952f88099963b</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="10385.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Multiperiod query.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8a0c59958fdc0b0f05ecfb616f273b34c6764aa9" title="8a0c59958fdc0b0f05ecfb616f273b34c6764aa9">8a0c59958fdc0b0f05ecfb616f273b34c6764aa9</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-23">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:23" class="cnum">
      <a href="10385.html#comment:23">comment:23</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Reuse the SpecInfo on multiperiod groups.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/61959e5705be8423f54eb8a77034d8e739880dfb" title="61959e5705be8423f54eb8a77034d8e739880dfb">61959e5705be8423f54eb8a77034d8e739880dfb</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-24">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:24" class="cnum">
      <a href="10385.html#comment:24">comment:24</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Try to use clone and write technique.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/9a677316ce4294e96ec8a2c793c9d9090dd13be8" title="9a677316ce4294e96ec8a2c793c9d9090dd13be8">9a677316ce4294e96ec8a2c793c9d9090dd13be8</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-25">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:25" class="cnum">
      <a href="10385.html#comment:25">comment:25</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Test file is twice as fast now.
</p>
<p>
There are lots of TODOs still to resolve. We also need to add tests for this sort of multiperiod loading.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ccc1c235df1cb2d613326730fd9c0421f0751754" title="ccc1c235df1cb2d613326730fd9c0421f0751754">ccc1c235df1cb2d613326730fd9c0421f0751754</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-26">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:26" class="cnum">
      <a href="10385.html#comment:26">comment:26</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Add failing test.
</p>
<p>
We are not currently handling log extraction properly, which is why the test is failing.
</p>
<p>
File size is just over the threshold, but shouldn't be a problem. I've tried to trim it down as much as possible.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/757b0046c62a550e10f005d04fa2284fa4f18286" title="757b0046c62a550e10f005d04fa2284fa4f18286">757b0046c62a550e10f005d04fa2284fa4f18286</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-27">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:27" class="cnum">
      <a href="10385.html#comment:27">comment:27</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Remove log values
</p>
<p>
This fixes the regression test. We clear the logs off the temporary workspace, that way we don't have to do a similar thing in the loop, and we avoid copying them over each time. This is not a fully formed solution, but it's a start.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ab1da07fcd610910084b5c5e6ee641efddba9322" title="ab1da07fcd610910084b5c5e6ee641efddba9322">ab1da07fcd610910084b5c5e6ee641efddba9322</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-28">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:28" class="cnum">
      <a href="10385.html#comment:28">comment:28</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Reporting added and extra property.
</p>
<p>
Also better robustness around workspace type.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8e03062228667837665c57b4ef45c5f95f82ef35" title="8e03062228667837665c57b4ef45c5f95f82ef35">8e03062228667837665c57b4ef45c5f95f82ef35</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-29">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:29" class="cnum">
      <a href="10385.html#comment:29">comment:29</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a> Refactor new functionality to method.
</p>
<p>
Should read better now, although the entire algorithm is still a mess.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/aba603d5e0bef0c6a3c3babfef7edc0f46e955d8" title="aba603d5e0bef0c6a3c3babfef7edc0f46e955d8">aba603d5e0bef0c6a3c3babfef7edc0f46e955d8</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-30">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:30" class="cnum">
      <a href="10385.html#comment:30">comment:30</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Remove instrument info caching
</p>
<p>
This does result in a speed up, but the caching is being bypassed at the moment since our strategy is to clone and overwrite. I've removed the caching code as part of the clean up, but I've kept the SpecInfo type around as it makes the usage clearer, and does not result in a performance penalty.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/d88bbe4abf5cdb342d58b79897e75486c14d9ce7" title="d88bbe4abf5cdb342d58b79897e75486c14d9ce7">d88bbe4abf5cdb342d58b79897e75486c14d9ce7</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-31">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:31" class="cnum">
      <a href="10385.html#comment:31">comment:31</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Minor changes.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/5b18d28967654bbbfa5f76fd32b1a2245977b7b1" title="5b18d28967654bbbfa5f76fd32b1a2245977b7b1">5b18d28967654bbbfa5f76fd32b1a2245977b7b1</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-32">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:32" class="cnum">
      <a href="10385.html#comment:32">comment:32</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Put error identifer code in place.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/fb70f730ed01cb46d4a4e064fb989b95ce7e6aed" title="fb70f730ed01cb46d4a4e064fb989b95ce7e6aed">fb70f730ed01cb46d4a4e064fb989b95ce7e6aed</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-33">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:33" class="cnum">
      <a href="10385.html#comment:33">comment:33</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T12%3A59%3A32Z&amp;precision=second" title="2014-10-31T12:59:32Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a> Extend tests.
</p>
<p>
Extend tests. Do not process spectrum lists.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ce10e438130d7a0d0aa3684f6ed5c90b9d9b5d0f" title="ce10e438130d7a0d0aa3684f6ed5c90b9d9b5d0f">ce10e438130d7a0d0aa3684f6ed5c90b9d9b5d0f</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-34">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:34" class="cnum">
      <a href="10385.html#comment:34">comment:34</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T13%3A01%3A36Z&amp;precision=second" title="2014-10-31T13:01:36Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
This is being verified as <a class="ext-link" href="https://github.com/mantidproject/mantid/pull/56"><span class="icon">​</span>pull request #56</a>.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-35">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:35" class="cnum">
      <a href="10385.html#comment:35">comment:35</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T16%3A23%3A23Z&amp;precision=second" title="2014-10-31T16:23:23Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Fix warnings.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/e084e3b8da4a930d627b8561edfde75d0a401df6" title="e084e3b8da4a930d627b8561edfde75d0a401df6">e084e3b8da4a930d627b8561edfde75d0a401df6</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-36">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:36" class="cnum">
      <a href="10385.html#comment:36">comment:36</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-03T09%3A36%3A08Z&amp;precision=second" title="2014-11-03T09:36:08Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
Tester: 
</p>
<p>
1) The most important thing to verify is that the load/save unit tests are passing and that the system tests loadlotsoffiles have passed with these changes.
</p>
<p>
2) Secondly, I removed a nxs data open which will affect workspaces with fractional area. So try, running <a class="ext-link" href="http://docs.mantidproject.org/nightly/algorithms/SofQW3-v1.html"><span class="icon">​</span>http://docs.mantidproject.org/nightly/algorithms/SofQW3-v1.html</a>, saving the results using SaveNexus, and reloading them using LoadProcessedNexus. The loaded workspaces should be have the fractional area information. 
</p>
<p>
3) The attached python script would run slowly prior to these changes. It should now report faster load times.
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-03T21%3A24%3A12Z&amp;precision=second" title="2014-11-03T21:24:12Z in Timeline">6 years</a> ago
                      by Owen Arnold
                    (<a href="https://trac.mantidproject.org/mantid/ticket/10385?cversion=0&amp;cnum_hist=36#comment:36">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/10385?action=comment-diff&amp;cnum=36&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-37">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:37" class="cnum">
      <a href="10385.html#comment:37">comment:37</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-03T11%3A25%3A10Z&amp;precision=second" title="2014-11-03T11:25:10Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10385.html" title="Profile LoadNexus Slow for group workspaces (closed: fixed)">#10385</a>. Fix cpp check issue.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/679c839829669c9252c7d0ea73caef984f968287" title="679c839829669c9252c7d0ea73caef984f968287">679c839829669c9252c7d0ea73caef984f968287</a>
</p>

    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-03T21%3A22%3A43Z&amp;precision=second" title="2014-11-03T21:22:43Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/10385/profiletimings.py.html"><em>profiletimings.py</em></a><a href="../raw-attachment/ticket/10385/profiletimings.py" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-38">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:38" class="cnum">
      <a href="10385.html#comment:38">comment:38</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-05T11%3A56%3A50Z&amp;precision=second" title="2014-11-05T11:56:50Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>10500</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-39">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:39" class="cnum">
      <a href="10385.html#comment:39">comment:39</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-19T21%3A27%3A34Z&amp;precision=second" title="2014-11-19T21:27:34Z in Timeline">6 years</a> ago by Pete Peterson
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Pete Peterson</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-40">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:40" class="cnum">
      <a href="10385.html#comment:40">comment:40</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-20T15%3A32%3A51Z&amp;precision=second" title="2014-11-20T15:32:51Z in Timeline">6 years</a> ago by Pete Peterson
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/feature/10385_loadnexus_speed'
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/a8fe5a33c2cfb8321d62a8c15b09e2170cae1d52"><span class="icon">​</span>a8fe5a33c2cfb8321d62a8c15b09e2170cae1d52</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-41">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:41" class="cnum">
      <a href="10385.html#comment:41">comment:41</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T03%3A56%3A25%2B01%3A00&amp;precision=second" title="2015-06-04T03:56:25+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/11227"><span class="icon">​</span>11227</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10385?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10385?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10385?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>