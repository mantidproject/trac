<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #10454 (Indirect Bayes and Data Analysis should work at any facility)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="10453.html" title="Ticket #10453" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10454?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10454?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10454?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="10455.html" title="Ticket #10455" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 10454, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="10453.html" title="Ticket #10453">Previous Ticket</a></span></li><li><span><a class="next" href="10455.html" title="Ticket #10455">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/10454.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="10454.html">Ticket #10454</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-29T13%3A44%3A42Z&amp;precision=second" title="2014-10-29T13:44:42Z in Timeline">6 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T03%3A58%3A12%2B01%3A00&amp;precision=second" title="2015-06-04T03:58:12+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Indirect Bayes and Data Analysis should work at any facility</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Dan+Nixon">Dan Nixon</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Dan+Nixon">Dan Nixon</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;3.3.html">Release 3.3</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Indirect+Inelastic">Indirect Inelastic</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              spencer.howells@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span><a class="closed ticket" href="10094.html" title="Support diffraction corrections">#10094</a></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Lottie Greenwood
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
      <span class="lastmod" title="2014-10-29 14:12:43.961902+00:00">
        (last modified by Dan Nixon)
        (<a href="https://trac.mantidproject.org/mantid/ticket/10454?action=diff&amp;version=2">diff</a>)
      </span>
    </h3>
    <div class="searchable">
      <p>
Currently there are a few restrictions used in these workflows that mean they cannot be used unless the data comes from ISIS instruments.
</p>
<p>
This should also enable the use of S(Q,w) data in these routines.
</p>
<p>
The notable issues so far are:
</p>
<ul><li>Bayes &gt; Quasi
</li><li>Data Analysis &gt; ConvFit
</li><li>Data Analysis &gt; Fury
</li></ul><p>
This block of code causes problems in Bayes:
</p>
<pre class="wiki">if facility == 'ISIS':
  CheckAnalysers(samWS,resWS,Verbose)
  efix = getEfixed(samWS)
  theta,Q = GetThetaQ(samWS)
</pre><p>
And GetThetaQ assumes that a workspace histogram axis is in specta number (and performs a conversion to Q, which is not needed for a SQw workspace):
</p>
<pre class="wiki">def GetThetaQ(ws):
  nhist = mtd[ws].getNumberHistograms() # get no. of histograms/groups
  efixed = getEfixed(ws)
  wavelas = math.sqrt(81.787/efixed) # elastic wavelength
  k0 = 4.0*math.pi/wavelas
  theta = np.array(GetWSangles(ws))
  Q = k0 * np.sin(0.5 * np.radians(theta))
  return theta, Q
</pre><p>
GetThetaQ should be modified so that it checks the type of axis and for a workspace with a numerical axis in elastic Q will convert the Q back to angles and for a an axis in spectra number convert to elastic Q.
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="10454.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-29T13%3A44%3A46Z&amp;precision=second" title="2014-10-29T13:44:46Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>assigned</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="10454.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-29T14%3A12%3A43Z&amp;precision=second" title="2014-10-29T14:12:43Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/10454?action=diff&amp;version=2">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="10454.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T09%3A18%3A59Z&amp;precision=second" title="2014-10-31T09:18:59Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>assigned</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Add code to get Q and theta for spec axis in Q
</p>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/26a974efb0e2b9d79be40a92d7652008711cd6ce" title="26a974efb0e2b9d79be40a92d7652008711cd6ce">26a974efb0e2b9d79be40a92d7652008711cd6ce</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="10454.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T09%3A30%3A53Z&amp;precision=second" title="2014-10-31T09:30:53Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
Allow SQw browsing for resolution
</p>
<p>
Needed for sites such as SNS who use Sqw for most interfaces
</p>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b2485cc0ad760dcae944dee22c0db20d7ea33f29" title="b2485cc0ad760dcae944dee22c0db20d7ea33f29">b2485cc0ad760dcae944dee22c0db20d7ea33f29</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="10454.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T11%3A31%3A04Z&amp;precision=second" title="2014-10-31T11:31:04Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
Fixed a couple of issues with Fury with BASIS data
</p>
<p>
This allows the resolution parameter to be either part fo the analyser
component (i.e. like ISIS instruments) or part of the instrument (which
would be easier to add to SNS instruments)
</p>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/7215c4aba84bf77f6c13fbc04e9760fa974cc8ab" title="7215c4aba84bf77f6c13fbc04e9760fa974cc8ab">7215c4aba84bf77f6c13fbc04e9760fa974cc8ab</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="10454.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-07T10%3A56%3A20Z&amp;precision=second" title="2014-11-07T10:56:20Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
Allow calc corrections with SQw
</p>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/eba11307840a5b81c5b3802967c8b1bf5d6dec79" title="eba11307840a5b81c5b3802967c8b1bf5d6dec79">eba11307840a5b81c5b3802967c8b1bf5d6dec79</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="10454.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-07T13%3A45%3A56Z&amp;precision=second" title="2014-11-07T13:45:56Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge branch 'master' into bugfix/10454_idr_bayes_functional_at_any_facility
</p>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/f7e4e48e087efe9f634258c0e5379a16b7442f1a" title="f7e4e48e087efe9f634258c0e5379a16b7442f1a">f7e4e48e087efe9f634258c0e5379a16b7442f1a</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="10454.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-07T13%3A47%3A27Z&amp;precision=second" title="2014-11-07T13:47:27Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
ConvFit get param file from inst directory
</p>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/898b5e9e369aa31324b95145ac9c84350680c509" title="898b5e9e369aa31324b95145ac9c84350680c509">898b5e9e369aa31324b95145ac9c84350680c509</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="10454.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-17T15%3A38%3A15Z&amp;precision=second" title="2014-11-17T15:38:15Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Component</strong>
        changed from <em>Framework</em> to <em>Indirect Inelastic</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="10454.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-21T10%3A29%3A58Z&amp;precision=second" title="2014-11-21T10:29:58Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
Enable Sqw browsing for Quasi
</p>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/61ea63327cda3e7e4f35e8ac7c94f9414703459c" title="61ea63327cda3e7e4f35e8ac7c94f9414703459c">61ea63327cda3e7e4f35e8ac7c94f9414703459c</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="10454.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-21T11%3A37%3A02Z&amp;precision=second" title="2014-11-21T11:37:02Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
Add Sqw to other Bayes tabs
</p>
<p>
Restruct to RES where needed
</p>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/2a3d96debdc9d771c9128d1cd60694c69e806ffd" title="2a3d96debdc9d771c9128d1cd60694c69e806ffd">2a3d96debdc9d771c9128d1cd60694c69e806ffd</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="10454.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-21T11%3A46%3A24Z&amp;precision=second" title="2014-11-21T11:46:24Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocked By</strong>
        <em>10094</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Conflicting changes here.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="10454.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-26T12%3A28%3A05Z&amp;precision=second" title="2014-11-26T12:28:05Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge branch 'feature/10094_support_diffraction_corrections' into bugfix/10454_idr_bayes_functional_at_any_facility
</p>
<p>
Conflicts:
</p>
<blockquote>
<p>
Code/Mantid/scripts/Inelastic/IndirectAbsCor.py
</p>
</blockquote>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ce80fbcba1a0149c38c2fe6e89aceefb99cbb5d4" title="ce80fbcba1a0149c38c2fe6e89aceefb99cbb5d4">ce80fbcba1a0149c38c2fe6e89aceefb99cbb5d4</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="10454.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-26T15%3A52%3A39Z&amp;precision=second" title="2014-11-26T15:52:39Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
Support Sqw in Calculate Corrections
</p>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/0884d71ecbbd93c4399f69cb8121906f228ed282" title="0884d71ecbbd93c4399f69cb8121906f228ed282">0884d71ecbbd93c4399f69cb8121906f228ed282</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="10454.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-01T09%3A09%3A08Z&amp;precision=second" title="2014-12-01T09:09:08Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge branch 'master' into bugfix/10454_idr_bayes_functional_at_any_facility
</p>
<p>
Conflicts:
</p>
<blockquote>
<p>
Code/Mantid/MantidQt/CustomInterfaces/src/ConvFit.cpp
</p>
</blockquote>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/a7b273f5fd1c8a4b6d765cfbc0b267d4ef916ca1" title="a7b273f5fd1c8a4b6d765cfbc0b267d4ef916ca1">a7b273f5fd1c8a4b6d765cfbc0b267d4ef916ca1</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="10454.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-01T11%3A12%3A50Z&amp;precision=second" title="2014-12-01T11:12:50Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
Support Sqw of Calc Corr
</p>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/0961f06e76ed52b423a8a3ed1ba2c97d04236d96" title="0961f06e76ed52b423a8a3ed1ba2c97d04236d96">0961f06e76ed52b423a8a3ed1ba2c97d04236d96</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="10454.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-01T16%3A20%3A11Z&amp;precision=second" title="2014-12-01T16:20:11Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
This must be tested on Windows with Mantid built in Release mode.
</p>
<p>
Testing files are on <tt></tt><tt>babylon5/Public/DanNixon/BASIS</tt><tt></tt>, 33207_sqw is the sample/input 33213_sqw is the can/container/vanadium, 33213_res is the resolution.
</p>
<p>
Before starting ensure your facility is set to SNS.
</p>
<p>
There is a lot to test hence I will omit loading the files and executing the tab from the instructions.
</p>
<p>
To test:
</p>
<ul><li>ConvFit
<ul><li>Fit Type: Two Lorentzians
</li><li>Increase FWHM a little and tie peak centers if the fit is bad
</li><li>Run Should give a good fit
</li></ul></li><li>Fury
<ul><li>Set sample binning to 1 (Sqw is already rebinned)
</li><li>Run
</li><li>You may get a warning if the number of resolution bins is less than 5
</li></ul></li><li>FuryFit (optional: the fact Fury works means this must work)
<ul><li>Load what came out of Fury
</li><li>Shift EndX to exclude the garbage at the end of the curve (this garbage is normal)
</li><li>Shift LinearBackground.A0 such that it is close to the curve bottom
</li><li>Run, should give a good fit
</li></ul></li><li>Elwin
<ul><li>Load some files (a selection from the <tt></tt><tt>elastic_scan</tt><tt></tt> folder would be good here)
</li></ul></li><li>MSD Fit (optional: the fact Elwin works means this must work)
<ul><li>Load what came out of Elwin
</li><li>Run, a reasonable fit should be given between the ranges
</li><li>(if you really have a lot of time try running Elwin with all of those runs, this should give a bit better MSD Fit data)
</li></ul></li><li>ResNorm
<ul><li>Plot Result: Fit
</li><li>Should give a good fit
</li></ul></li><li>Quasi
<ul><li>Check Elastic Peak
</li><li>Check Use ResNorm, select workspace created by ResNorm
</li><li>Should give a reasonable fit when run
</li></ul></li><li>Stretch
<ul><li>Enable Elastic Peak and Sequential Fit
</li><li>Contour plots are not great, open the spectra plots for the _Sigma and _Beta workspaces and see the goodness of fit plots between y=0 and y=1
</li></ul></li></ul><p>
For the next tests we will have to use ISIS SQw files since SaveNexusProcessed does not save detector mapping (<a class="closed ticket" href="10663.html" title="A round trip of SaveNexusProcessed and LoadNexusProcessed discards the ... (closed: fixed)">#10663</a>).
</p>
<ul><li>First generate some SQw workspaces from irs26173_graphite002_red and irs26176_graphite002_red
<ul><li>Indirect &gt; Data Reduction &gt; SQw
</li><li>Rebin in Q: 0.6, 0.1, 1.8
</li><li>Rebin in energy: -0.5, 0.05, 0.5
</li></ul></li></ul><ul><li>Calculate Corrections
<ul><li>Input workspace: irs26176_graphite002_sqw
</li><li>Can workspace: irs26173_graphite002_sqw
</li><li>Cylinder
</li><li>Radius 1: 0.1
</li><li>Radius 1: 0.2
</li><li>Can Radius: 0.25
</li><li>Step size: 0.005
</li><li>Beam Width: 2.1
</li><li>Sample
<ul><li>Number density: 0.1
</li><li>Formula: H2-O
</li></ul></li><li>Can
<ul><li>Number density: 0.1
</li><li>Formula: V
</li></ul></li><li>Save Result enabled
</li></ul></li><li>Apply Corrections
<ul><li>Input workspace: irs26176_graphite002_sqw
</li><li>Cylinder
</li><li>Can workspace: irs26173_graphite002_sqw
</li><li>Use Corrections: find the file in your default save location that came from Calculate Corrections
</li><li>Run
</li></ul></li></ul>
    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-08T12%3A04%3A32Z&amp;precision=second" title="2014-12-08T12:04:32Z in Timeline">6 years</a> ago
                      by Dan Nixon
                    (<a href="https://trac.mantidproject.org/mantid/ticket/10454?cversion=13&amp;cnum_hist=17#comment:17">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/10454?action=comment-diff&amp;cnum=17&amp;version=14">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="10454.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-02T14%3A48%3A02Z&amp;precision=second" title="2014-12-02T14:48:02Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
Properly support Sqw on calc/apply corrections
</p>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/6db4b71aba73b3893d7666ff7a3eac5819985aab" title="6db4b71aba73b3893d7666ff7a3eac5819985aab">6db4b71aba73b3893d7666ff7a3eac5819985aab</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="10454.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-04T07%3A59%3A05Z&amp;precision=second" title="2014-12-04T07:59:05Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="10454.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-08T09%3A24%3A06Z&amp;precision=second" title="2014-12-08T09:24:06Z in Timeline">6 years</a> ago by Lottie Greenwood
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Lottie Greenwood</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="10454.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-08T09%3A26%3A09Z&amp;precision=second" title="2014-12-08T09:26:09Z in Timeline">6 years</a> ago by Lottie Greenwood
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>verify</em>
    </li><li>
      <strong>Tester</strong>
        <em>Lottie Greenwood</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="10454.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-08T11%3A26%3A31Z&amp;precision=second" title="2014-12-08T11:26:31Z in Timeline">6 years</a> ago by Lottie Greenwood
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Lottie Greenwood</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-23">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:23" class="cnum">
      <a href="10454.html#comment:23">comment:23</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-08T14%3A02%3A27Z&amp;precision=second" title="2014-12-08T14:02:27Z in Timeline">6 years</a> ago by Lottie Greenwood
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-24">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:24" class="cnum">
      <a href="10454.html#comment:24">comment:24</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-08T14%3A02%3A35Z&amp;precision=second" title="2014-12-08T14:02:35Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge branch 'master' into bugfix/10454_idr_bayes_functional_at_any_facility
</p>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/f7e4e48e087efe9f634258c0e5379a16b7442f1a"><span class="icon">​</span>f7e4e48e087efe9f634258c0e5379a16b7442f1a</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-25">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:25" class="cnum">
      <a href="10454.html#comment:25">comment:25</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-08T14%3A02%3A35Z&amp;precision=second" title="2014-12-08T14:02:35Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge branch 'feature/10094_support_diffraction_corrections' into bugfix/10454_idr_bayes_functional_at_any_facility
</p>
<p>
Conflicts:
</p>
<blockquote>
<p>
Code/Mantid/scripts/Inelastic/IndirectAbsCor.py
</p>
</blockquote>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/ce80fbcba1a0149c38c2fe6e89aceefb99cbb5d4"><span class="icon">​</span>ce80fbcba1a0149c38c2fe6e89aceefb99cbb5d4</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-26">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:26" class="cnum">
      <a href="10454.html#comment:26">comment:26</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-08T14%3A02%3A35Z&amp;precision=second" title="2014-12-08T14:02:35Z in Timeline">6 years</a> ago by Dan Nixon
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge branch 'master' into bugfix/10454_idr_bayes_functional_at_any_facility
</p>
<p>
Conflicts:
</p>
<blockquote>
<p>
Code/Mantid/MantidQt/CustomInterfaces/src/ConvFit.cpp
</p>
</blockquote>
<p>
Refs <a class="closed ticket" href="10454.html" title="Indirect Bayes and Data Analysis should work at any facility (closed: fixed)">#10454</a>
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/a7b273f5fd1c8a4b6d765cfbc0b267d4ef916ca1"><span class="icon">​</span>a7b273f5fd1c8a4b6d765cfbc0b267d4ef916ca1</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-27">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:27" class="cnum">
      <a href="10454.html#comment:27">comment:27</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-08T14%3A02%3A35Z&amp;precision=second" title="2014-12-08T14:02:35Z in Timeline">6 years</a> ago by Lottie Greenwood
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/bugfix/10454_idr_bayes_functional_at_any_facility'
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/bbe0313102f03f236ec28d2fbdd822b086a9f419"><span class="icon">​</span>bbe0313102f03f236ec28d2fbdd822b086a9f419</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-28">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:28" class="cnum">
      <a href="10454.html#comment:28">comment:28</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T03%3A58%3A12%2B01%3A00&amp;precision=second" title="2015-06-04T03:58:12+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/11296"><span class="icon">​</span>11296</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10454?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10454?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10454?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>