<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #8538 (Add DOI to icat publishing)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="8537.html" title="Ticket #8537" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8538?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8538?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8538?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="8539.html" title="Ticket #8539" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 8538, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="8537.html" title="Ticket #8537">Previous Ticket</a></span></li><li><span><a class="next" href="8539.html" title="Ticket #8539">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/8538.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="8538.html">Ticket #8538</a>
          <span class="status">(inprogress)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-03T14%3A27%3A36Z&amp;precision=second" title="2013-12-03T14:27:36Z in Timeline">7 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A40%3A53%2B01%3A00&amp;precision=second" title="2015-06-04T02:40:53+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Add DOI to icat publishing</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Jay+Rainey">Jay Rainey</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Karl+Palmen">Karl Palmen</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="milestone" href="../milestone/Backlog.html">Backlog</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Framework">Framework</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;keywords=~ICAT">ICAT</a>, <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;keywords=~publish">publish</a>
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span><a class="closed ticket" href="9208.html" title="Have GUI Timeout Instead of Hang When ICAT is Down">#9208</a>, <a class="closed ticket" href="9223.html" title="Filter publish investigations on GUI">#9223</a></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span><a class="inprogress ticket" href="9186.html" title="Refactor shared catalog functionality to a helper class">#9186</a></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
      <span class="lastmod" title="2013-12-03 14:28:10.347126+00:00">
        (last modified by Jay Rainey)
        (<a href="https://trac.mantidproject.org/mantid/ticket/8538?action=diff&amp;version=1">diff</a>)
      </span>
    </h3>
    <div class="searchable">
      <p>
This will need to be discussed further with Tom.
</p>

    </div>
  </div>
</div>
          
    <div id="attachments">
        <h2 class="foldable">Attachments</h2>
        <div>
          <dl class="attachments">
              <dt>
    <a href="../attachment/ticket/8538/generate_doi.py.html" title="View attachment">generate_doi.py</a><a href="../raw-attachment/ticket/8538/generate_doi.py" class="trac-rawlink" title="Download">​</a>
       (<span title="2623 bytes">2.6 KB</span>) -
      added by <em>Jay Rainey</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-09T12%3A04%3A02%2B01%3A00&amp;precision=second" title="2014-06-09T12:04:02+01:00 in Timeline">6 years</a> ago.
  </dt>
              <dd>
                Updated DOI wsdl
              </dd>
          </dl>
          
        </div>
    </div>

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="8538.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-03T14%3A28%3A10Z&amp;precision=second" title="2013-12-03T14:28:10Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/8538?action=diff&amp;version=1">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="8538.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-03T14%3A28%3A36Z&amp;precision=second" title="2013-12-03T14:28:36Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocked By</strong>
        <em>8537</em> removed
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="8538.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-28T12%3A58%3A16Z&amp;precision=second" title="2014-01-28T12:58:16Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Summary</strong>
        changed from <em>[ICAT] Add DOI to publishing</em> to <em>Add DOI to icat publishing</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="8538.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-28T16%3A32%3A24Z&amp;precision=second" title="2014-01-28T16:32:24Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Having spoken with Tom, the following was concluded:
</p>
<ol><li>The DOI API is developed by the SCP, which is unlikely to be released by the code-freeze.
</li><li>Generating a DOI for a datafile is optional.
</li><li>When a user publishes a datafile they are automatically made private. Tom suggested that I should implement a checkbox to provide the user with an optional to make data private, and by default make it public.
</li></ol>
    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="8538.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-01-29T12%3A09%3A29Z&amp;precision=second" title="2014-01-29T12:09:29Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Release 3.1</em> to <em>Backlog</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="8538.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-02-07T13%3A06%3A48Z&amp;precision=second" title="2014-02-07T13:06:48Z in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Backlog</em> to <em>Release 3.2</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="8538.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-02-14T10%3A59%3A50Z&amp;precision=second" title="2014-02-14T10:59:50Z in Timeline">7 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>assigned</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Bulk move of tickets out of triage (new) to assigned at the introduction of the triage state
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="8538.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-04T11%3A51%3A50%2B01%3A00&amp;precision=second" title="2014-04-04T11:51:50+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Priority</strong>
        changed from <em>minor</em> to <em>major</em>
    </li><li>
      <strong>Blocked By</strong>
        <em>9208, 9223</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
To add DOI generation support for publishing I need to:
</p>
<ol><li>Generate gSoap files against the DOI generator end-point, which are:
<ul><li><tt>https://data4.isis.stfc.ac.uk/doi/DOIService?wsdl</tt> <em> Develop
</em></li><li><tt>https://sig-03.esc.rl.ac.uk:8181/doi/DOIService?wsdl</tt> <em> Production
</em></li></ul></li><li>Add the end-point (dev for now until changes below are made) to <tt>Facilities.xml</tt>.
</li><li>Update <tt>ICatalogInfoService</tt> to include a new method (<tt>generateDOIForDatafile</tt>) that makes use of the gSoap methods above (specifically: <tt>registerDatafileDOI</tt>) and returns the generated DOI (to output on LOG).
</li><li>Add and implement the functionality of the new method above in <tt>ICat4Catalog</tt>.
<ul><li>This includes obtaining the end-point from <tt>Facilities.xml</tt> t oaccomdate other facilities using th
</li></ul></li><li>Add two new properties to <tt>CatalogPublish</tt>:
<ul><li><tt>InvestigationID</tt>, "",`The database row ID of the investigation that you want to publish to. (Note: this is required to generate a DOI.)
</li><li><tt>GenerateDOI</tt>, true, <tt>"Generates a DOI for the datafile being published. Once a DOI is generated the datafile will be made public."</tt>
</li></ul></li><li>Add logic to <tt>exec</tt> in <tt>CatalogPublish</tt> to make use of the properties and call <tt>generateDOIForDatafile</tt> from the catalog. <strong>Note:</strong> if a file fails to upload (e.g. already exists etc...) a DOI <strong>must not</strong> be generated.
</li><li>Update <tt>CatalogPublishDialog</tt> to have a checkbox for <tt>GenerateDOI</tt>. <tt>InvestigationID</tt> will be hidden on the GUI and obtained from the table generated <tt>getPublishInvestigations</tt> (once <a class="closed ticket" href="9223.html" title="enhancement: Filter publish investigations on GUI (closed: fixed)">#9223</a> is complete).
<ul><li>The <tt>generateDOI</tt> (make public) checkbox on the GUI should be checked by default.
</li><li>To prevent users accidentally generating DOIs that they may not have wanted to, a <tt>QMessageBox</tt> should be generated IF the user has checked <tt>generateDOI</tt> to confirm this choice.
</li></ul></li></ol>
    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="8538.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A34%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:34+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>assigned</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Added DOI endpoint to Facilities.xml. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ecea7bceea7a5f6e89825f0885f658635ed819ee" title="ecea7bceea7a5f6e89825f0885f658635ed819ee">ecea7bceea7a5f6e89825f0885f658635ed819ee</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="8538.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A35%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:35+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added tests for doi in CatalogInfo. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<ul><li>Also added missing testing for external download url (IDS).
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/866ff0fed7beaef1d9e1f6584e2d5b14f300ca66" title="866ff0fed7beaef1d9e1f6584e2d5b14f300ca66">866ff0fed7beaef1d9e1f6584e2d5b14f300ca66</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="8538.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A35%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:35+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added doiEndPoint method to CatalogInfo. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bb5a48f9e62af3561912ef98cc66bbe1d45ec288" title="bb5a48f9e62af3561912ef98cc66bbe1d45ec288">bb5a48f9e62af3561912ef98cc66bbe1d45ec288</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="8538.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A35%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:35+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added gSoap generated code for endpoint. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b0e3af73c6cd51e3c382130ac92a90df010ce970" title="b0e3af73c6cd51e3c382130ac92a90df010ce970">b0e3af73c6cd51e3c382130ac92a90df010ce970</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="8538.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A35%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:35+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Add registerDatafileDOI to interface &amp; inherited classes. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/78723d52a70a65d93f2a6a8e4ef05e2605a23f55" title="78723d52a70a65d93f2a6a8e4ef05e2605a23f55">78723d52a70a65d93f2a6a8e4ef05e2605a23f55</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="8538.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A35%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:35+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refactor CatalogPublish error handling. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/f968514b0e5cf84b9d5e7cd0ce9092e08c230d61" title="f968514b0e5cf84b9d5e7cd0ce9092e08c230d61">f968514b0e5cf84b9d5e7cd0ce9092e08c230d61</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="8538.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A35%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:35+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge 'origin/master' into feature/8538_icat_publish_dois. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/85af5037527c89ad144f3d6cfe51c90a808160d8" title="85af5037527c89ad144f3d6cfe51c90a808160d8">85af5037527c89ad144f3d6cfe51c90a808160d8</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="8538.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A36%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:36+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Add properties and logic to catalogPublish algorithm. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/c8c27c2b692a8ba8b278f3e4d31111d11c0c6503" title="c8c27c2b692a8ba8b278f3e4d31111d11c0c6503">c8c27c2b692a8ba8b278f3e4d31111d11c0c6503</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="8538.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A36%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:36+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Use getRef for ease of use. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/edf82a7693b662701d215009200d6ad14eb01e17" title="edf82a7693b662701d215009200d6ad14eb01e17">edf82a7693b662701d215009200d6ad14eb01e17</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="8538.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A36%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:36+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Rename parameter on registerDOI. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/df97d12c6a40d9c615707c988504f210e3864a0e" title="df97d12c6a40d9c615707c988504f210e3864a0e">df97d12c6a40d9c615707c988504f210e3864a0e</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="8538.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A36%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:36+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Make SSLContext method generic via templates. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<ul><li>This means we can make use of this for ICATProxy and the DOIProxy objects.
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/81fabd7e4e92859852b785a5ece696a0a3128114" title="81fabd7e4e92859852b785a5ece696a0a3128114">81fabd7e4e92859852b785a5ece696a0a3128114</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="8538.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A36%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:36+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Make throwErrorMessage generic via templates. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/e228227527335ad62470427209d9453a663b0492" title="e228227527335ad62470427209d9453a663b0492">e228227527335ad62470427209d9453a663b0492</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="8538.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A36%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:36+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Renamed method. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ff5abaf1de9c4ad67afa5a58c089c8eb488b6e9e" title="ff5abaf1de9c4ad67afa5a58c089c8eb488b6e9e">ff5abaf1de9c4ad67afa5a58c089c8eb488b6e9e</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="8538.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A37%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:37+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added DOI catalog implementation. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/3b19191643d0454738959cddb4aae4ef78d5bbcb" title="3b19191643d0454738959cddb4aae4ef78d5bbcb">3b19191643d0454738959cddb4aae4ef78d5bbcb</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-23">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:23" class="cnum">
      <a href="8538.html#comment:23">comment:23</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A37%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:37+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added DatabaseID to investigation workspace. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<ul><li>Removed investigationID check as it's handled on the DOI server.
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bc1936c94715a789ca0c6d201a0d60c5fde99262" title="bc1936c94715a789ca0c6d201a0d60c5fde99262">bc1936c94715a789ca0c6d201a0d60c5fde99262</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-24">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:24" class="cnum">
      <a href="8538.html#comment:24">comment:24</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A37%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:37+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Use specified namespace instead of ns1. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/d0ce080430140ee01bfe1988cb13033bd21b19dd" title="d0ce080430140ee01bfe1988cb13033bd21b19dd">d0ce080430140ee01bfe1988cb13033bd21b19dd</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-25">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:25" class="cnum">
      <a href="8538.html#comment:25">comment:25</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A37%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:37+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Updated readme to include namespace generation. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<ul><li>The <tt>-n</tt> option overrides the <tt>ns</tt> namespace prefix. This is required to prevent warnings if several end-points have been generated without a namespace set.
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/a1a7698e8babbd2ea1855bdc3993e553f5eab424" title="a1a7698e8babbd2ea1855bdc3993e553f5eab424">a1a7698e8babbd2ea1855bdc3993e553f5eab424</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-26">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:26" class="cnum">
      <a href="8538.html#comment:26">comment:26</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T15%3A47%3A37%2B01%3A00&amp;precision=second" title="2014-04-08T15:47:37+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Add make public checkbox to publish GUI. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ae0b0628c9ff6cf693e37113d96de3bf62743f71" title="ae0b0628c9ff6cf693e37113d96de3bf62743f71">ae0b0628c9ff6cf693e37113d96de3bf62743f71</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-27">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:27" class="cnum">
      <a href="8538.html#comment:27">comment:27</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T17%3A11%3A37%2B01%3A00&amp;precision=second" title="2014-04-08T17:11:37+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Set DatabaseID property of Publish algorithm via GUI. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b18ec0d8d086f29259c9974815f5e75c3face193" title="b18ec0d8d086f29259c9974815f5e75c3face193">b18ec0d8d086f29259c9974815f5e75c3face193</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-28">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:28" class="cnum">
      <a href="8538.html#comment:28">comment:28</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T17%3A18%3A41%2B01%3A00&amp;precision=second" title="2014-04-08T17:18:41+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Fix include. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/dc3d16e311644f5530b43c0c98230b07d3f7992d" title="dc3d16e311644f5530b43c0c98230b07d3f7992d">dc3d16e311644f5530b43c0c98230b07d3f7992d</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-29">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:29" class="cnum">
      <a href="8538.html#comment:29">comment:29</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-08T20%3A28%3A04%2B01%3A00&amp;precision=second" title="2014-04-08T20:28:04+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
The system test that validates of the Facilities file against its schema is failing because "doiendpoint" does not feature in the schema.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-30">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:30" class="cnum">
      <a href="8538.html#comment:30">comment:30</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-09T08%3A21%3A51%2B01%3A00&amp;precision=second" title="2014-04-09T08:21:51+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
There are quite a lot of new cppcheck <a class="ext-link" href="http://download.mantidproject.org/jenkins/view/Static%20Analysis/job/is_cppcheck_develop/517/cppcheckResult/"><span class="icon">​</span>warnings</a> for the generated code. I think we will need to add another EXCLUDE for the new gsoap-generated code in <tt>Code/Mantid/Build/CMake/CppCheckSetup.cmake</tt>.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-31">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:31" class="cnum">
      <a href="8538.html#comment:31">comment:31</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-09T09%3A53%3A22%2B01%3A00&amp;precision=second" title="2014-04-09T09:53:22+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Add CPPEXCLUDE for DOI gSoap generated code. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/0cf95f1071239e1699d0dbb1e3d42fa6205b5a07" title="0cf95f1071239e1699d0dbb1e3d42fa6205b5a07">0cf95f1071239e1699d0dbb1e3d42fa6205b5a07</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-32">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:32" class="cnum">
      <a href="8538.html#comment:32">comment:32</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-09T10%3A14%3A40%2B01%3A00&amp;precision=second" title="2014-04-09T10:14:40+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added doiendpoint to FacilitiesScheme. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/629055c43d37ea88ecc779772496f6f2a2190c0a" title="629055c43d37ea88ecc779772496f6f2a2190c0a">629055c43d37ea88ecc779772496f6f2a2190c0a</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-33">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:33" class="cnum">
      <a href="8538.html#comment:33">comment:33</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-09T10%3A14%3A40%2B01%3A00&amp;precision=second" title="2014-04-09T10:14:40+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added doi field to datafile table. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b990be39e37845766b5c0d1ea64040740807bcbe" title="b990be39e37845766b5c0d1ea64040740807bcbe">b990be39e37845766b5c0d1ea64040740807bcbe</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-34">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:34" class="cnum">
      <a href="8538.html#comment:34">comment:34</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-10T14%3A38%3A19%2B01%3A00&amp;precision=second" title="2014-04-10T14:38:19+01:00 in Timeline">6 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Restrict doiendpoint as facilities may not support. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/4521af6562ad132455c606216ff160ac63126dab" title="4521af6562ad132455c606216ff160ac63126dab">4521af6562ad132455c606216ff160ac63126dab</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-35">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:35" class="cnum">
      <a href="8538.html#comment:35">comment:35</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-25T12%3A20%3A31%2B01%3A00&amp;precision=second" title="2014-04-25T12:20:31+01:00 in Timeline">6 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Not sure why, but several commits I just made didn't make their way onto track. They were:
</p>
<ol><li><a class="ext-link" href="https://github.com/mantidproject/mantid/commit/9ac89d8f619f741ca83bba8f5d18fafd374f5d0c"><span class="icon">​</span>Merged master into branch after #9223 was completed.</a>
</li><li><a class="ext-link" href="https://github.com/mantidproject/mantid/commit/c1c6557702e4038f6d07a8d391cccbff343266f4"><span class="icon">​</span>Refactor ICAT SOAP calls to improve readability.</a>
</li><li><a class="ext-link" href="https://github.com/mantidproject/mantid/commit/4f19b94c2827d2b5d582e6faf6f0221bb6bc11d1"><span class="icon">​</span>Get the error message from soap, rather than do it manually.</a>
</li><li><a class="ext-link" href="https://github.com/mantidproject/mantid/commit/d97a5f1e82121f792de45bd4bf7be916dd8575ab"><span class="icon">​</span>Output the gSOAP error code to debug - very useful.</a>
</li></ol>
    </div>

              </div>
              <div class="change" id="trac-change-36">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:36" class="cnum">
      <a href="8538.html#comment:36">comment:36</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-25T14%3A38%3A54%2B01%3A00&amp;precision=second" title="2014-04-25T14:38:54+01:00 in Timeline">6 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocked By</strong>
        <em>9376</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-37">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:37" class="cnum">
      <a href="8538.html#comment:37">comment:37</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-04-25T16%3A43%3A25%2B01%3A00&amp;precision=second" title="2014-04-25T16:43:25+01:00 in Timeline">6 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocked By</strong>
        <em>9376</em> removed
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-38">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:38" class="cnum">
      <a href="8538.html#comment:38">comment:38</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-05-16T14%3A17%3A40%2B01%3A00&amp;precision=second" title="2014-05-16T14:17:40+01:00 in Timeline">6 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Moved keepAlive above IDS methods. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/22d2990bc831c4f71965ae3201ec45413fe921be" title="22d2990bc831c4f71965ae3201ec45413fe921be">22d2990bc831c4f71965ae3201ec45413fe921be</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-39">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:39" class="cnum">
      <a href="8538.html#comment:39">comment:39</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-05-16T14%3A17%3A40%2B01%3A00&amp;precision=second" title="2014-05-16T14:17:40+01:00 in Timeline">6 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Updated doiendpoint (still using dev). Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/63ea25c2a4474d02abf317dfc46f7693d904239c" title="63ea25c2a4474d02abf317dfc46f7693d904239c">63ea25c2a4474d02abf317dfc46f7693d904239c</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-40">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:40" class="cnum">
      <a href="8538.html#comment:40">comment:40</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-05-16T14%3A17%3A41%2B01%3A00&amp;precision=second" title="2014-05-16T14:17:41+01:00 in Timeline">6 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Updated doiendpoint to new development url. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/0f951ee96e6fce41e1a043c06590b5111a51098a" title="0f951ee96e6fce41e1a043c06590b5111a51098a">0f951ee96e6fce41e1a043c06590b5111a51098a</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-41">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:41" class="cnum">
      <a href="8538.html#comment:41">comment:41</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-05-16T14%3A17%3A41%2B01%3A00&amp;precision=second" title="2014-05-16T14:17:41+01:00 in Timeline">6 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge 'origin/master' into feature/8538_icat_publish_dois. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Conflicts:
</p>
<ul><li>Code/Mantid/Framework/ICat/src/ICat4/ICat4Catalog.cpp
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/4b1e897e3ab5869886f7b381b5d8773bb0678296" title="4b1e897e3ab5869886f7b381b5d8773bb0678296">4b1e897e3ab5869886f7b381b5d8773bb0678296</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-42">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:42" class="cnum">
      <a href="8538.html#comment:42">comment:42</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-05-16T14%3A17%3A41%2B01%3A00&amp;precision=second" title="2014-05-16T14:17:41+01:00 in Timeline">6 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Add better logging messages for publishing. Refs <a class="inprogress ticket" href="8538.html" title="enhancement: Add DOI to icat publishing (inprogress)">#8538</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/e1b0fc694f9fb735b75646739c7d11fb32e1b79e" title="e1b0fc694f9fb735b75646739c7d11fb32e1b79e">e1b0fc694f9fb735b75646739c7d11fb32e1b79e</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-43">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:43" class="cnum">
      <a href="8538.html#comment:43">comment:43</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-05-16T14%3A24%3A53%2B01%3A00&amp;precision=second" title="2014-05-16T14:24:53+01:00 in Timeline">6 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
The functionality is complete, but am having issues with the ICAT DOI development server (It's throwing an error when DOI generation should be valid). I've got in touch with the DOI developer and once this is sorted this can be tested.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-44">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:44" class="cnum">
      <a href="8538.html#comment:44">comment:44</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-05-19T09%3A38%3A21%2B01%3A00&amp;precision=second" title="2014-05-19T09:38:21+01:00 in Timeline">6 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>9186</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-09T12%3A04%3A02%2B01%3A00&amp;precision=second" title="2014-06-09T12:04:02+01:00 in Timeline">6 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/8538/generate_doi.py.html"><em>generate_doi.py</em></a><a href="../raw-attachment/ticket/8538/generate_doi.py" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Updated DOI wsdl
</p>

    </div>

              </div>
              <div class="change" id="trac-change-45">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:45" class="cnum">
      <a href="8538.html#comment:45">comment:45</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-10T10%3A25%3A31%2B01%3A00&amp;precision=second" title="2014-06-10T10:25:31+01:00 in Timeline">6 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Owner</strong>
        changed from <em>Jay Rainey</em> to <em>Karl Palmen</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
<strong>The functionality for this ticket is complete.</strong> However, there are permission issues in ICAT that are preventing DOIs being generated, which Tom is looking into. Once these have been addressed this ticket can be opened for testing. If it does not pass testing, any additional changes should occur on <a class="ext-link" href="https://github.com/mantidproject/mantid/compare/master...feature;8538_icat_publish_dois"><span class="icon">​</span>the published branch</a>.
</p>
<h1 id="Background">Background</h1>
<p>
This ticket deals with generating a DOI when the user publishes a datafile to the archives and has checked the <strong>"Make public"</strong> option on the CatalogPublish dialog.
</p>
<h1 id="Testing">Testing</h1>
<h2 id="DevelopmentsettingsinFacilities.xml">Development settings in Facilities.xml</h2>
<p>
You <strong>must</strong> update the <strong>url</strong> of <em>soapendpoint</em>, <em>externaldownload</em> and <em>doiendpoint</em> to be the following to ensure only test DOIs are generated:
</p>
<pre class="wiki"> &lt;soapendpoint url="https://icatdev.isis.cclrc.ac.uk/ICATService/ICAT"&gt;&lt;/soapendpoint&gt;
 &lt;externaldownload url="https://isisoxfordvmsrv.isis.cclrc.ac.uk/ids/"&gt;&lt;/externaldownload&gt;
 &lt;doiendpoint url="https://topcatdev.isis.cclrc.ac.uk/doi/DOIWebService"&gt;&lt;/doiendpoint&gt;
</pre><h3 id="GeneratingaDOI">Generating a DOI</h3>
<p>
To be thorough I have attached a <tt>python</tt> script that will generate a DOI against the test server. This should be used prior to testing it within Mantid. This is a faster way to observe if there are any errors on ICAT when generating DOIs.
</p>
<h4 id="GeneratingaDOIwiththeprovidedscript">Generating a DOI with the provided script</h4>
<p>
<strong>Note: </strong>If the DOI has been generated, then this proves that a DOI can be generated, and saved into ICAT successfully.
</p>
<p>
<strong>Remember to change your <tt>Facilities.xml</tt> file to the developer options.</strong>
</p>
<ol><li>Run the attached script. Enter your username &amp; password.
</li><li>Select <tt>f</tt> for the Object type as we want to generate a DOI for a datafile.
</li><li>Enter <strong>32493044</strong> into the <tt>Object id</tt> field. <strong>Note:</strong> This is the <em>ID</em> of a datafile in an <tt>EMU</tt> investigation. The title of this investigation is: <tt>Magnetic ionic liquid surfactants</tt>.
</li><li>You will notice that a DOI has been generated. If an error occurs (<tt>DOI not created, response code: 400</tt>), then this ICAT permissions is is still not fixed! Contact Tom about this.
</li><li>Now that a DOI has been generated we need to see if it saved correctly to ICAT.
</li><li>Log into the catalog and open the <tt>Search</tt> GUI.
</li><li>In the <tt>Investigation name</tt> field enter: <tt>Magnetic ionic liquid surfactants</tt> and click <tt>Search</tt>.
</li><li>Double click on the investigation and the <tt>Datafiles information</tt> table will be populated.
</li><li>Observe that a DOI now exists in the related row for that datafile.
</li></ol><h4 id="GeneratingaDOIwithinMantid">Generating a DOI within Mantid</h4>
<p>
<strong>Remember to change your <tt>Facilities.xml</tt> file to the developer options.</strong>
</p>
<ol><li>Log into the catalog.
</li><li>Left click <tt>Publish</tt> in the <tt>Catalog</tt> menu. The publishing GUI will open.
</li><li>Select <tt>Make public</tt>. This option ensures a DOI is generated when the datafile is published.
</li><li>Select a datafile to upload to ICAT.
</li><li>Enter a name in the <tt>Name in catalog</tt> field. Copy that name to your clipboard.
</li><li>Select an investigation where you would like to publish the datafile.
</li><li>Click <tt>Run</tt>. If the file is uploaded successfully then a DOI will be generated.
</li><li>Open the catalog search GUI.
</li><li>Click <tt>Advanced search</tt> and paste the above file name into the <tt>Datafile name</tt> field.
</li><li>Click <tt>Search</tt> and double click the investigation that is returned.
</li></ol><h3 id="Codereview">Code review</h3>
<p>
As generating a DOI is <em>irreversible</em> it is essential to perform a <em>thorough</em> code review. I recommend reading <a href="8538.html#comment:8" title="Comment 8 for Ticket #8538">comment:8</a> to gain an idea of what the desired logic for this ticket was.
</p>
<p>
<strong>Note:</strong> once this ticket has been tested the ICAT DOI endpoint (<tt>doiendpoint</tt>) should be updated to that of the production server, and not the testing server.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-46">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:46" class="cnum">
      <a href="8538.html#comment:46">comment:46</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-20T10%3A00%3A22%2B01%3A00&amp;precision=second" title="2014-06-20T10:00:22+01:00 in Timeline">6 years</a> ago by Karl Palmen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Release 3.2</em> to <em>Release 3.3</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-47">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:47" class="cnum">
      <a href="8538.html#comment:47">comment:47</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-08T10%3A25%3A31Z&amp;precision=second" title="2014-12-08T10:25:31Z in Timeline">6 years</a> ago by Nick Draper
                </h3>
                
    <div class="comment searchable">
      
      <p>
Moved to the backlog at the code freeze of R3.3
</p>

    </div>

              </div>
              <div class="change" id="trac-change-48">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:48" class="cnum">
      <a href="8538.html#comment:48">comment:48</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-12-08T10%3A27%3A20Z&amp;precision=second" title="2014-12-08T10:27:20Z in Timeline">6 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Release 3.3</em> to <em>Backlog</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-49">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:49" class="cnum">
      <a href="8538.html#comment:49">comment:49</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A40%3A53%2B01%3A00&amp;precision=second" title="2015-06-04T02:40:53+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/9382"><span class="icon">​</span>9382</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8538?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8538?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8538?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>