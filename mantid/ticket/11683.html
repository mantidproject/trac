<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #11683 (ReflectometryReductionOne needs Integrated Monitor Switch)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="11682.html" title="Ticket #11682" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/11683?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/11683?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/11683?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="11684.html" title="Ticket #11684" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 11683, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="11682.html" title="Ticket #11682">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="11684.html" title="Ticket #11684">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="11683.html">Ticket #11683</a>
          <span class="status">(verify: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-05-01T16%3A30%3A12%2B01%3A00&amp;precision=second" title="2015-05-01T16:30:12+01:00 in Timeline">5 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T04%3A46%3A05%2B01%3A00&amp;precision=second" title="2015-06-04T04:46:05+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">ReflectometryReductionOne needs Integrated Monitor Switch</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Owen+Arnold">Owen Arnold</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Harry+Jeffery">Harry Jeffery</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=critical">critical</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="milestone" href="../milestone/Release&#32;3.5.html">Release 3.5</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Reflectometry">Reflectometry</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;keywords=~workflow">workflow</a>
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Look at <a class="ext-link" href="http://docs.mantidproject.org/nightly/algorithms/ReflectometryReductionOne-v1.html"><span class="icon">​</span>http://docs.mantidproject.org/nightly/algorithms/ReflectometryReductionOne-v1.html</a>. We force users to provide a I0MonitorIndex value.
</p>
<ul><li>Documentation should explain that this is a Workspace Index (do the same for other properties to distinguish properties that take Spectrum Number from Workspace Indexes.
</li><li>Add a new boolean property called *NormalizeByIntegratedMonitor* which defaults to true. This preserves the current behaviour.
</li><li>If this is false, take the monitor spectrum and rebin it between WavelengthMin and WavelengthMax and has the same step as the detector workspace. Divide through by this instead of the integrated workspace.
</li><li>Update ReflectometryReductionOneAuto to reflect this, change and ensure that we can set it via the options on the new GUI.
</li></ul>
    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="11683.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-05-05T12%3A22%3A45%2B01%3A00&amp;precision=second" title="2015-05-05T12:22:45+01:00 in Timeline">5 years</a> ago by Harry Jeffery
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="11683.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-05-05T15%3A41%3A10%2B01%3A00&amp;precision=second" title="2015-05-05T15:41:10+01:00 in Timeline">5 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="verify ticket" href="11683.html" title="ReflectometryReductionOne needs Integrated Monitor Switch (verify)">#11683</a> Add NormalizeByIntegratedMonitors option
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/46e1d850df9acb67913bd174320a830af0ad52cc" title="46e1d850df9acb67913bd174320a830af0ad52cc">46e1d850df9acb67913bd174320a830af0ad52cc</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="11683.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-05-05T15%3A41%3A10%2B01%3A00&amp;precision=second" title="2015-05-05T15:41:10+01:00 in Timeline">5 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="verify ticket" href="11683.html" title="ReflectometryReductionOne needs Integrated Monitor Switch (verify)">#11683</a> Forward NormalizeByIntegratedMonitors in ReflRedOneAuto
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/98d1b176eb57e92200f35979d9296c04835b0a30" title="98d1b176eb57e92200f35979d9296c04835b0a30">98d1b176eb57e92200f35979d9296c04835b0a30</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="11683.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-05-05T15%3A41%3A10%2B01%3A00&amp;precision=second" title="2015-05-05T15:41:10+01:00 in Timeline">5 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="verify ticket" href="11683.html" title="ReflectometryReductionOne needs Integrated Monitor Switch (verify)">#11683</a> Clarify that I0MonitorIndex is a workspace index
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/09de465ffca2a34e81653071c8286d01b6f01bd3" title="09de465ffca2a34e81653071c8286d01b6f01bd3">09de465ffca2a34e81653071c8286d01b6f01bd3</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="11683.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-05-05T15%3A43%3A45%2B01%3A00&amp;precision=second" title="2015-05-05T15:43:45+01:00 in Timeline">5 years</a> ago by Harry Jeffery
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
This is being verified as <a class="ext-link" href="https://github.com/mantidproject/mantid/pull/710"><span class="icon">​</span>pull request #710</a>.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="11683.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-05-22T16%3A33%3A31%2B01%3A00&amp;precision=second" title="2015-05-22T16:33:31+01:00 in Timeline">5 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Note to self: Need to write unit test
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="11683.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-01T11%3A18%3A34%2B01%3A00&amp;precision=second" title="2015-06-01T11:18:34+01:00 in Timeline">5 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="verify ticket" href="11683.html" title="ReflectometryReductionOne needs Integrated Monitor Switch (verify)">#11683</a> Don't do meaningless flat background correction
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/a246f82fb47ac35498d9cb464fb2252120949292" title="a246f82fb47ac35498d9cb464fb2252120949292">a246f82fb47ac35498d9cb464fb2252120949292</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="11683.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-01T11%3A18%3A34%2B01%3A00&amp;precision=second" title="2015-06-01T11:18:34+01:00 in Timeline">5 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="verify ticket" href="11683.html" title="ReflectometryReductionOne needs Integrated Monitor Switch (verify)">#11683</a> Test norm by int mon switch
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/a378c45a6cbdeabeccdf9e3b7f7f59529b8b346a" title="a378c45a6cbdeabeccdf9e3b7f7f59529b8b346a">a378c45a6cbdeabeccdf9e3b7f7f59529b8b346a</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="11683.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-01T11%3A18%3A34%2B01%3A00&amp;precision=second" title="2015-06-01T11:18:34+01:00 in Timeline">5 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="verify ticket" href="11683.html" title="ReflectometryReductionOne needs Integrated Monitor Switch (verify)">#11683</a> Don't calculate flat background for 1 bin
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b3492de01e45c279878312ce50e16d92875284ee" title="b3492de01e45c279878312ce50e16d92875284ee">b3492de01e45c279878312ce50e16d92875284ee</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="11683.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-01T11%3A18%3A34%2B01%3A00&amp;precision=second" title="2015-06-01T11:18:34+01:00 in Timeline">5 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="verify ticket" href="11683.html" title="ReflectometryReductionOne needs Integrated Monitor Switch (verify)">#11683</a> Update documentation
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/82331fa36229d528956a12f802ef8c944cb0eb40" title="82331fa36229d528956a12f802ef8c944cb0eb40">82331fa36229d528956a12f802ef8c944cb0eb40</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="11683.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T04%3A46%3A05%2B01%3A00&amp;precision=second" title="2015-06-04T04:46:05+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/12521"><span class="icon">​</span>12521</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/11683?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/11683?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/11683?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>