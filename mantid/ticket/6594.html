<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #6594 (SANS: Understand why adding sans2d event files does not seem to be right)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="6593.html" title="Ticket #6593" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/6594?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/6594?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/6594?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="6595.html" title="Ticket #6595" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 6594, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="6593.html" title="Ticket #6593">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="6595.html" title="Ticket #6595">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="6594.html">Ticket #6594</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-02-20T09%3A02%3A34Z&amp;precision=second" title="2013-02-20T09:02:34Z in Timeline">8 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T01%3A20%3A20%2B01%3A00&amp;precision=second" title="2015-06-04T01:20:20+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">SANS: Understand why adding sans2d event files does not seem to be right</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Anders+Markvardsen">Anders Markvardsen</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Gesner+Passos">Gesner Passos</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;2.6.html">Release 2.6</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=SANS">SANS</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              sarah.rogers@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Jay Rainey
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
      <span class="lastmod" title="2013-07-22 08:23:19.426035+00:00">
        (last modified by Gesner Passos)
        (<a href="https://trac.mantidproject.org/mantid/ticket/6594?action=diff&amp;version=16">diff</a>)
      </span>
    </h3>
    <div class="searchable">
      <p>
When completing <a class="closed ticket" href="6237.html" title="defect: SANS: Adding SANS2D event data in GUI (closed: fixed)">#6237</a> to make the adding of files in the
adding tab give the same result as adding of files using Richard
python the implementation taken was to add the histogram data stored.
</p>
<p>
This ticket is to understand why adding sans2d event data appears to give the wrong answer. A guess which may be little truth to it, is that this could be a subble effect caused by the way ISIS stores event data compared to SNS and how the adding algorithm works.
</p>
<p>
To investigate this convert two event sans2d dataset to histogram data (convert the event data rather than using the histogram data already stored in the nexus files). Then add those together to get result A. Then add the event data and convert these summed data into histogram data, call this result B. What should be the case is that result A = result B regardless of what binning was used etc. 
</p>
<p>
In this ticket test this and then go from there.
</p>

    </div>
  </div>
</div>
          
    <div id="attachments">
        <h2 class="foldable">Attachments</h2>
        <div>
          <dl class="attachments">
              <dt>
    <a href="../attachment/ticket/6594/SANSadd2.py.html" title="View attachment">SANSadd2.py</a><a href="../raw-attachment/ticket/6594/SANSadd2.py" class="trac-rawlink" title="Download">​</a>
       (<span title="10856 bytes">10.6 KB</span>) -
      added by <em>Gesner Passos</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-18T12%3A08%3A21Z&amp;precision=second" title="2013-03-18T12:08:21Z in Timeline">8 years</a> ago.
  </dt>
              <dd>
                Old version of SANSadd2.py that has bug.
              </dd>
              <dt>
    <a href="../attachment/ticket/6594/LoadingEventData.py.html" title="View attachment">LoadingEventData.py</a><a href="../raw-attachment/ticket/6594/LoadingEventData.py" class="trac-rawlink" title="Download">​</a>
       (<span title="1037 bytes">1.0 KB</span>) -
      added by <em>Gesner Passos</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-18T12%3A22%3A21Z&amp;precision=second" title="2013-03-18T12:22:21Z in Timeline">8 years</a> ago.
  </dt>
              <dd>
                Testing loading Event Data directly
              </dd>
          </dl>
          
        </div>
    </div>

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="6594.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-18T11%3A42%3A47Z&amp;precision=second" title="2013-03-18T11:42:47Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="6594.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-18T12%3A06%3A22Z&amp;precision=second" title="2013-03-18T12:06:22Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
The problem was related to considering the number of monitors as 4, while, the files that 
were being added had 8 monitors. This caused the Added value to be shifted in relation to 
the correct value.
</p>
<p>
So, for simplicity, I've attached the first version of the SANSadd2.py file. Substitute the 
file from SANSadd2.py with the attached one. 
</p>
<p>
For double check, use this script to generate the acceptable solution:
</p>
<pre class="wiki">l = LoadNexus('16183')
r = LoadNexus('16197')
Summed = Plus(l,r)
DeleteWorkspace(l)
DeleteWorkspace(r)
</pre><p>
From ISIS Interface, add runs tab, add 16183 and 16197 runs. The result could be SANS2D00016197-add.nxs or SANS2D00016183-add.nxs (depending on the order you added). Load this file.
</p>
<p>
If you plot the Summed<a class="missing changeset" title="No default repository defined">[40]</a> spectrum and SANS2D00016197-add<a class="missing changeset" title="No default repository defined">[36]</a> they will match.
</p>
<p>
Restore the file SANSadd2.py (from the repository, changed in this ticket)
</p>
<p>
Run again the test, and you will see that Summed<a class="missing changeset" title="No default repository defined">[40]</a> matches SANS2D00016197-add<a class="missing changeset" title="No default repository defined">[40]</a>.
</p>

    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-18T12%3A08%3A21Z&amp;precision=second" title="2013-03-18T12:08:21Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/6594/SANSadd2.py.html"><em>SANSadd2.py</em></a><a href="../raw-attachment/ticket/6594/SANSadd2.py" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Old version of SANSadd2.py that has bug.
</p>

    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-18T12%3A22%3A21Z&amp;precision=second" title="2013-03-18T12:22:21Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/6594/LoadingEventData.py.html"><em>LoadingEventData.py</em></a><a href="../raw-attachment/ticket/6594/LoadingEventData.py" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Testing loading Event Data directly
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="6594.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-18T12%3A25%3A35Z&amp;precision=second" title="2013-03-18T12:25:35Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
Besides, this ticket also investigated Loading Event Data and comparing with the histogram data 
already saved at Nexus files (the data that we read using LoadNexus algorithm). You can apply the script checking this <a class="ext-link" href="../attachment/ticket/6594/LoadingEventData.py.html"><span class="icon">​</span>LoadingEventData</a>. You will see that the difference between the histogram data and the EventData are not relevant. (I found only 2 counts of difference). This means that we can still Load the event data using the LoadNexus without compromising the results, and still getting faster answer. 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="6594.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-18T13%3A22%3A46Z&amp;precision=second" title="2013-03-18T13:22:46Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
Solve the issue of wrong monitors numbers
</p>
<p>
Now the monitors are taken from the workspace, so, to be robust against
changes in these numbers. The spectra are set with the new api, that set
all the values using the numpy array. (Faster and easier)
</p>
<p>
Restore the old Load method, does not skip loading the event files any more.
</p>
<p>
re <a class="closed ticket" href="6594.html" title="defect: SANS: Understand why adding sans2d event files does not seem to be right (closed: fixed)">#6594</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/46ca0728179bf8506a594d224b44f408def4d4c8" title="46ca0728179bf8506a594d224b44f408def4d4c8">46ca0728179bf8506a594d224b44f408def4d4c8</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="6594.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-18T13%3A45%3A41Z&amp;precision=second" title="2013-03-18T13:45:41Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
So, this ticket should first prove that the loading method trough Load and LoadNexus produces an equivalent dataset (<a class="closed ticket" href="6594.html#comment:3" title="defect: SANS: Understand why adding sans2d event files does not seem to be right (closed: fixed)">#comment:3</a> to test it). Another thing, it to explain the bug found at <a class="closed ticket" href="6237.html" title="defect: SANS: Adding SANS2D event data in GUI (closed: fixed)">#6237</a>. So, by proving that now we can add two Event Data through its events or histogram data obtaining a equivalent answer we prove that we solved the issue (<a class="closed ticket" href="6594.html#comment:2" title="defect: SANS: Understand why adding sans2d event files does not seem to be right (closed: fixed)">#comment:2</a> to test it).
</p>
<p>
branch name: feature/6594_add_sans2d
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="6594.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-22T14%3A35%3A50Z&amp;precision=second" title="2013-03-22T14:35:50Z in Timeline">8 years</a> ago by Roman Tolchenov
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Roman Tolchenov</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="6594.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-22T15%3A12%3A07Z&amp;precision=second" title="2013-03-22T15:12:07Z in Timeline">8 years</a> ago by Roman Tolchenov
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="6594.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-22T15%3A12%3A40Z&amp;precision=second" title="2013-03-22T15:12:40Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
Solve the issue of wrong monitors numbers
</p>
<p>
Now the monitors are taken from the workspace, so, to be robust against
changes in these numbers. The spectra are set with the new api, that set
all the values using the numpy array. (Faster and easier)
</p>
<p>
Restore the old Load method, does not skip loading the event files any more.
</p>
<p>
re <a class="closed ticket" href="6594.html" title="defect: SANS: Understand why adding sans2d event files does not seem to be right (closed: fixed)">#6594</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/46ca0728179bf8506a594d224b44f408def4d4c8" title="46ca0728179bf8506a594d224b44f408def4d4c8">46ca0728179bf8506a594d224b44f408def4d4c8</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="6594.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-03-28T13%3A07%3A44Z&amp;precision=second" title="2013-03-28T13:07:44Z in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
Solve the issue of wrong monitors numbers
</p>
<p>
Now the monitors are taken from the workspace, so, to be robust against
changes in these numbers. The spectra are set with the new api, that set
all the values using the numpy array. (Faster and easier)
</p>
<p>
Restore the old Load method, does not skip loading the event files any more.
</p>
<p>
re <a class="closed ticket" href="6594.html" title="defect: SANS: Understand why adding sans2d event files does not seem to be right (closed: fixed)">#6594</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/46ca0728179bf8506a594d224b44f408def4d4c8" title="46ca0728179bf8506a594d224b44f408def4d4c8">46ca0728179bf8506a594d224b44f408def4d4c8</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="6594.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-04-05T12%3A48%3A16%2B01%3A00&amp;precision=second" title="2013-04-05T12:48:16+01:00 in Timeline">8 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
Solve the issue of wrong monitors numbers
</p>
<p>
Now the monitors are taken from the workspace, so, to be robust against
changes in these numbers. The spectra are set with the new api, that set
all the values using the numpy array. (Faster and easier)
</p>
<p>
Restore the old Load method, does not skip loading the event files any more.
</p>
<p>
re <a class="closed ticket" href="6594.html" title="defect: SANS: Understand why adding sans2d event files does not seem to be right (closed: fixed)">#6594</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/46ca0728179bf8506a594d224b44f408def4d4c8" title="46ca0728179bf8506a594d224b44f408def4d4c8">46ca0728179bf8506a594d224b44f408def4d4c8</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="6594.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-04-16T11%3A29%3A56%2B01%3A00&amp;precision=second" title="2013-04-16T11:29:56+01:00 in Timeline">7 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
Solve the issue of wrong monitors numbers
</p>
<p>
Now the monitors are taken from the workspace, so, to be robust against
changes in these numbers. The spectra are set with the new api, that set
all the values using the numpy array. (Faster and easier)
</p>
<p>
Restore the old Load method, does not skip loading the event files any more.
</p>
<p>
re <a class="closed ticket" href="6594.html" title="defect: SANS: Understand why adding sans2d event files does not seem to be right (closed: fixed)">#6594</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/46ca0728179bf8506a594d224b44f408def4d4c8" title="46ca0728179bf8506a594d224b44f408def4d4c8">46ca0728179bf8506a594d224b44f408def4d4c8</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="6594.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-04-19T16%3A05%3A01%2B01%3A00&amp;precision=second" title="2013-04-19T16:05:01+01:00 in Timeline">7 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
Solve the issue of wrong monitors numbers
</p>
<p>
Now the monitors are taken from the workspace, so, to be robust against
changes in these numbers. The spectra are set with the new api, that set
all the values using the numpy array. (Faster and easier)
</p>
<p>
Restore the old Load method, does not skip loading the event files any more.
</p>
<p>
re <a class="closed ticket" href="6594.html" title="defect: SANS: Understand why adding sans2d event files does not seem to be right (closed: fixed)">#6594</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/46ca0728179bf8506a594d224b44f408def4d4c8" title="46ca0728179bf8506a594d224b44f408def4d4c8">46ca0728179bf8506a594d224b44f408def4d4c8</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="6594.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-05-02T16%3A49%3A36%2B01%3A00&amp;precision=second" title="2013-05-02T16:49:36+01:00 in Timeline">7 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>closed</em> to <em>reopened</em>
    </li><li>
      <strong>Milestone</strong>
        changed from <em>Release 2.5</em> to <em>Release 2.6</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li><li>
      <strong>Tester</strong>
        <em>Roman Tolchenov</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
The user reported an error when he tried to sum up: 14259+14246+14236
</p>
<pre class="wiki">RuntimeError: Workspace2D::getSpectrum, histogram number 73736 out of range 73736
at line 3 in '&lt;Interface&gt;'
caused by line 121 in 'C:/MantidInstall/scripts/SANS\SANSadd2.py'
</pre><p>
To workaround the issue, the ticked <a class="closed ticket" href="6986.html" title="defect: SANS: Add Runs tab in gui not working (closed: fixed)">#6986</a> add the workspaces loading only the histogram data, and ignoring that there are event data inside as well. But, it is necessary to correct this. It is also necessary to discuss how we want to save the data, now that slicing events will be available to this release (2.6)
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="6594.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-22T09%3A16%3A16%2B01%3A00&amp;precision=second" title="2013-07-22T09:16:16+01:00 in Timeline">7 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Solve the issue of adding event data for SANS2D
</p>
<p>
The problem was a vector overflow. This correct the problem
</p>
<p>
re <a class="closed ticket" href="6594.html" title="defect: SANS: Understand why adding sans2d event files does not seem to be right (closed: fixed)">#6594</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/d221175003b35a145298a0ca62142ba347b54d73" title="d221175003b35a145298a0ca62142ba347b54d73">d221175003b35a145298a0ca62142ba347b54d73</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="6594.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-22T09%3A16%3A16%2B01%3A00&amp;precision=second" title="2013-07-22T09:16:16+01:00 in Timeline">7 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <p>
Revert "Do not load event data for adding data"
</p>
<p>
This reverts commit <a class="changeset" href="https://github.com/mantidproject/mantid/commit/46dde6dddb9b2fd2a979af6a067c5d48bc5e8250" title="46dde6dddb9b2fd2a979af6a067c5d48bc5e8250">46dde6dddb9b2fd2a979af6a067c5d48bc5e8250</a>.
Commit related to <a class="closed ticket" href="6986.html" title="defect: SANS: Add Runs tab in gui not working (closed: fixed)">#6986</a>
</p>
<p>
re <a class="closed ticket" href="6594.html" title="defect: SANS: Understand why adding sans2d event files does not seem to be right (closed: fixed)">#6594</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/e6fb41778b2d7c0ca3c0793be5c0cbe34b2cb15a" title="e6fb41778b2d7c0ca3c0793be5c0cbe34b2cb15a">e6fb41778b2d7c0ca3c0793be5c0cbe34b2cb15a</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="6594.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-22T09%3A23%3A19%2B01%3A00&amp;precision=second" title="2013-07-22T09:23:19+01:00 in Timeline">7 years</a> ago by Gesner Passos
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li><li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/6594?action=diff&amp;version=16">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Tester: 
</p>
<ul><li>open SANS ISIS Interface
</li><li>Select Add Runs
</li><li>Add ndxsans2d/Instrument/data/cycle_12_2 to the search path (Manager User Directories)
</li></ul><p>
*Inside the first line add the numbers: 14259, 14246, 14236 clicking ADD after each number
</p>
<ul><li>Finally, click on Sum button. 
</li><li>It must add all the files, check that loading events appear at the algorithm progress. 
</li><li>The final result is a histogram data file created at your default output folder. 
</li></ul>
    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="6594.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-22T09%3A24%3A58%2B01%3A00&amp;precision=second" title="2013-07-22T09:24:58+01:00 in Timeline">7 years</a> ago by Gesner Passos
                </h3>
                
    <div class="comment searchable">
      
      <blockquote>
<p>
feature/6594_add_sans2d_ev
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="6594.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-24T09%3A53%3A09%2B01%3A00&amp;precision=second" title="2013-07-24T09:53:09+01:00 in Timeline">7 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Component</strong>
        changed from <em>Mantid</em> to <em>Framework</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="6594.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-25T11%3A08%3A23%2B01%3A00&amp;precision=second" title="2013-07-25T11:08:23+01:00 in Timeline">7 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Component</strong>
        changed from <em>Framework</em> to <em>SANS</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="6594.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-25T13%3A35%3A28%2B01%3A00&amp;precision=second" title="2013-07-25T13:35:28+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Jay Rainey</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="6594.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-26T11%3A15%3A54%2B01%3A00&amp;precision=second" title="2013-07-26T11:15:54+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <h2 id="Testing">Testing</h2>
<ul><li>Testing on Ubuntu 12.4.
</li><li>Passed using the provided information.
</li><li>No longer produces out of range issues.
</li><li>Successfully joins event data files and outputs a histogram file as expected.
</li><li>Tested with additional variations of adding data files - all successful. 
</li></ul><h2 id="Codereview">Code review</h2>
<ul><li>Clean and consistent code.
</li><li>No visible bugs/problems.
</li></ul><p>
<strong>Note:</strong> I found a bug when testing this ticket, that was not relevant to the particular code changes above, but is in SANS. This can be seen <a class="assigned ticket" href="7530.html" title="enhancement: Mantid freezing when invalid mask loaded - ISIS SANS. (assigned)">#7530</a>
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-26T11%3A16%3A18%2B01%3A00&amp;precision=second" title="2013-07-26T11:16:18+01:00 in Timeline">7 years</a> ago
                      by Jay Rainey
                    (<a href="https://trac.mantidproject.org/mantid/ticket/6594?cversion=0&amp;cnum_hist=21#comment:21">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/6594?action=comment-diff&amp;cnum=21&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="6594.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-26T11%3A16%3A17%2B01%3A00&amp;precision=second" title="2013-07-26T11:16:17+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/feature/6594_add_sans2d_ev'
</p>

    </div>

              </div>
              <div class="change" id="trac-change-23">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:23" class="cnum">
      <a href="6594.html#comment:23">comment:23</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T01%3A20%3A20%2B01%3A00&amp;precision=second" title="2015-06-04T01:20:20+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/7440"><span class="icon">​</span>7440</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/6594?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/6594?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/6594?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>