<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #8108 (SNS ADARA files: Load the instrument from the Nexus file)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="8107.html" title="Ticket #8107" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8108?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8108?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8108?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="8109.html" title="Ticket #8109" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 8108, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="8107.html" title="Ticket #8107">Previous Ticket</a></span></li><li><span><a class="next" href="8109.html" title="Ticket #8109">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/8108.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="8108.html">Ticket #8108</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-10T14%3A53%3A22%2B01%3A00&amp;precision=second" title="2013-10-10T14:53:22+01:00 in Timeline">7 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A23%3A05%2B01%3A00&amp;precision=second" title="2015-06-04T02:23:05+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">SNS ADARA files: Load the instrument from the Nexus file</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Russell+Taylor">Russell Taylor</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Russell+Taylor">Russell Taylor</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=critical">critical</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;3.0.html">Release 3.0</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Framework">Framework</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;keywords=~ADARA">ADARA</a>
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span><a class="closed ticket" href="8100.html" title="Remove HYSPECA from the facilities file.">#8100</a></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Andrei Savici
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
The nexus files from ADARA-enabled instruments include the full instrument definition XML. We should load that if it's available.
</p>
<p>
This will allow HYSPECA (an alias for HYSPEC while files were being generated by both the ADARA &amp; legacy systems) to go away (but the files to still be loadable). In time, it will also mean that an updated instrument definition doesn't necessitate a patch release.
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="8108.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-15T22%3A33%3A48%2B01%3A00&amp;precision=second" title="2013-10-15T22:33:48+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Re <a class="closed ticket" href="8108.html" title="enhancement: SNS ADARA files: Load the instrument from the Nexus file (closed: fixed)">#8108</a>. Generalise where to look for instrument.
</p>
<p>
Remove the hard-coding pointing to the ISIS place in favour of the
variable that's used everywhere else.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/095164a382d6f0e92320d446fe27541043b606fe" title="095164a382d6f0e92320d446fe27541043b606fe">095164a382d6f0e92320d446fe27541043b606fe</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="8108.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-15T22%3A33%3A49%2B01%3A00&amp;precision=second" title="2013-10-15T22:33:49+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Re <a class="closed ticket" href="8108.html" title="enhancement: SNS ADARA files: Load the instrument from the Nexus file (closed: fixed)">#8108</a>. Use the LoadEventNexus loadInstrument static method.
</p>
<p>
As well as reducing code duplication, this method tries to load the
instrument from the nexus file if possible.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/594aff25cbea0eb0a16bf96edb6cb46f1ed60020" title="594aff25cbea0eb0a16bf96edb6cb46f1ed60020">594aff25cbea0eb0a16bf96edb6cb46f1ed60020</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="8108.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T16%3A40%3A27%2B01%3A00&amp;precision=second" title="2013-10-16T16:40:27+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Re <a class="closed ticket" href="8108.html" title="enhancement: SNS ADARA files: Load the instrument from the Nexus file (closed: fixed)">#8108</a>. Add a test that the instrument is read in correctly.
</p>
<p>
This is for a nexus file that contains the full instrument XML.
Right now, it's still reading the external IDF - this test will make
sure things still work after the refactoring.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/1cfc94e1d659f1d0cf59a6d8656ec6d564e4d3f1" title="1cfc94e1d659f1d0cf59a6d8656ec6d564e4d3f1">1cfc94e1d659f1d0cf59a6d8656ec6d564e4d3f1</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="8108.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T17%3A06%3A55%2B01%3A00&amp;precision=second" title="2013-10-16T17:06:55+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Re <a class="closed ticket" href="8108.html" title="enhancement: SNS ADARA files: Load the instrument from the Nexus file (closed: fixed)">#8108</a>. Generalise where to look for instrument.
</p>
<p>
Remove the hard-coding pointing to the ISIS place in favour of the
variable that's used everywhere else.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ce1e29a1ecfac4a64e1b5f70b0864061b4bd3629" title="ce1e29a1ecfac4a64e1b5f70b0864061b4bd3629">ce1e29a1ecfac4a64e1b5f70b0864061b4bd3629</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="8108.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T17%3A06%3A55%2B01%3A00&amp;precision=second" title="2013-10-16T17:06:55+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Re <a class="closed ticket" href="8108.html" title="enhancement: SNS ADARA files: Load the instrument from the Nexus file (closed: fixed)">#8108</a>. Use the LoadEventNexus loadInstrument static method.
</p>
<p>
As well as reducing code duplication, this method tries to load the
instrument from the nexus file if possible.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/f2f0bdaed27029784f6a46b78730276a42debd9f" title="f2f0bdaed27029784f6a46b78730276a42debd9f">f2f0bdaed27029784f6a46b78730276a42debd9f</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="8108.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T20%3A54%3A54%2B01%3A00&amp;precision=second" title="2013-10-16T20:54:54+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Re <a class="closed ticket" href="8108.html" title="enhancement: SNS ADARA files: Load the instrument from the Nexus file (closed: fixed)">#8108</a>. Refactor to correctly load from SNS ADARA files.
</p>
<p>
While also continuing to work for the other files that have the
instrument XML inside the nexus file (processed, ISIS files).
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b424c810dcc41ac136b57923a64e96ec73ba8b92" title="b424c810dcc41ac136b57923a64e96ec73ba8b92">b424c810dcc41ac136b57923a64e96ec73ba8b92</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="8108.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T20%3A54%3A55%2B01%3A00&amp;precision=second" title="2013-10-16T20:54:55+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Re <a class="closed ticket" href="8108.html" title="enhancement: SNS ADARA files: Load the instrument from the Nexus file (closed: fixed)">#8108</a>. Add .nxs.h5 to list of file extensions.
</p>
<p>
Also fix some formatting.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8d799faeeacb57b59155306f272972788ed37118" title="8d799faeeacb57b59155306f272972788ed37118">8d799faeeacb57b59155306f272972788ed37118</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="8108.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T20%3A54%3A55%2B01%3A00&amp;precision=second" title="2013-10-16T20:54:55+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Re <a class="closed ticket" href="8108.html" title="enhancement: SNS ADARA files: Load the instrument from the Nexus file (closed: fixed)">#8108</a>. Add loading of the parameter file to LoadIDFFromNexus.
</p>
<p>
However, the algorithm doesn't fail if the parameter file is missing.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/f36487fb8724f264dcac25f765ef7d5433f1ab24" title="f36487fb8724f264dcac25f765ef7d5433f1ab24">f36487fb8724f264dcac25f765ef7d5433f1ab24</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="8108.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T21%3A04%3A23%2B01%3A00&amp;precision=second" title="2013-10-16T21:04:23+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Re <a class="closed ticket" href="8108.html" title="enhancement: SNS ADARA files: Load the instrument from the Nexus file (closed: fixed)">#8108</a>. Fix and enable the last test.
</p>
<p>
As far as I can tell, setting the filename at this point in
ExperimentInfo is not necessary.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/029f69253d3a4b53495badb0b629183068f5ee66" title="029f69253d3a4b53495badb0b629183068f5ee66">029f69253d3a4b53495badb0b629183068f5ee66</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="8108.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-17T17%3A05%3A34%2B01%3A00&amp;precision=second" title="2013-10-17T17:05:34+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Re <a class="closed ticket" href="8108.html" title="enhancement: SNS ADARA files: Load the instrument from the Nexus file (closed: fixed)">#8108</a>. Throw if unable to load instrument from IDF
</p>
<p>
Previously, this failure would just log and the calling algorithm
thought it had succeeded when it hadn't.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/c7234148297d4b7958728aab0ebc0288fa99d9c7" title="c7234148297d4b7958728aab0ebc0288fa99d9c7">c7234148297d4b7958728aab0ebc0288fa99d9c7</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="8108.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-17T17%3A05%3A34%2B01%3A00&amp;precision=second" title="2013-10-17T17:05:34+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Re <a class="closed ticket" href="8108.html" title="enhancement: SNS ADARA files: Load the instrument from the Nexus file (closed: fixed)">#8108</a>. Remove redundant code.
</p>
<p>
The strings will be empty on construction anyway.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ccd65b8378a1e34afd0312e47dfe3854a1f44d68" title="ccd65b8378a1e34afd0312e47dfe3854a1f44d68">ccd65b8378a1e34afd0312e47dfe3854a1f44d68</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="8108.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-17T18%3A27%3A29%2B01%3A00&amp;precision=second" title="2013-10-17T18:27:29+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Re <a class="closed ticket" href="8108.html" title="enhancement: SNS ADARA files: Load the instrument from the Nexus file (closed: fixed)">#8108</a>. Check early for presence of IDF in nexus file.
</p>
<p>
It seemed rather heavyweight to launch and plough through most of
LoadIDFFromNexus &amp; ExperimentInfo::loadNexus when the thing we want
isn't there anyway.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/2984b2aecfc245d14eff5a7492d797255cbbe8a7" title="2984b2aecfc245d14eff5a7492d797255cbbe8a7">2984b2aecfc245d14eff5a7492d797255cbbe8a7</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="8108.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-17T21%3A03%3A07%2B01%3A00&amp;precision=second" title="2013-10-17T21:03:07+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
<strong>Tester</strong>: Branch is feature/8108_load_inst_from_adara_nexus_files
</p>
<p>
This should probably be tested at the SNS on SEQUOIA or HYSPEC files. It should be checked on an analysis that would be affected if the instrument and the parameters were not loaded correctly.
</p>
<p>
All the unit and system tests are passing so I'm fairly confident that I haven't broken anything else.
There's a rudimentary unit test, but really it's not too easy to tell from the 'outside' where the instrument was loaded from. The best test is that in <a class="closed ticket" href="8100.html" title="task: Remove HYSPECA from the facilities file. (closed: fixed)">#8100</a> HYSPECA_Definition.xml was removed (this is on develop) which would mean that trying to load a HYSA file (as the unit test and one system test - StepScan - do) would fail if this had not been done correctly.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="8108.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-18T15%3A17%3A43%2B01%3A00&amp;precision=second" title="2013-10-18T15:17:43+01:00 in Timeline">7 years</a> ago by Andrei Savici
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Andrei Savici</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="8108.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-18T16%3A48%3A02%2B01%3A00&amp;precision=second" title="2013-10-18T16:48:02+01:00 in Timeline">7 years</a> ago by Andrei Savici
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Does not work as expected. I loaded HYS_28371.nxs.h5 (IPTS-9477) and it looks fine. Then I deleted HYSPEC_Definition.xml, HYSPEC_Definition.vtp, and HYSPEC_Parameters.xml from the instrument directory, and restarted MantidPlot. When I load the file, it shows some instrument, but the tank is not rotated at ~70 degrees, and monitor positions are wrong. Hyspec geometry depends on some log values, and it seems like the instrument is defined before the logs are read (or not using the logs). Strangely, if the IDF is there, it says that instrument definition is read from the nexus file, but obviously something is different
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="8108.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-18T22%3A13%3A46%2B01%3A00&amp;precision=second" title="2013-10-18T22:13:46+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Re <a class="closed ticket" href="8108.html" title="enhancement: SNS ADARA files: Load the instrument from the Nexus file (closed: fixed)">#8108</a>. Add a magic line to tie logfile params to components.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/119d6b080add1c7118d43cfde80feddc35d5485e" title="119d6b080add1c7118d43cfde80feddc35d5485e">119d6b080add1c7118d43cfde80feddc35d5485e</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="8108.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-18T22%3A18%3A13%2B01%3A00&amp;precision=second" title="2013-10-18T22:18:13+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
    <div class="comment searchable">
      
      <p>
Re <a class="closed ticket" href="8108.html" title="enhancement: SNS ADARA files: Load the instrument from the Nexus file (closed: fixed)">#8108</a>. Fix cut-and-paste mistake.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/564bf4ad466542c85177902a3fa12a9217ba8f99" title="564bf4ad466542c85177902a3fa12a9217ba8f99">564bf4ad466542c85177902a3fa12a9217ba8f99</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="8108.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-21T14%3A45%3A48%2B01%3A00&amp;precision=second" title="2013-10-21T14:45:48+01:00 in Timeline">7 years</a> ago by Russell Taylor
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
The problem raised in <a href="8108.html#comment:15" title="Comment 15 for Ticket #8108">comment:15</a> should now be fixed.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="8108.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-21T15%3A43%3A23%2B01%3A00&amp;precision=second" title="2013-10-21T15:43:23+01:00 in Timeline">7 years</a> ago by Andrei Savici
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="8108.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-21T16%3A55%3A19%2B01%3A00&amp;precision=second" title="2013-10-21T16:55:19+01:00 in Timeline">7 years</a> ago by Andrei Savici
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/feature/8108_load_inst_from_adara_nexus_files'
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/084c85a5dc8098a8993afbb7bac63724086b50c7"><span class="icon">​</span>084c85a5dc8098a8993afbb7bac63724086b50c7</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="8108.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-21T16%3A56%3A49%2B01%3A00&amp;precision=second" title="2013-10-21T16:56:49+01:00 in Timeline">7 years</a> ago by Andrei Savici
                </h3>
                
    <div class="comment searchable">
      
      <p>
Tested by removing HYSPEC definition and parameter files. Instrument shows up correctly
</p>

    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="8108.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A23%3A05%2B01%3A00&amp;precision=second" title="2015-06-04T02:23:05+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/8953"><span class="icon">​</span>8953</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8108?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8108?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8108?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>