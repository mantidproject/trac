<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #10569 (New user (mask) file SANS commands for TILT)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="10568.html" title="Ticket #10568" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10569?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10569?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10569?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="10570.html" title="Ticket #10570" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 10569, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="10568.html" title="Ticket #10568">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="10570.html" title="Ticket #10570">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="10569.html">Ticket #10569</a>
          <span class="status">(closed: duplicate)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-18T12%3A02%3A02Z&amp;precision=second" title="2014-11-18T12:02:02Z in Timeline">6 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T04%3A02%3A36%2B01%3A00&amp;precision=second" title="2015-06-04T04:02:36+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">New user (mask) file SANS commands for TILT</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Anders+Markvardsen">Anders Markvardsen</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Peter+Parker">Peter Parker</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="milestone" href="../milestone/Backlog.html">Backlog</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=SANS">SANS</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              richard.heenan@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Anders Markvardsen
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Richard writes:
</p>
<p>
Mantidinstall/scripts/SANS/    needs the three .py files attached to replace the usual files of the same name. (Someone ought to check my python coding! Search for RKH in the files.)
</p>
<p>
In order to “tilt”, or rather rotate about it’s centre, for any detector
</p>
<p>
DET/CORR FRONT YTILT 0.2145
DET/CORR FRONT XTILT 0.0915
</p>
<p>
The tilt value is in degrees.                                   [I did notice the online doc has a slash not a space, DET/CORR/FRONT – likely equivalent ??]
</p>
<p>
In Mantid, as seen from SANS2d sample position, positive Ytilt moves the top of detector away (rotates about X axis), positive Xtilt rotates the detector clockwise (rotates about Z axis).
</p>
<p>
These tilts are done before the usual translation, and rotation (in the case of the the SANS2d front detector) that move a detector from its default position in the instrument description file to where it is for a particular experiment. 
</p>
<p>
The attached files need to replace the ones in the current download, and the documentation updated.
</p>
<p>
At some point we also need to include my modified tube calibration .py files into the standard download.
</p>

    </div>
  </div>
</div>
          
    <div id="attachments">
        <h2 class="foldable">Attachments</h2>
        <div>
          <dl class="attachments">
              <dt>
    <a href="../attachment/ticket/10569/isis_instrument_RKH.py.html" title="View attachment">isis_instrument_RKH.py</a><a href="../raw-attachment/ticket/10569/isis_instrument_RKH.py" class="trac-rawlink" title="Download">​</a>
       (<span title="54573 bytes">53.3 KB</span>) -
      added by <em>Anders Markvardsen</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-18T12%3A02%3A21Z&amp;precision=second" title="2014-11-18T12:02:21Z in Timeline">6 years</a> ago.
  </dt>
              <dt>
    <a href="../attachment/ticket/10569/isis_reduction_steps_RKH.py.html" title="View attachment">isis_reduction_steps_RKH.py</a><a href="../raw-attachment/ticket/10569/isis_reduction_steps_RKH.py" class="trac-rawlink" title="Download">​</a>
       (<span title="122979 bytes">120.1 KB</span>) -
      added by <em>Anders Markvardsen</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-18T12%3A02%3A31Z&amp;precision=second" title="2014-11-18T12:02:31Z in Timeline">6 years</a> ago.
  </dt>
              <dt>
    <a href="../attachment/ticket/10569/ISISCommandInterface_RKH.py.html" title="View attachment">ISISCommandInterface_RKH.py</a><a href="../raw-attachment/ticket/10569/ISISCommandInterface_RKH.py" class="trac-rawlink" title="Download">​</a>
       (<span title="54659 bytes">53.4 KB</span>) -
      added by <em>Anders Markvardsen</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-26T11%3A32%3A49Z&amp;precision=second" title="2014-11-26T11:32:49Z in Timeline">6 years</a> ago.
  </dt>
              <dd>
                Richard update emailed 20th Nov 2014
              </dd>
          </dl>
          
        </div>
    </div>

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-18T12%3A02%3A21Z&amp;precision=second" title="2014-11-18T12:02:21Z in Timeline">6 years</a> ago by Anders Markvardsen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/10569/isis_instrument_RKH.py.html"><em>isis_instrument_RKH.py</em></a><a href="../raw-attachment/ticket/10569/isis_instrument_RKH.py" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-18T12%3A02%3A31Z&amp;precision=second" title="2014-11-18T12:02:31Z in Timeline">6 years</a> ago by Anders Markvardsen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/10569/isis_reduction_steps_RKH.py.html"><em>isis_reduction_steps_RKH.py</em></a><a href="../raw-attachment/ticket/10569/isis_reduction_steps_RKH.py" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-26T11%3A32%3A49Z&amp;precision=second" title="2014-11-26T11:32:49Z in Timeline">6 years</a> ago by Anders Markvardsen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/10569/ISISCommandInterface_RKH.py.html"><em>ISISCommandInterface_RKH.py</em></a><a href="../raw-attachment/ticket/10569/ISISCommandInterface_RKH.py" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Richard update emailed 20th Nov 2014
</p>

    </div>

              </div>
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="10569.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-26T11%3A34%3A41Z&amp;precision=second" title="2014-11-26T11:34:41Z in Timeline">6 years</a> ago by Anders Markvardsen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Cc</strong>
        <em>richard.heenan@…</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
On 20th Nov 2014 Richard writes:
</p>
<p>
Have now added a completely new function SetCorrectionFile( ) in the attached, at ~ line 862, which can be called after MaskFile( ) to override the direct beam file name. Please put this latest version into the general distribution.
</p>
<p>
This simplifies process of  adjusting the direct beam file, so that only a single mask file is now required, should have done this ages ago. For an example of usage see (in the usual z:\mantidscripts) :     SANSuseful20_varifocal_4m_gdw_BKG_singleMask.py
</p>
<p>
Also tested the previous new features in SetDetectorOffsets( ), worked fine.
</p>
<p>
[ SANS team – you will only need to install the attached ISISCommandInterface_RKH.py if you intend to use this new feature – remove the _RKH and delete the previously compiled version of ISISCommandInterface.pyc before launching Mantid. 
</p>
<p>
Also fyi, the new MoveFront3.py, will help to optimise the position of the front detector, by repeating large numbers of data reductions and fitting Bragg peaks. Present version uses two user files, one for left side, and one for right side of the front detector ( ~1/3 of the detector each). ]
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="10569.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-04-01T08%3A12%3A42%2B01%3A00&amp;precision=second" title="2015-04-01T08:12:42+01:00 in Timeline">6 years</a> ago by Peter Parker
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>duplicate</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Merging in Richard's work is being done as part of <a class="closed ticket" href="11360.html" title="Merge Changes from Rob and Richard (LARMOR and SANS2D) (closed: fixed)">#11360</a>, which just needs to be tested at this stage.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="10569.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-04-01T09%3A34%3A26%2B01%3A00&amp;precision=second" title="2015-04-01T09:34:26+01:00 in Timeline">6 years</a> ago by Anders Markvardsen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Anders Markvardsen</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="10569.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-04-01T09%3A34%3A31%2B01%3A00&amp;precision=second" title="2015-04-01T09:34:31+01:00 in Timeline">6 years</a> ago by Anders Markvardsen
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="10569.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T04%3A02%3A36%2B01%3A00&amp;precision=second" title="2015-06-04T04:02:36+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/11411"><span class="icon">​</span>11411</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10569?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10569?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10569?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>