<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #7432 (Single Crystal Profile fit in Mantid corrections)
     â€“ Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="7431.html" title="Ticket #7431" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/7432?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/7432?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/7432?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="7433.html" title="Ticket #7433" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 7432, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="7431.html" title="Ticket #7431">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="7433.html" title="Ticket #7433">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="7432.html">Ticket #7432</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-11T20%3A05%3A20%2B01%3A00&amp;precision=second" title="2013-07-11T20:05:20+01:00 in Timeline">7 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T01%3A55%3A05%2B01%3A00&amp;precision=second" title="2015-06-04T01:55:05+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Single Crystal Profile fit in Mantid corrections</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Vickie+Lynch">Vickie Lynch</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Vickie+Lynch">Vickie Lynch</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;2.6.html">Release 2.6</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Framework">Framework</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Andrei Savici
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
First data point is 0 which skews background.  Profiles should be written in Art's format so they can be fitted with his code and fitting parameters for each peak should be saved in file.  Fitting option with one exponential does not fit most peaks well.  Gaussian Quadrature should be used for integration of profile with summing left as an option.  Directory for output of png files should be specified.
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="7432.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-12T14%3A21%3A30%2B01%3A00&amp;precision=second" title="2013-07-12T14:21:30+01:00 in Timeline">7 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="7432.html" title="enhancement: Single Crystal Profile fit in Mantid corrections (closed: fixed)">#7432</a> fix first point zero
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bc7c199c2c86e0653756e69e71026d982e1bbc4b" title="bc7c199c2c86e0653756e69e71026d982e1bbc4b">bc7c199c2c86e0653756e69e71026d982e1bbc4b</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="7432.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-12T14%3A22%3A54%2B01%3A00&amp;precision=second" title="2013-07-12T14:22:54+01:00 in Timeline">7 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="7432.html" title="enhancement: Single Crystal Profile fit in Mantid corrections (closed: fixed)">#7432</a> find center of peak
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/0646b8c3581c75396176feb302457e6bc45e957b" title="0646b8c3581c75396176feb302457e6bc45e957b">0646b8c3581c75396176feb302457e6bc45e957b</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="7432.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-15T12%3A57%3A18%2B01%3A00&amp;precision=second" title="2013-07-15T12:57:18+01:00 in Timeline">7 years</a> ago by Vickie Lynch
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="7432.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-15T19%3A18%3A55%2B01%3A00&amp;precision=second" title="2013-07-15T19:18:55+01:00 in Timeline">7 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="7432.html" title="enhancement: Single Crystal Profile fit in Mantid corrections (closed: fixed)">#7432</a> profiles output files added
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/13f2ba999689e06e7c5914129f032cbaccde91cd" title="13f2ba999689e06e7c5914129f032cbaccde91cd">13f2ba999689e06e7c5914129f032cbaccde91cd</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="7432.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-16T14%3A03%3A54%2B01%3A00&amp;precision=second" title="2013-07-16T14:03:54+01:00 in Timeline">7 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="7432.html" title="enhancement: Single Crystal Profile fit in Mantid corrections (closed: fixed)">#7432</a> write file of optimized fitting parameters
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/0e51e62fc3d7d666f65923f05267944e42cdd0b9" title="0e51e62fc3d7d666f65923f05267944e42cdd0b9">0e51e62fc3d7d666f65923f05267944e42cdd0b9</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="7432.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-16T14%3A31%3A07%2B01%3A00&amp;precision=second" title="2013-07-16T14:31:07+01:00 in Timeline">7 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="7432.html" title="enhancement: Single Crystal Profile fit in Mantid corrections (closed: fixed)">#7432</a> fix Mac builds
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/f5f1600a591a233870bed46d2d5541a3c803b704" title="f5f1600a591a233870bed46d2d5541a3c803b704">f5f1600a591a233870bed46d2d5541a3c803b704</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="7432.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-17T19%3A46%3A18%2B01%3A00&amp;precision=second" title="2013-07-17T19:46:18+01:00 in Timeline">7 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="7432.html" title="enhancement: Single Crystal Profile fit in Mantid corrections (closed: fixed)">#7432</a> use function for evaluation
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/0585d1d6eff3e66b151c31228fb5c31bc8f90ae5" title="0585d1d6eff3e66b151c31228fb5c31bc8f90ae5">0585d1d6eff3e66b151c31228fb5c31bc8f90ae5</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="7432.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-18T12%3A06%3A35%2B01%3A00&amp;precision=second" title="2013-07-18T12:06:35+01:00 in Timeline">7 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>assigned</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="7432.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-18T15%3A56%3A09%2B01%3A00&amp;precision=second" title="2013-07-18T15:56:09+01:00 in Timeline">7 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="7432.html" title="enhancement: Single Crystal Profile fit in Mantid corrections (closed: fixed)">#7432</a> function for evaluation
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/67996985eda093010f404b05e80052069a9fc1a9" title="67996985eda093010f404b05e80052069a9fc1a9">67996985eda093010f404b05e80052069a9fc1a9</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="7432.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-18T15%3A56%3A09%2B01%3A00&amp;precision=second" title="2013-07-18T15:56:09+01:00 in Timeline">7 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="7432.html" title="enhancement: Single Crystal Profile fit in Mantid corrections (closed: fixed)">#7432</a> use gsl integration instead of sum
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/6b4425273727dfdd58c968ec09dd363db32ebb5b" title="6b4425273727dfdd58c968ec09dd363db32ebb5b">6b4425273727dfdd58c968ec09dd363db32ebb5b</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="7432.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-18T15%3A56%3A09%2B01%3A00&amp;precision=second" title="2013-07-18T15:56:09+01:00 in Timeline">7 years</a> ago by Vickie Lynch
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="7432.html" title="enhancement: Single Crystal Profile fit in Mantid corrections (closed: fixed)">#7432</a> add gsl header file
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/aea50515297b5cfe82e035b467b0c72354137aa2" title="aea50515297b5cfe82e035b467b0c72354137aa2">aea50515297b5cfe82e035b467b0c72354137aa2</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="7432.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-18T16%3A27%3A12%2B01%3A00&amp;precision=second" title="2013-07-18T16:27:12+01:00 in Timeline">7 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>assigned</em> to <em>new</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="7432.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-25T14%3A51%3A44%2B01%3A00&amp;precision=second" title="2013-07-25T14:51:44+01:00 in Timeline">7 years</a> ago by Vickie Lynch
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="7432.html" title="enhancement: Single Crystal Profile fit in Mantid corrections (closed: fixed)">#7432</a> options for integration of profile
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/1346465cf62e6206c602b0f1512a7a6caf14290a" title="1346465cf62e6206c602b0f1512a7a6caf14290a">1346465cf62e6206c602b0f1512a7a6caf14290a</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="7432.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-25T15%3A47%3A54%2B01%3A00&amp;precision=second" title="2013-07-25T15:47:54+01:00 in Timeline">7 years</a> ago by Vickie Lynch
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Here is script I used for testing.  Puts all files in directories in your home area for checking.  I removed ConvolutionExpGaussian option since it did not work well.  Users would like plots put in directories without plotting in MantidPlot window but could not find a way to do this.
</p>
<pre class="wiki">import os
Home = "/home/vel"
Load(Filename='TOPAZ_6674_event.nxs',OutputWorkspace='TOPAZ_6674_event',FilterByTofMin='2000',FilterByTofMax='16500',LoadMonitors='1',MonitorsAsEvents='1')
ConvertToDiffractionMDWorkspace(InputWorkspace='TOPAZ_6674_event',OutputWorkspace='TOPAZ_6674_MD',OutputDimensions='Q (sample frame)',SplitThreshold='50',MaxRecursionDepth='11')
FindPeaksMD(InputWorkspace='TOPAZ_6674_MD',PeakDistanceThreshold='0.471',MaxPeaks='100',OutputWorkspace='peaks_ws')
CentroidPeaksMD(InputWorkspace='TOPAZ_6674_MD',PeaksWorkspace='peaks_ws',OutputWorkspace='peaks_ws')
FindUBUsingFFT(PeaksWorkspace='peaks_ws',MinD='4',MaxD='12',Tolerance='0.12')
IndexPeaks(PeaksWorkspace='peaks_ws',Tolerance='0.12')
SelectCellOfType(PeaksWorkspace='peaks_ws',CellType='Rhombohedral',Centering='R')
IntegratePeaksMD(InputWorkspace='TOPAZ_6674_MD',CoordinatesToUse='Q (sample frame)',PeakRadius='0.1',PeaksWorkspace='peaks_ws',OutputWorkspace='peaks_ws_sphere')
IntegratePeaksMD(InputWorkspace='TOPAZ_6674_MD',CoordinatesToUse='Q (sample frame)',PeakRadius='0.1',PeaksWorkspace='peaks_ws',OutputWorkspace='peaks_ws_cylinder',
Cylinder='1',CylinderLength='0.4',PercentBackground='20',ProfileFunction='NoFit')

IntegratePeaksMD(InputWorkspace='TOPAZ_6674_MD',CoordinatesToUse='Q (sample frame)',PeakRadius='0.1',PeaksWorkspace='peaks_ws',OutputWorkspace='peaks_ws_cylinder_gauss',
Cylinder='1',CylinderLength='0.4',PercentBackground='20',ProfileFunction='Gaussian',ProfilesFile=Home+'/new.profiles')
os.system("mkdir ~/ProfileGauss")
for wi in xrange(mtd["ProfilesData"].getNumberHistograms()):
        graph_spec = plotSpectrum ("ProfilesData", wi, False, 1)
        l = graph_spec.activeLayer()
        l.insertCurve("ProfilesFit", wi)
        l.insertCurve("ProfilesFitDiff", wi)
        graph_spec.export(Home+"/ProfileGauss/ProfileGauss"+mtd["ProfilesData"].getAxis(1).label(wi)+".png")
        #Remove next 2 lines to keep plots in window
        graph_spec.confirmClose(False)
        graph_spec.close()

IntegratePeaksMD(InputWorkspace='TOPAZ_6674_MD',CoordinatesToUse='Q (sample frame)',PeakRadius='0.1',PeaksWorkspace='peaks_ws',OutputWorkspace='peaks_ws_cylinder_gauss_sum',
Cylinder='1',CylinderLength='0.4',PercentBackground='20',ProfileFunction='Gaussian',IntegrationOption="Sum")
os.system("mkdir ~/ProfileGauss_Sum")
for wi in xrange(mtd["ProfilesData"].getNumberHistograms()):
        graph_spec = plotSpectrum ("ProfilesData", wi, False, 1)
        l = graph_spec.activeLayer()
        l.insertCurve("ProfilesFit", wi)
        l.insertCurve("ProfilesFitDiff", wi)
        graph_spec.export(Home+"/ProfileGauss_Sum/ProfileGauss"+mtd["ProfilesData"].getAxis(1).label(wi)+".png")
        #Remove next 2 lines to keep plots in window
        graph_spec.confirmClose(False)
        graph_spec.close()

IntegratePeaksMD(InputWorkspace='TOPAZ_6674_MD',CoordinatesToUse='Q (sample frame)',PeakRadius='0.1',PeaksWorkspace='peaks_ws',OutputWorkspace='peaks_ws_cylinder_b2b',
Cylinder='1',CylinderLength='0.4',PercentBackground='20',ProfileFunction='ConvolutionBackToBackGaussian')
os.system("mkdir ~/ProfileB2B")
for wi in xrange(mtd["ProfilesData"].getNumberHistograms()):
        graph_spec = plotSpectrum ("ProfilesData", wi, False, 1)
        l = graph_spec.activeLayer()
        l.insertCurve("ProfilesFit", wi)
        l.insertCurve("ProfilesFitDiff", wi)
        graph_spec.export(Home+"/ProfileB2B/ProfileB2B"+mtd["ProfilesData"].getAxis(1).label(wi)+".png")
        #Remove next 2 lines to keep plots in window
        graph_spec.confirmClose(False)
        graph_spec.close()

IntegratePeaksMD(InputWorkspace='TOPAZ_6674_MD',CoordinatesToUse='Q (sample frame)',PeakRadius='0.1',PeaksWorkspace='peaks_ws',OutputWorkspace='peaks_ws_cylinder_b2b_sum',
Cylinder='1',CylinderLength='0.4',PercentBackground='20',ProfileFunction='ConvolutionBackToBackGaussian',IntegrationOption="Sum")
os.system("mkdir ~/ProfileB2B_Sum")
for wi in xrange(mtd["ProfilesData"].getNumberHistograms()):
        graph_spec = plotSpectrum ("ProfilesData", wi, False, 1)
        l = graph_spec.activeLayer()
        l.insertCurve("ProfilesFit", wi)
        l.insertCurve("ProfilesFitDiff", wi)
        graph_spec.export(Home+"/ProfileB2B_Sum/ProfileB2B"+mtd["ProfilesData"].getAxis(1).label(wi)+".png")
        #Remove next 2 lines to keep plots in window
        graph_spec.confirmClose(False)
        graph_spec.close()

</pre>
    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-29T18%3A17%3A48%2B01%3A00&amp;precision=second" title="2013-07-29T18:17:48+01:00 in Timeline">7 years</a> ago
                      by Vickie Lynch
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7432?cversion=0&amp;cnum_hist=14#comment:14">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7432?action=comment-diff&amp;cnum=14&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="7432.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-29T18%3A13%3A11%2B01%3A00&amp;precision=second" title="2013-07-29T18:13:11+01:00 in Timeline">7 years</a> ago by Andrei Savici
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Andrei Savici</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="7432.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-29T18%3A59%3A54%2B01%3A00&amp;precision=second" title="2013-07-29T18:59:54+01:00 in Timeline">7 years</a> ago by Andrei Savici
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/feature/7432_profile_fit2'
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="7432.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T01%3A55%3A05%2B01%3A00&amp;precision=second" title="2015-06-04T01:55:05+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/8278"><span class="icon">â€‹</span>8278</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/7432?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/7432?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/7432?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>