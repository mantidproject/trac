<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #7866 (Cross platform support for downloading archives)
     â€“ Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="7865.html" title="Ticket #7865" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/7866?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/7866?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/7866?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="7867.html" title="Ticket #7867" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 7866, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="7865.html" title="Ticket #7865">Previous Ticket</a></span></li><li><span><a class="next" href="7867.html" title="Ticket #7867">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/7866.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="7866.html">Ticket #7866</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-09-03T13%3A29%3A39%2B01%3A00&amp;precision=second" title="2013-09-03T13:29:39+01:00 in Timeline">7 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A13%3A02%2B01%3A00&amp;precision=second" title="2015-06-04T02:13:02+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Cross platform support for downloading archives</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Jay+Rainey">Jay Rainey</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Jay+Rainey">Jay Rainey</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;3.0.html">Release 3.0</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Framework">Framework</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;keywords=~ICAT4">ICAT4</a>, <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;keywords=~ICAT">ICAT</a>
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span><a class="closed ticket" href="3827.html" title="Catalog Download Improvement">#3827</a>, <a class="closed ticket" href="7637.html" title="Improve ICAT4 user interface">#7637</a>, <a class="closed ticket" href="8126.html" title="ICAT4: External (HTTP) download">#8126</a></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Martyn Gigg
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Currently, it is only possible to download files from the archive on a windows machine since the string returned by <tt>getFileLocation</tt> does not consider file paths or mount points.
</p>
<p>
Therefore, we need to create a class that will parse the string returned, and convert it to a usable path for the user's operating system. This will be done by converting the returned string from ICAT and changing it as needed.
</p>
<p>
For example, if a user has set their archive mount point to be <tt>/archive/</tt> then we need to replace the windows specific part of the returned string with this. If no mount point exists, then we should download via HTTP.
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="7866.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-09-03T13%3A33%3A03%2B01%3A00&amp;precision=second" title="2013-09-03T13:33:03+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Summary</strong>
        changed from <em>Improve downloading data files within ICAT</em> to <em>Cross platform support for downloading archives</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="7866.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-09-27T08%3A40%3A09%2B01%3A00&amp;precision=second" title="2013-09-27T08:40:09+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
The agreed solution is described as follows. 
</p>
<p>
Udate/add information to the Facilities.xml. The new structure should look like (ISIS example):
</p>
<div class="code"><pre><span class="nt">&lt;catalog</span> <span class="na">name=</span><span class="s">"ICat3Catalog"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;soapendpoint</span> <span class="na">url=</span><span class="s">"https://facilities01.esc.rl.ac.uk:443/ICATService/ICAT"</span><span class="nt">&gt;&lt;/soapendpoint&gt;</span>
  <span class="nt">&lt;filelocation&gt;</span>
    <span class="nt">&lt;prefix</span> <span class="na">regex=</span><span class="s">"\\isis\inst$"</span><span class="nt">&gt;&lt;/prefix&gt;</span>
    <span class="nt">&lt;windows</span> <span class="na">replacement=</span><span class="s">""</span><span class="nt">&gt;&lt;/prefix&gt;</span>
    <span class="nt">&lt;linux</span> <span class="na">replacement=</span><span class="s">"/archive"</span><span class="nt">&gt;&lt;/prefix&gt;</span>
    <span class="nt">&lt;mac</span> <span class="na">replacement=</span><span class="s">"/archive"</span><span class="nt">&gt;&lt;/prefix&gt;</span>
  <span class="nt">&lt;/filelocation&gt;</span>
<span class="nt">&lt;/catalog&gt;</span>
</pre></div><p>
Note that the <em>soapendpoint</em> tag has been moved inside the relevant catalog tag, which will allow us to have multiple catalog tags in the future. It has also been put to lower case for consistency.
</p>
<p>
The Facilities schema (XSD) in the Code/Mantid/instrument/Schema directory will need to be updated too.
</p>
<p>
The Kernel::FacilityInfo class needs to be updated to understand the new information. My suggestion is to add a new class called <em>CatalogInfo</em> and have the FacilityInfo class store a list of these objects. The CatalogInfo class should store all of the info enclosed within the <em>&lt;catalog&gt;</em> tag above. 
</p>
<p>
The current 'getSoapEndPoint' method should then be moved to the CatalogInfo class and additional methods added to CatalogInfo to enquire about the other values. I would also suggest an extra method on he CatalogInfo class that can transform a file location to the correct value/style for the current operating system. That way this can be well encapsulated, unit tested and available elsewhere.
</p>
<p>
The final piece of the puzzle is then using this functionality in the ICAT layer.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="7866.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-01T10%3A36%3A00%2B01%3A00&amp;precision=second" title="2013-10-01T10:36:00+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>7637</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="7866.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T10%3A39%3A24%2B01%3A00&amp;precision=second" title="2013-10-04T10:39:24+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Added new catalog scheme. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/4b5b88c79d75b97d91e49ea3a8b58e5bb339c1a9" title="4b5b88c79d75b97d91e49ea3a8b58e5bb339c1a9">4b5b88c79d75b97d91e49ea3a8b58e5bb339c1a9</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="7866.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T10%3A39%3A25%2B01%3A00&amp;precision=second" title="2013-10-04T10:39:25+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added outline for <tt>CatalogInfo</tt> class. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8f2e1dabc985d4f1d7e0ce9eeaa4e787c761439f" title="8f2e1dabc985d4f1d7e0ce9eeaa4e787c761439f">8f2e1dabc985d4f1d7e0ce9eeaa4e787c761439f</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="7866.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T10%3A39%3A25%2B01%3A00&amp;precision=second" title="2013-10-04T10:39:25+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Use catalog class in FacilityInfo instead. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/af396d251e3a228c0c7cfa22ff54ef32cfd13ef3" title="af396d251e3a228c0c7cfa22ff54ef32cfd13ef3">af396d251e3a228c0c7cfa22ff54ef32cfd13ef3</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="7866.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T10%3A39%3A25%2B01%3A00&amp;precision=second" title="2013-10-04T10:39:25+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Removed now unnecessary methods. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8ad3e03c7d1d49ce5677a408e120059c97b05a70" title="8ad3e03c7d1d49ce5677a408e120059c97b05a70">8ad3e03c7d1d49ce5677a408e120059c97b05a70</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="7866.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T10%3A39%3A25%2B01%3A00&amp;precision=second" title="2013-10-04T10:39:25+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Methods updated for <tt>CatalogInfo</tt>. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8756f39739d95f149ca4edb52faaa8db3012a914" title="8756f39739d95f149ca4edb52faaa8db3012a914">8756f39739d95f149ca4edb52faaa8db3012a914</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="7866.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T10%3A39%3A26%2B01%3A00&amp;precision=second" title="2013-10-04T10:39:26+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Updated regex in <tt>Facilities.xml</tt>. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8f2ae56c5da003ffa964ea36dd6a1dca75149b89" title="8f2ae56c5da003ffa964ea36dd6a1dca75149b89">8f2ae56c5da003ffa964ea36dd6a1dca75149b89</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="7866.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T10%3A39%3A26%2B01%3A00&amp;precision=second" title="2013-10-04T10:39:26+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Updated transform method and created helper methods.Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ae10345c859c4f75d53ecea234eefee51f83b88d" title="ae10345c859c4f75d53ecea234eefee51f83b88d">ae10345c859c4f75d53ecea234eefee51f83b88d</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="7866.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T10%3A39%3A26%2B01%3A00&amp;precision=second" title="2013-10-04T10:39:26+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Updated regex in <tt>Facilities.xml</tt>. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<ul><li>Now accounts for <tt>Instruments$</tt> in the search path.
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/10618f59a3d6aac0436df374efda21fab8e5375e" title="10618f59a3d6aac0436df374efda21fab8e5375e">10618f59a3d6aac0436df374efda21fab8e5375e</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="7866.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T10%3A39%3A26%2B01%3A00&amp;precision=second" title="2013-10-04T10:39:26+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added unit test for <tt>CatalogInfo</tt>. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8bd0f1169f6ff1110dfce4bb9d25299c719472bb" title="8bd0f1169f6ff1110dfce4bb9d25299c719472bb">8bd0f1169f6ff1110dfce4bb9d25299c719472bb</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="7866.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-04T10%3A39%3A26%2B01%3A00&amp;precision=second" title="2013-10-04T10:39:26+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Silence compiler warning. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bb5bcce55272ce047b7c9bd207c8d227ebaa9f78" title="bb5bcce55272ce047b7c9bd207c8d227ebaa9f78">bb5bcce55272ce047b7c9bd207c8d227ebaa9f78</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="7866.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T10%3A23%3A40%2B01%3A00&amp;precision=second" title="2013-10-07T10:23:40+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added new catalog scheme. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/4b5b88c79d75b97d91e49ea3a8b58e5bb339c1a9" title="4b5b88c79d75b97d91e49ea3a8b58e5bb339c1a9">4b5b88c79d75b97d91e49ea3a8b58e5bb339c1a9</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="7866.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T10%3A23%3A41%2B01%3A00&amp;precision=second" title="2013-10-07T10:23:41+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added outline for <tt>CatalogInfo</tt> class. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8f2e1dabc985d4f1d7e0ce9eeaa4e787c761439f" title="8f2e1dabc985d4f1d7e0ce9eeaa4e787c761439f">8f2e1dabc985d4f1d7e0ce9eeaa4e787c761439f</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="7866.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T10%3A23%3A41%2B01%3A00&amp;precision=second" title="2013-10-07T10:23:41+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Use catalog class in FacilityInfo instead. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/af396d251e3a228c0c7cfa22ff54ef32cfd13ef3" title="af396d251e3a228c0c7cfa22ff54ef32cfd13ef3">af396d251e3a228c0c7cfa22ff54ef32cfd13ef3</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="7866.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T10%3A23%3A41%2B01%3A00&amp;precision=second" title="2013-10-07T10:23:41+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Removed now unnecessary methods. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8ad3e03c7d1d49ce5677a408e120059c97b05a70" title="8ad3e03c7d1d49ce5677a408e120059c97b05a70">8ad3e03c7d1d49ce5677a408e120059c97b05a70</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="7866.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T10%3A23%3A41%2B01%3A00&amp;precision=second" title="2013-10-07T10:23:41+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Methods updated for <tt>CatalogInfo</tt>. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8756f39739d95f149ca4edb52faaa8db3012a914" title="8756f39739d95f149ca4edb52faaa8db3012a914">8756f39739d95f149ca4edb52faaa8db3012a914</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="7866.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T10%3A23%3A41%2B01%3A00&amp;precision=second" title="2013-10-07T10:23:41+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Updated regex in <tt>Facilities.xml</tt>. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8f2ae56c5da003ffa964ea36dd6a1dca75149b89" title="8f2ae56c5da003ffa964ea36dd6a1dca75149b89">8f2ae56c5da003ffa964ea36dd6a1dca75149b89</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="7866.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T10%3A23%3A41%2B01%3A00&amp;precision=second" title="2013-10-07T10:23:41+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Updated transform method and created helper methods.Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ae10345c859c4f75d53ecea234eefee51f83b88d" title="ae10345c859c4f75d53ecea234eefee51f83b88d">ae10345c859c4f75d53ecea234eefee51f83b88d</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="7866.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T10%3A23%3A42%2B01%3A00&amp;precision=second" title="2013-10-07T10:23:42+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Updated regex in <tt>Facilities.xml</tt>. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<ul><li>Now accounts for <tt>Instruments$</tt> in the search path.
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/10618f59a3d6aac0436df374efda21fab8e5375e" title="10618f59a3d6aac0436df374efda21fab8e5375e">10618f59a3d6aac0436df374efda21fab8e5375e</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="7866.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T10%3A23%3A42%2B01%3A00&amp;precision=second" title="2013-10-07T10:23:42+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added unit test for <tt>CatalogInfo</tt>. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8bd0f1169f6ff1110dfce4bb9d25299c719472bb" title="8bd0f1169f6ff1110dfce4bb9d25299c719472bb">8bd0f1169f6ff1110dfce4bb9d25299c719472bb</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-23">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:23" class="cnum">
      <a href="7866.html#comment:23">comment:23</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T10%3A23%3A42%2B01%3A00&amp;precision=second" title="2013-10-07T10:23:42+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Silence compiler warning. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bb5bcce55272ce047b7c9bd207c8d227ebaa9f78" title="bb5bcce55272ce047b7c9bd207c8d227ebaa9f78">bb5bcce55272ce047b7c9bd207c8d227ebaa9f78</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-24">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:24" class="cnum">
      <a href="7866.html#comment:24">comment:24</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T10%3A23%3A42%2B01%3A00&amp;precision=second" title="2013-10-07T10:23:42+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Updated <tt>transformArchivePath</tt>. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<ul><li>The boolean check was removed and related search is now windows specific as it's not needed to be performed on all operating systems.
</li><li>Updated <tt>replaceAllOccurences</tt> to return the modified string.
</li><li>Added "@return" documentation.
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/19106ea5cf6fa8bb9bce82630ce91a4a316f366f" title="19106ea5cf6fa8bb9bce82630ce91a4a316f366f">19106ea5cf6fa8bb9bce82630ce91a4a316f366f</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-25">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:25" class="cnum">
      <a href="7866.html#comment:25">comment:25</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T10%3A23%3A42%2B01%3A00&amp;precision=second" title="2013-10-07T10:23:42+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Updated <tt>CatalogInfoTest</tt> windows replacement. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<ul><li>Added new path to test against when on windows (<tt>winPrefixPath</tt>)
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b8f5ba7c2496c2d7a17f359a580e20ba7b4acefe" title="b8f5ba7c2496c2d7a17f359a580e20ba7b4acefe">b8f5ba7c2496c2d7a17f359a580e20ba7b4acefe</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-26">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:26" class="cnum">
      <a href="7866.html#comment:26">comment:26</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T17%3A26%3A25%2B01%3A00&amp;precision=second" title="2013-10-07T17:26:25+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added <tt>CatalogInfo</tt> class to <tt>FacilityInfo</tt>. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/87485a4f9593658ef93ce842b8ad66b765d54ab8" title="87485a4f9593658ef93ce842b8ad66b765d54ab8">87485a4f9593658ef93ce842b8ad66b765d54ab8</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-27">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:27" class="cnum">
      <a href="7866.html#comment:27">comment:27</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T17%3A26%3A26%2B01%3A00&amp;precision=second" title="2013-10-07T17:26:26+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Removed any reference to <tt>soapEndPoint</tt> and <tt>catalogName</tt>. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<ul><li>Updated algorithms to make use of <tt>catalogInfo</tt> within <tt>FacilityInfo</tt>.
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/c9e998a71f60ffd25bb2152a551e27b930bc145c" title="c9e998a71f60ffd25bb2152a551e27b930bc145c">c9e998a71f60ffd25bb2152a551e27b930bc145c</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-28">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:28" class="cnum">
      <a href="7866.html#comment:28">comment:28</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T17%3A26%3A26%2B01%3A00&amp;precision=second" title="2013-10-07T17:26:26+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Transform file location to user specific operating system. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<ul><li>Removed unnecessary backslash replacement in <tt>ICat3Helper.cpp</tt> as it made the transform invalid.
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/225b8ca8cdfdb19ca702d48fc881f5212399f2ce" title="225b8ca8cdfdb19ca702d48fc881f5212399f2ce">225b8ca8cdfdb19ca702d48fc881f5212399f2ce</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-29">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:29" class="cnum">
      <a href="7866.html#comment:29">comment:29</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T17%3A26%3A27%2B01%3A00&amp;precision=second" title="2013-10-07T17:26:27+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Tidied up <tt>CatalogDownloadDataFiles</tt>. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ad8f0c4b7b6109f9e8eed3daf0e95845fbce07df" title="ad8f0c4b7b6109f9e8eed3daf0e95845fbce07df">ad8f0c4b7b6109f9e8eed3daf0e95845fbce07df</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-30">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:30" class="cnum">
      <a href="7866.html#comment:30">comment:30</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-07T17%3A47%3A53%2B01%3A00&amp;precision=second" title="2013-10-07T17:47:53+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <h1 id="Totest">To test</h1>
<p>
In order to verify that the changes are correct ensure that:
</p>
<ul><li>All tests pass on all platforms.
</li><li>The code changes I made are up to standard, and in-line with Martyn's recommendations in <a href="7866.html#comment:2" title="Comment 2 for Ticket #7866">comment:2</a>
</li></ul><h2 id="TotestviaICATGUI">To test via ICAT GUI</h2>
<ol><li>Enable debugging in <tt>Results log</tt> (right click -&gt; <tt>Log level</tt> -&gt; <tt>Debug</tt>).
</li><li>Log into ICAT
</li><li>Perform a search (You could type <tt>bob</tt> into Keywords then click <tt>Search</tt>).
</li><li>Double click on an investigation result - <em>a new window is open</em>.
</li><li>Click on the dropdown button <tt>&gt;</tt>
</li><li>Click on the <tt>Run range</tt> dropdown button (<tt>&gt;</tt>), and select a datafile and click download.
</li><li>If you have access to the archives then the following will be output:
<blockquote class="citation">
<p>
<tt>File(fileName) located in archives.</tt>
</p>
</blockquote>
Otherwise, the file will be downloaded over HTTP and the output will be:
<blockquote class="citation">
<p>
<tt>Unable to open file (fileName) from archive. Beginning to download over Internet.</tt>
</p>
</blockquote>
</li></ol><p>
If possible, verify that this works on various platforms when you have access to archives and when you do not.
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-10T11%3A19%3A57%2B01%3A00&amp;precision=second" title="2013-10-10T11:19:57+01:00 in Timeline">7 years</a> ago
                      by Jay Rainey
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7866?cversion=1&amp;cnum_hist=30#comment:30">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7866?action=comment-diff&amp;cnum=30&amp;version=2">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-31">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:31" class="cnum">
      <a href="7866.html#comment:31">comment:31</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-10T09%3A43%3A52%2B01%3A00&amp;precision=second" title="2013-10-10T09:43:52+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-32">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:32" class="cnum">
      <a href="7866.html#comment:32">comment:32</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-10T11%3A34%3A41%2B01%3A00&amp;precision=second" title="2013-10-10T11:34:41+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Const correctness corrections. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/3fa4725e5ffb9026baf0853e058b40ca271df894" title="3fa4725e5ffb9026baf0853e058b40ca271df894">3fa4725e5ffb9026baf0853e058b40ca271df894</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-33">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:33" class="cnum">
      <a href="7866.html#comment:33">comment:33</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-10T11%3A52%3A55%2B01%3A00&amp;precision=second" title="2013-10-10T11:52:55+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-34">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:34" class="cnum">
      <a href="7866.html#comment:34">comment:34</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-14T17%3A27%3A31%2B01%3A00&amp;precision=second" title="2013-10-14T17:27:31+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>8126</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-35">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:35" class="cnum">
      <a href="7866.html#comment:35">comment:35</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-14T17%3A52%3A36%2B01%3A00&amp;precision=second" title="2013-10-14T17:52:36+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>8126</em> removed
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-36">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:36" class="cnum">
      <a href="7866.html#comment:36">comment:36</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-15T10%3A13%3A33%2B01%3A00&amp;precision=second" title="2013-10-15T10:13:33+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>8126</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-37">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:37" class="cnum">
      <a href="7866.html#comment:37">comment:37</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-15T11%3A57%3A58%2B01%3A00&amp;precision=second" title="2013-10-15T11:57:58+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Martyn Gigg</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-38">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:38" class="cnum">
      <a href="7866.html#comment:38">comment:38</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-15T12%3A19%3A56%2B01%3A00&amp;precision=second" title="2013-10-15T12:19:56+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
I have tested out the interface on Windows and things seems to work as suggested. I will also test on Linux.
</p>
<p>
I have a few comments about the code:
</p>
<ul><li>The file ICATSearch.cpp produces a Qt error in the console saying "Object::connect: No such slot ApplicationWindow::writeErrorToLogWindow(const QString&amp;)". This needs to be addressed.
</li><li>On line 127 of CatalogDownloadDataFiles.cpp there is a variable called "isisfile". Can we change this to something like filehandle or basically something that doesn't have isis in the name. This gives more confidence that we are not ISIS centric.
</li><li>The isDataFile() method in CatalogDownloadDataFiles needs to be more flexible. It should not simply be checking for extensions it should be looking at whether the stream is binary or not. My suggestion here is to change the name of &lt;code&gt;isDataFile&lt;/code&gt; to &lt;code&gt;isBinary&lt;/code&gt; and have it use the class in Kernel called FileDescriptor. This has a static method called 'isAscii' that takes a stream. I would suggest &lt;code&gt;isBinary&lt;/code&gt; simply return &lt;code&gt;!FileDescriptor::isAscii(strm)&lt;/code&gt;
</li><li>There is a slight inconsistency in parameter names between &lt;code&gt;init&lt;/code&gt; &amp; &lt;code&gt;exec&lt;/code&gt;. Can we make sure Filenames parameters are used consistently
</li><li>The code block
<pre class="wiki">ICatalog_sptr catalog;

      try
      {
        catalog = CatalogFactory::Instance().create(ConfigService::Instance().getFacility().catalogInfo().catalogName());

      }
      catch(Kernel::Exception::NotFoundError&amp;)
      {
        throwCatalogError();
      }

      if(!catalog)
      {
        throwCatalogError();
      }
</pre></li></ul><p>
is repeated alot across the ICAT algorithms. Can we have a common place for this? Or was this put into the maintenance ticket? 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-39">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:39" class="cnum">
      <a href="7866.html#comment:39">comment:39</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-15T13%3A10%3A25%2B01%3A00&amp;precision=second" title="2013-10-15T13:10:25+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
From my tests on Ubuntu it would seem that the Load button does not work. The download button correctly identifies the archive file location but the load button tries to use the windows path that is in the table.  
</p>

    </div>

              </div>
              <div class="change" id="trac-change-40">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:40" class="cnum">
      <a href="7866.html#comment:40">comment:40</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T16%3A00%3A50%2B01%3A00&amp;precision=second" title="2013-10-16T16:00:50+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Preventted QT slot errors from occuring. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/4888460b4e6403dd3774b544aaca7a7971590342" title="4888460b4e6403dd3774b544aaca7a7971590342">4888460b4e6403dd3774b544aaca7a7971590342</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-41">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:41" class="cnum">
      <a href="7866.html#comment:41">comment:41</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T16%3A00%3A50%2B01%3A00&amp;precision=second" title="2013-10-16T16:00:50+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Tidied up <tt>CatalogDownloadDataFiles</tt>. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<ul><li>Removed reference to ISIS.
</li><li>Made use of <tt>isAscii</tt> and removed method to <tt>isBinary</tt>.
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/0bd01239fd2fcfeeaa7f73e02a5dd58922706cf7" title="0bd01239fd2fcfeeaa7f73e02a5dd58922706cf7">0bd01239fd2fcfeeaa7f73e02a5dd58922706cf7</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-42">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:42" class="cnum">
      <a href="7866.html#comment:42">comment:42</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T16%3A00%3A50%2B01%3A00&amp;precision=second" title="2013-10-16T16:00:50+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Added ICAT3 load support. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<ul><li>Transformed the string to user-specific ICAT path, in order to directly load it from archives.
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/72f9466ff587a121dd970d26fb536c8b9f158e2d" title="72f9466ff587a121dd970d26fb536c8b9f158e2d">72f9466ff587a121dd970d26fb536c8b9f158e2d</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-43">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:43" class="cnum">
      <a href="7866.html#comment:43">comment:43</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T16%3A00%3A50%2B01%3A00&amp;precision=second" title="2013-10-16T16:00:50+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Fixed failing test. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<ul><li>If filename is invalid or does not exist then we want to return false.
</li></ul><p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/de367a5acf5093403db3d2753ed3c23409fe0b3b" title="de367a5acf5093403db3d2753ed3c23409fe0b3b">de367a5acf5093403db3d2753ed3c23409fe0b3b</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-44">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:44" class="cnum">
      <a href="7866.html#comment:44">comment:44</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T16%3A00%3A50%2B01%3A00&amp;precision=second" title="2013-10-16T16:00:50+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge branch 'feature/7866_icat_cross_platform_archive_download' into develop. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Conflicts:
</p>
<blockquote>
<p>
Code/Mantid/Framework/ICat/src/CatalogDownloadDataFiles.cpp
</p>
</blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/31b13d97232c45f568ba47873a3a3e77c1b9fa42" title="31b13d97232c45f568ba47873a3a3e77c1b9fa42">31b13d97232c45f568ba47873a3a3e77c1b9fa42</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-45">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:45" class="cnum">
      <a href="7866.html#comment:45">comment:45</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T16%3A10%3A33%2B01%3A00&amp;precision=second" title="2013-10-16T16:10:33+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
    <div class="comment searchable">
      
      <p>
Shared functionality and error handling across algorithms will be dealt with in another ticket during maintenance and will be encapsulated into an <tt>ICatAlgorithmHelper</tt> class.
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T16%3A13%3A15%2B01%3A00&amp;precision=second" title="2013-10-16T16:13:15+01:00 in Timeline">7 years</a> ago
                      by Jay Rainey
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7866?cversion=2&amp;cnum_hist=45#comment:45">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7866?action=comment-diff&amp;cnum=45&amp;version=3">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-46">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:46" class="cnum">
      <a href="7866.html#comment:46">comment:46</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T16%3A28%3A44%2B01%3A00&amp;precision=second" title="2013-10-16T16:28:44+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
When testing this ticket can you verify/invalidate <a class="closed ticket" href="7886.html" title="defect: Improve error handling within ICat (closed: fixed)">#7886</a> as it's related to the removal of <tt>writeErrorToLogWindow</tt> errors.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-47">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:47" class="cnum">
      <a href="7866.html#comment:47">comment:47</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-16T16%3A48%3A51%2B01%3A00&amp;precision=second" title="2013-10-16T16:48:51+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>3827</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
.
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-17T11%3A44%3A17%2B01%3A00&amp;precision=second" title="2013-10-17T11:44:17+01:00 in Timeline">7 years</a> ago
                      by Jay Rainey
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7866?cversion=0&amp;cnum_hist=47#comment:47">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7866?action=comment-diff&amp;cnum=47&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-48">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:48" class="cnum">
      <a href="7866.html#comment:48">comment:48</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-17T11%3A32%3A52%2B01%3A00&amp;precision=second" title="2013-10-17T11:32:52+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-49">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:49" class="cnum">
      <a href="7866.html#comment:49">comment:49</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-17T11%3A41%3A54%2B01%3A00&amp;precision=second" title="2013-10-17T11:41:54+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
The new implementation of isBinary is not correct. It needs to be changed to accept an istream object and then pass this to FileDescriptor::isAscii()
</p>
<p>
 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-50">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:50" class="cnum">
      <a href="7866.html#comment:50">comment:50</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-17T12%3A16%3A52%2B01%3A00&amp;precision=second" title="2013-10-17T12:16:52+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Improved isBinary method. Refs <a class="closed ticket" href="7866.html" title="task: Cross platform support for downloading archives (closed: fixed)">#7866</a>.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/5bca4fc028b2a7f0735a4417e50d56fb626739ba" title="5bca4fc028b2a7f0735a4417e50d56fb626739ba">5bca4fc028b2a7f0735a4417e50d56fb626739ba</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-51">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:51" class="cnum">
      <a href="7866.html#comment:51">comment:51</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-17T12%3A32%3A19%2B01%3A00&amp;precision=second" title="2013-10-17T12:32:19+01:00 in Timeline">7 years</a> ago by Jay Rainey
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-52">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:52" class="cnum">
      <a href="7866.html#comment:52">comment:52</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-17T13%3A05%3A23%2B01%3A00&amp;precision=second" title="2013-10-17T13:05:23+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-53">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:53" class="cnum">
      <a href="7866.html#comment:53">comment:53</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-17T13%3A07%3A58%2B01%3A00&amp;precision=second" title="2013-10-17T13:07:58+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
The loading functionality seems to work properly now on both Windows &amp; Linux. The download function does not work but this has already been noted and is covered by <a class="closed ticket" href="8144.html" title="enhancement: ICAT external download (closed: fixed)">#8144</a>.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-54">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:54" class="cnum">
      <a href="7866.html#comment:54">comment:54</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-10-17T13%3A08%3A12%2B01%3A00&amp;precision=second" title="2013-10-17T13:08:12+01:00 in Timeline">7 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/feature/7866_icat_cross_platform_archive_download'
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/28aee853d2539e08a43ae17be9709701786f398a"><span class="icon">â€‹</span>28aee853d2539e08a43ae17be9709701786f398a</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-55">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:55" class="cnum">
      <a href="7866.html#comment:55">comment:55</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A13%3A02%2B01%3A00&amp;precision=second" title="2015-06-04T02:13:02+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/8711"><span class="icon">â€‹</span>8711</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/mantid/pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/7866?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/7866?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/7866?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>