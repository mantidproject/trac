<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #6331 (eMake SCD integration method based on principal axes of 3D events near peak.)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="6330.html" title="Ticket #6330" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/6331?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/6331?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/6331?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="6332.html" title="Ticket #6332" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 6331, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="6330.html" title="Ticket #6330">Previous Ticket</a></span></li><li><span><a class="next" href="6332.html" title="Ticket #6332">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/6331.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="6331.html">Ticket #6331</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-19T23%3A03%3A32Z&amp;precision=second" title="2012-12-19T23:03:32Z in Timeline">8 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T01%3A09%3A27%2B01%3A00&amp;precision=second" title="2015-06-04T01:09:27+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">eMake SCD integration method based on principal axes of 3D events near peak.</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Dennis+Mikkelson">Dennis Mikkelson</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Dennis+Mikkelson">Dennis Mikkelson</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;2.4.html">Release 2.4</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Mantid">Mantid</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              petersonpf@…, mikkelsonr@…, pascal.manuel@…, owen.arnold@…, nick.draper@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span><a class="closed ticket" href="6476.html" title="Important Documentation">#6476</a></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Owen Arnold
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Integration of SCD peaks using spheres of fixed sizes has been fairly successful.  However, in case the peak shape is not spherical, it would be helpful to use a shape that somewhat adjusts to the actual peak shape.  In the case of event data, this can be done by:
</p>
<ol><li>Form lists of the events near each peak.
</li></ol><ol start="2"><li>Find the principal axes of that collection of events.
</li></ol><ol start="3"><li>Find the standard deviations of the collection of events in the directions of the principal axes.
</li></ol><ol start="4"><li>Find the net integrated intensity using ellipsoids with axes aligned with the principal axes of the events.  The size of the ellipsoids can be automatically set so the peak region extends +- three standard deviations in all directions.  In this case the background can be estimated from the events in an ellipsoidal shell around the peak region, with the same volume and "aspect ratio" as the peak region.  Alternatively, the user could specify a radius for the major axes of the ellipsoids, as is done for the spherical integration case, and the minor axes can be adjusted, based standard deviations in those directions, relative to the standard deviation in the direction of the major axis.
</li></ol>
    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="6331.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-20T04%3A35%3A45Z&amp;precision=second" title="2012-12-20T04:35:45Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331 Adding support class for 3D ellipsoid integration
</p>
<p>
This is a lower level class that does most of the work for 3D
event integration using ellipsoids aligned with the prinicipal
axes of the events near a peak.
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/2063a82b99e3bc2cda07286e1dcd1ac50d3e3c43" title="2063a82b99e3bc2cda07286e1dcd1ac50d3e3c43">2063a82b99e3bc2cda07286e1dcd1ac50d3e3c43</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="6331.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-20T05%3A08%3A18Z&amp;precision=second" title="2012-12-20T05:08:18Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331 Temporarily comment out test, breaks on Win7
</p>
<p>
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/f889affd3d6c20240fce2db18f895ecf37436d68" title="f889affd3d6c20240fce2db18f895ecf37436d68">f889affd3d6c20240fce2db18f895ecf37436d68</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="6331.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-20T08%3A37%3A37Z&amp;precision=second" title="2012-12-20T08:37:37Z in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
I believe Matthias Gutman has code that can do this kind of thing in his own program used for analysis of data from the SXD instrument. I believe his methodology involves walking out from the centroid of the peak in a spiral until a threshold intensity has been reached in each direction. I'm told by Pascal that he'd be happy to share knowledge with us on how he does this. Would this interest you Dennis?
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="6331.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-20T10%3A07%3A17Z&amp;precision=second" title="2012-12-20T10:07:17Z in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
One thing that also will need to be considered is that information about the shape of each ellipsoid will need to be written out to a PeaksWorkspace. Otherwise it will not be possible to visually represent each integration region around the peak.
</p>
<p>
Given that the ellipsoid is not the only possible general shape that we will wish to represent, we probably ought to add an xml column to the PeaksWorkspace to describe the geometry of each PeakShape. Martyn started looking at adding additional columns into a PeaksWorkspace, but at the time there was nothing extra to represent. Perhaps It would be best to ask him again, and stipulate that we want a hidden text column called 'Shape' into which the elipsoid shape xml can be written.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="6331.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-20T13%3A37%3A19Z&amp;precision=second" title="2012-12-20T13:37:19Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331, Adding DLLExport to class header to fix test
</p>
<p>
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/f733e22dc81f03b713b048c634ac86ecc66c83d3" title="f733e22dc81f03b713b048c634ac86ecc66c83d3">f733e22dc81f03b713b048c634ac86ecc66c83d3</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="6331.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-20T14%3A43%3A53Z&amp;precision=second" title="2012-12-20T14:43:53Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
I will modify the support class to save the ellipsoid axes directions and sizes for the last peak that was integrated, and add a method to get that information.  The algorithm that will use this class can then extract that information and add it to the peaks workspace for each peak that it integrates.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="6331.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-20T14%3A48%3A52Z&amp;precision=second" title="2012-12-20T14:48:52Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
The strategy used by Matthias Gutman would surely be of interest.  It may not quite fit within the current effort, since it would require histogrammed data (2D or 3D?) while the work I had in mind for this ticket was focused on 3D events in reciprocal space.  Dennis
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="6331.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-21T05%3A09%3A36Z&amp;precision=second" title="2012-12-21T05:09:36Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331,  Adding initial version of algorithm.
</p>
<p>
This is not yet complete and correct.
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/78c534601ae51314297c776ae471b6e3d8e629ff" title="78c534601ae51314297c776ae471b6e3d8e629ff">78c534601ae51314297c776ae471b6e3d8e629ff</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="6331.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-21T18%3A38%3A19Z&amp;precision=second" title="2012-12-21T18:38:19Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331,  Calculate UB from indexed peaks and Lab Q
</p>
<p>
For this to work from a PeaksWorkspace loaded from a file
we need to calculate a UB matrix.  We assume that the
file contains INDEXED peaks, and calculate the UB from
the indexes and Lab-Q vectors.  Un-indexed peaks still
need to be skipped.
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/913cfaa15911d5ff81162b24c6f7d6959d44cb60" title="913cfaa15911d5ff81162b24c6f7d6959d44cb60">913cfaa15911d5ff81162b24c6f7d6959d44cb60</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="6331.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-21T18%3A52%3A38Z&amp;precision=second" title="2012-12-21T18:52:38Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331  Adding call to boost iround
</p>
<p>
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/fee009cd5a64d9efdfca596eb75380f54506bac2" title="fee009cd5a64d9efdfca596eb75380f54506bac2">fee009cd5a64d9efdfca596eb75380f54506bac2</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="6331.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-21T19%3A06%3A08Z&amp;precision=second" title="2012-12-21T19:06:08Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331   Fix foolish typo in call to boost iround
</p>
<p>
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/39306e35f8bf2ae130404a1bc6d1649f17fc83c8" title="39306e35f8bf2ae130404a1bc6d1649f17fc83c8">39306e35f8bf2ae130404a1bc6d1649f17fc83c8</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="6331.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-27T18%3A51%3A35Z&amp;precision=second" title="2012-12-27T18:51:35Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331 Skip peaks that aren't indexed.
</p>
<p>
Basically complete and hopefully correct.  Still need to do
some more testing and make a test.
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/034c7a0e8445dec14c90e17c10c6e3ce5c37db3e" title="034c7a0e8445dec14c90e17c10c6e3ce5c37db3e">034c7a0e8445dec14c90e17c10c6e3ce5c37db3e</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="6331.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-31T01%3A52%3A28Z&amp;precision=second" title="2012-12-31T01:52:28Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331 Adding test for IntegrateEllipsoids algorithm
</p>
<p>
The test is currently commented out, since the test data file
is too large to add to github (28 MB).  Also removed a few
debug prints.
</p>
<p>
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/6894bf96b8cbd69cac7949d74c5bd95a09c17bba" title="6894bf96b8cbd69cac7949d74c5bd95a09c17bba">6894bf96b8cbd69cac7949d74c5bd95a09c17bba</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="6331.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2012-12-31T03%3A07%3A09Z&amp;precision=second" title="2012-12-31T03:07:09Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331 Adding WIKI documentation
</p>
<p>
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/5f1f3dd9bea9ba015656aa0ccd047e04588fd67a" title="5f1f3dd9bea9ba015656aa0ccd047e04588fd67a">5f1f3dd9bea9ba015656aa0ccd047e04588fd67a</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="6331.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-09T16%3A01%3A36Z&amp;precision=second" title="2013-01-09T16:01:36Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331 Adding support class for 3D ellipsoid integration
</p>
<p>
This is a lower level class that does most of the work for 3D
event integration using ellipsoids aligned with the prinicipal
axes of the events near a peak.
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ea905c480d009a5b543aab187ccfe8dfcfd22be0" title="ea905c480d009a5b543aab187ccfe8dfcfd22be0">ea905c480d009a5b543aab187ccfe8dfcfd22be0</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="6331.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-09T16%3A01%3A36Z&amp;precision=second" title="2013-01-09T16:01:36Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331 Temporarily comment out test, breaks on Win7
</p>
<p>
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/4bb840f53052af2c659b1d04ed3e6d52a22e07e8" title="4bb840f53052af2c659b1d04ed3e6d52a22e07e8">4bb840f53052af2c659b1d04ed3e6d52a22e07e8</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="6331.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-09T16%3A01%3A36Z&amp;precision=second" title="2013-01-09T16:01:36Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331, Adding DLLExport to class header to fix test
</p>
<p>
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/d7fdb8bb4e61f72949e521ed92bd3d960eca0adc" title="d7fdb8bb4e61f72949e521ed92bd3d960eca0adc">d7fdb8bb4e61f72949e521ed92bd3d960eca0adc</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="6331.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-09T16%3A01%3A38Z&amp;precision=second" title="2013-01-09T16:01:38Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331,  Adding initial version of algorithm.
</p>
<p>
This is not yet complete and correct.
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/7a792c1188020b3d56b2acb260760051f3c24939" title="7a792c1188020b3d56b2acb260760051f3c24939">7a792c1188020b3d56b2acb260760051f3c24939</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="6331.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-09T16%3A01%3A39Z&amp;precision=second" title="2013-01-09T16:01:39Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331,  Calculate UB from indexed peaks and Lab Q
</p>
<p>
For this to work from a PeaksWorkspace loaded from a file
we need to calculate a UB matrix.  We assume that the
file contains INDEXED peaks, and calculate the UB from
the indexes and Lab-Q vectors.  Un-indexed peaks still
need to be skipped.
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/e9f5e74f7c8a9fa10387324cc9290a3af4fe4a23" title="e9f5e74f7c8a9fa10387324cc9290a3af4fe4a23">e9f5e74f7c8a9fa10387324cc9290a3af4fe4a23</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="6331.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-09T16%3A01%3A39Z&amp;precision=second" title="2013-01-09T16:01:39Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331  Adding call to boost iround
</p>
<p>
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/fd82325068286b54bb817abc8f959c2a3f7590c7" title="fd82325068286b54bb817abc8f959c2a3f7590c7">fd82325068286b54bb817abc8f959c2a3f7590c7</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="6331.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-09T16%3A01%3A39Z&amp;precision=second" title="2013-01-09T16:01:39Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331   Fix foolish typo in call to boost iround
</p>
<p>
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/d072d8b9a36f334b580060cddb4801b9eeff3e52" title="d072d8b9a36f334b580060cddb4801b9eeff3e52">d072d8b9a36f334b580060cddb4801b9eeff3e52</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="6331.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-09T16%3A01%3A40Z&amp;precision=second" title="2013-01-09T16:01:40Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331 Skip peaks that aren't indexed.
</p>
<p>
Basically complete and hopefully correct.  Still need to do
some more testing and make a test.
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/07c729e617a9f9441968737f553e8162ef0bf380" title="07c729e617a9f9441968737f553e8162ef0bf380">07c729e617a9f9441968737f553e8162ef0bf380</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-23">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:23" class="cnum">
      <a href="6331.html#comment:23">comment:23</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-09T16%3A01%3A40Z&amp;precision=second" title="2013-01-09T16:01:40Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331 Adding test for IntegrateEllipsoids algorithm
</p>
<p>
The test is currently commented out, since the test data file
is too large to add to github (28 MB).  Also removed a few
debug prints.
</p>
<p>
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/d6809e7f9b9800a58dfbea8a0cdaf9127f02d8dd" title="d6809e7f9b9800a58dfbea8a0cdaf9127f02d8dd">d6809e7f9b9800a58dfbea8a0cdaf9127f02d8dd</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-24">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:24" class="cnum">
      <a href="6331.html#comment:24">comment:24</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-09T16%3A01%3A41Z&amp;precision=second" title="2013-01-09T16:01:41Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
    <div class="comment searchable">
      
      <p>
RE 6331 Adding WIKI documentation
</p>
<p>
refs <a class="closed ticket" href="6331.html" title="enhancement: eMake SCD integration method based on principal axes of 3D events near ... (closed: fixed)">#6331</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/a468047d5017cb03044db845057730902df1ad47" title="a468047d5017cb03044db845057730902df1ad47">a468047d5017cb03044db845057730902df1ad47</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-25">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:25" class="cnum">
      <a href="6331.html#comment:25">comment:25</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-23T17%3A25%3A57Z&amp;precision=second" title="2013-01-23T17:25:57Z in Timeline">8 years</a> ago by Dennis Mikkelson
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
The algorithm is complete and the unit test for the complete algorithm passes in approximately 10 sec on my system with the test data file.  Unfortunately, while the test data file for the algorithm has been cut down to 4 MB, that is still too large to commit to github, so the unit test for the algorithm has been commented out from the cmake file.  A unit test for the lower level calculation code IS included in Integrate3DEventsTest.h. This lower level test just uses a small number of synthesized events.  The test for the complete algorithm performs a more complete end-to-end test using a subset of actual data from TOPAZ.  If the 4 MB test file can be added to git, the complete algorithm test can be included.  
</p>

    </div>

              </div>
              <div class="change" id="trac-change-26">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:26" class="cnum">
      <a href="6331.html#comment:26">comment:26</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-28T15%3A47%3A04Z&amp;precision=second" title="2013-01-28T15:47:04Z in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Owen Arnold</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-27">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:27" class="cnum">
      <a href="6331.html#comment:27">comment:27</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-29T14%3A05%3A47Z&amp;precision=second" title="2013-01-29T14:05:47Z in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>6476</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-28">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:28" class="cnum">
      <a href="6331.html#comment:28">comment:28</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-01-29T14%3A07%3A21Z&amp;precision=second" title="2013-01-29T14:07:21Z in Timeline">8 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
The outputs of this algorithm seem sensible and intensities look to be in the right order of magnitude. It would be very nice to hook this up to the PeaksViewer in the SliceViewer so that we can see each ellipsoid (but that's a future improvement for me to do).
</p>
<p>
Although the algorithm seems to be working, I've created an urgent ticket to get documentation in place. A diagram showing how the ellipsoid is constructed w.r.t input parameters would be particularly useful.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-29">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:29" class="cnum">
      <a href="6331.html#comment:29">comment:29</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T01%3A09%3A27%2B01%3A00&amp;precision=second" title="2015-06-04T01:09:27+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/7177"><span class="icon">​</span>7177</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/6331?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/6331?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/6331?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>