<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #10332 (ConvertTo MD does not update EI attached to PreprocessedDetectorsWorkspace)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="10331.html" title="Ticket #10331" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10332?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10332?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10332?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="10333.html" title="Ticket #10333" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 10332, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="10331.html" title="Ticket #10331">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="10333.html" title="Ticket #10333">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="10332.html">Ticket #10332</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-09T14%3A04%3A43%2B01%3A00&amp;precision=second" title="2014-10-09T14:04:43+01:00 in Timeline">6 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T03%3A54%3A16%2B01%3A00&amp;precision=second" title="2015-06-04T03:54:16+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">ConvertTo MD does not update EI attached to PreprocessedDetectorsWorkspace</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Alex+Buts">Alex Buts</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Alex+Buts">Alex Buts</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;3.3.html">Release 3.3</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Framework">Framework</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              helen.c.walker@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Federico M Pouzols
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
As described in the letter from the instrument scientist, preprocessedDetectorWorkspace does not work propertly and this is the the reason for that. 
</p>
<p>
Should be fixed. 
</p>
<p>
===
OK, I think I have found my problem. I am using BuildSQW_FePS3.py to generate sqw files for two different energy runs. From the 75 meV data I am looking at hplots, and from the 32 meV data kplots. The problem comes if I start off looking at one, and making the necessary plots, and then just run the script again for the other energy data set, WITHOUT first deleting the workspace preprDetMER. As long as I remember to delete this workspace in between running the scripts, then it would appear that everything works just fine.
</p>
<p>
 
</p>
<p>
Sorry, it should have occurred to me that this might present a problem, but it could cause difficulties for others in the future, because they, like me, might assume that this workspace would be rewritten each time the script was run.
</p>
<p>
 
</p>
<p>
Best wishes,
</p>
<p>
Helen
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="10332.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-13T13%3A16%3A51%2B01%3A00&amp;precision=second" title="2014-10-13T13:16:51+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10332.html" title="ConvertTo MD does not update EI attached to PreprocessedDetectorsWorkspace (closed: fixed)">#10332</a> This should fix it.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/959eee237ae7693bfb1804b8f4ae53bd3ab05ef2" title="959eee237ae7693bfb1804b8f4ae53bd3ab05ef2">959eee237ae7693bfb1804b8f4ae53bd3ab05ef2</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="10332.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-13T16%3A30%3A32%2B01%3A00&amp;precision=second" title="2014-10-13T16:30:32+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>assigned</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
the script below will run in current Mantid and will produce 3 absolutely identical workspaces. This is wrong. 
</p>
<p>
After the patch applied, it will produce two workspaces (fail on the md2db), and  md2c is very different from md2da. 
</p>
<pre class="wiki">redWS = CreateSimulationWorkspace(Instrument='MAR',BinParams=[-10,0.1,20],UnitX='DeltaE')
AddSampleLog(redWS,LogName='Ei',LogText='12.',LogType='Number');
md2a=ConvertToMD(InputWorkspace=redWS,QDimensions='|Q|',dEAnalysisMode='Direct',MinValues=[0,-10],MaxValues=[8,20],SplitInto='200,200')

try:
	redWS1 = CreateSimulationWorkspace(Instrument='MAR',BinParams=[-10,0.1,20],UnitX='DeltaE')
	#AddSampleLog(redWS,LogName='Ei',LogText='100.',LogType='Number');
	md2b=ConvertToMD(InputWorkspace=redWS1,QDimensions='|Q|',dEAnalysisMode='Direct',MinValues=[0,-10],MaxValues=[8,20],SplitInto='200,200')
except:
	print " Can not produce md2d workspace"


#redWS1 = CreateSimulationWorkspace(Instrument='MAR',BinParams=[-10,0.1,20],UnitX='DeltaE')
AddSampleLog(redWS,LogName='Ei',LogText='100.',LogType='Number');
md2c=ConvertToMD(InputWorkspace=redWS,QDimensions='|Q|',dEAnalysisMode='Direct',MinValues=[0,-10],MaxValues=[8,20],SplitInto='200,200')


</pre>
    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-14T15%3A18%3A58%2B01%3A00&amp;precision=second" title="2014-10-14T15:18:58+01:00 in Timeline">6 years</a> ago
                      by Alex Buts
                    (<a href="https://trac.mantidproject.org/mantid/ticket/10332?cversion=1&amp;cnum_hist=2#comment:2">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/10332?action=comment-diff&amp;cnum=2&amp;version=2">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="10332.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-13T16%3A30%3A41%2B01%3A00&amp;precision=second" title="2014-10-13T16:30:41+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>assigned</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="10332.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-13T17%3A07%3A03%2B01%3A00&amp;precision=second" title="2014-10-13T17:07:03+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10332.html" title="ConvertTo MD does not update EI attached to PreprocessedDetectorsWorkspace (closed: fixed)">#10332</a> Allow incident energy to be defined as eFixed log name
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/f36f3ad3d88b4800e71c3d106e465de44ba47035" title="f36f3ad3d88b4800e71c3d106e465de44ba47035">f36f3ad3d88b4800e71c3d106e465de44ba47035</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="10332.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-13T17%3A38%3A49%2B01%3A00&amp;precision=second" title="2014-10-13T17:38:49+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10332.html" title="ConvertTo MD does not update EI attached to PreprocessedDetectorsWorkspace (closed: fixed)">#10332</a> Allow different spelling for eFixed
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/c58c25b5803352e62aa8a4ddfcc5584c83604a05" title="c58c25b5803352e62aa8a4ddfcc5584c83604a05">c58c25b5803352e62aa8a4ddfcc5584c83604a05</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="10332.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-13T17%3A38%3A49%2B01%3A00&amp;precision=second" title="2014-10-13T17:38:49+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10332.html" title="ConvertTo MD does not update EI attached to PreprocessedDetectorsWorkspace (closed: fixed)">#10332</a> Test failure if Ei is not defined on source workspace
</p>
<p>
Always fail in direct or indirect mode.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/041b9000ccd443fbf0ef459b4edf05896d926b37" title="041b9000ccd443fbf0ef459b4edf05896d926b37">041b9000ccd443fbf0ef459b4edf05896d926b37</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="10332.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-13T17%3A42%3A42%2B01%3A00&amp;precision=second" title="2014-10-13T17:42:42+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10332.html" title="ConvertTo MD does not update EI attached to PreprocessedDetectorsWorkspace (closed: fixed)">#10332</a> Fix min-max which now correctly changed
</p>
<p>
(the previous values were related to 60mEv incident energy (Shame!)
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/addd9b9a849c34450b60244f37cfd06f030e2fa9" title="addd9b9a849c34450b60244f37cfd06f030e2fa9">addd9b9a849c34450b60244f37cfd06f030e2fa9</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="10332.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-13T18%3A11%3A59%2B01%3A00&amp;precision=second" title="2014-10-13T18:11:59+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10332.html" title="ConvertTo MD does not update EI attached to PreprocessedDetectorsWorkspace (closed: fixed)">#10332</a> Remove unnecessary check in indirect mode
</p>
<p>
As indirect instrument would not easily change
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/85569c2d992b0977898dc266f4b6fe1eac68cbc2" title="85569c2d992b0977898dc266f4b6fe1eac68cbc2">85569c2d992b0977898dc266f4b6fe1eac68cbc2</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="10332.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-13T19%3A17%3A16%2B01%3A00&amp;precision=second" title="2014-10-13T19:17:16+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10332.html" title="ConvertTo MD does not update EI attached to PreprocessedDetectorsWorkspace (closed: fixed)">#10332</a> Should fix MergeMD doctest
</p>
<p>
it was producing incorrect results!!!
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/aa8e31ccde0f65f781e0f683914b89688dc9a1ae" title="aa8e31ccde0f65f781e0f683914b89688dc9a1ae">aa8e31ccde0f65f781e0f683914b89688dc9a1ae</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="10332.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-14T15%3A23%3A32%2B01%3A00&amp;precision=second" title="2014-10-14T15:23:32+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
I think, changes to the code are easy to understand as I am updating Ei attached to Preprocessed detectors' workspace from source workspace each time the algorithm is run.
</p>
<p>
As the result, the calculations fail (see script above) when Ei is not attached to the source workspace and different energy do produce different scattering patterns for the same energy transfer results. 
</p>
<p>
Tester may compare the results with updated energy with the results when preprocessed detectors workspace is not generated at all ("-" for preprocessed detector's workspace name) and verify that these results are identical to the one obtained in the case when incident energy is updated. 
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-14T15%3A26%3A26%2B01%3A00&amp;precision=second" title="2014-10-14T15:26:26+01:00 in Timeline">6 years</a> ago
                      by Alex Buts
                    (<a href="https://trac.mantidproject.org/mantid/ticket/10332?cversion=0&amp;cnum_hist=10#comment:10">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/10332?action=comment-diff&amp;cnum=10&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="10332.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T10%3A08%3A43Z&amp;precision=second" title="2014-10-31T10:08:43Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Federico M Pouzols</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="10332.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T11%3A42%3A46Z&amp;precision=second" title="2014-10-31T11:42:46Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
All looks fine. The new code checks error conditions and provides informative error messages. I verified that:
</p>
<ul><li>in current Mantid, three workspaces are created when you run the script provided in the 2nd comment: md2a, md2b, md2c, all of them apparently identical
</li></ul><ul><li>after changes, md2b is not created, the try/except block shows an error message. md2c is created and is now different from md2a
</li></ul><ul><li>If I forget to specify 'Input neutron's energy', I get a ValueError exception with informative message
</li></ul><ul><li>different repetitions seems to produce identical output workspaces
</li></ul><ul><li>tests and doc-tests pass (the rst expected output has been updated)
</li></ul>
    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="10332.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-10-31T11%3A43%3A17Z&amp;precision=second" title="2014-10-31T11:43:17Z in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/bugfix/10332_updateEi'
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/cb55e79c1ab4e0ff4365c76a5590eab843aa7386"><span class="icon">​</span>cb55e79c1ab4e0ff4365c76a5590eab843aa7386</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="10332.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T03%3A54%3A16%2B01%3A00&amp;precision=second" title="2015-06-04T03:54:16+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/11174"><span class="icon">​</span>11174</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10332?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10332?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10332?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>