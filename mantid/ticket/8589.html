<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #8589 (Transmission Workflow Algorithm)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="8588.html" title="Ticket #8588" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8589?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8589?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/8589?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="8590.html" title="Ticket #8590" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 8589, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="8588.html" title="Ticket #8588">Previous Ticket</a></span></li><li><span><a class="next" href="8590.html" title="Ticket #8590">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/8589.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="8589.html">Ticket #8589</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-10T16%3A02%3A27Z&amp;precision=second" title="2013-12-10T16:02:27Z in Timeline">7 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A43%3A00%2B01%3A00&amp;precision=second" title="2015-06-04T02:43:00+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Transmission Workflow Algorithm</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Owen+Arnold">Owen Arnold</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Owen+Arnold">Owen Arnold</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=critical">critical</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;3.1.html">Release 3.1</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Reflectometry">Reflectometry</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span><a class="closed ticket" href="8616.html" title="CreateTransmissionWorkspaceAuto">#8616</a></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Peter Parker
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
There is a lack of flexibility in the current quick script (and also now <a class="closed ticket" href="8371.html" title="enhancement: Quick to Algorithms (closed: fixed)">#8371</a>) that the users don't like. Essentially the generation and normalisation of transmission runs is hard-coded. The algorithms/scripts both make and use the Transmission runs. It would be better to separate out the building of the Transmission runs from their usage. This would also collapse the existing ReflectometryReductionOne algorithm down by quite a bit. 
</p>
<ul><li>Create a new CreateTransmissionCorrection workflow algorithm. Fortunately, I knew that this work would be upon us so most of the Transmission Correction functionality is in a stand-alone method. Things like toLam may make a base algorithm.
</li><li>Make ReflectometryReductionOne use CreateTransmissionCorrection
</li><li>If the workspace 'FirstTransmissionRun' appears to be in units of wavelength. Assume that it has already been reduced and just use it as the denominator in the normalisation step. Otherwise if it's in TOF, run the TransmissionCorrection procedures. Otherwise, fall over and die (loudly).
</li></ul>
    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="8589.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T10%3A08%3A27Z&amp;precision=second" title="2013-12-13T10:08:27Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8589.html" title="enhancement: Transmission Workflow Algorithm (closed: fixed)">#8589</a>. Template for new algorithm and tests.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/e2128e7236d3895d17933187fdb438e7b54dd3a2" title="e2128e7236d3895d17933187fdb438e7b54dd3a2">e2128e7236d3895d17933187fdb438e7b54dd3a2</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="8589.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T10%3A08%3A27Z&amp;precision=second" title="2013-12-13T10:08:27Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8589.html" title="enhancement: Transmission Workflow Algorithm (closed: fixed)">#8589</a>. Create a base algorithm class.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8843ff2e46b881957c3513790828f336974364e4" title="8843ff2e46b881957c3513790828f336974364e4">8843ff2e46b881957c3513790828f336974364e4</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="8589.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T10%3A08%3A27Z&amp;precision=second" title="2013-12-13T10:08:27Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8589.html" title="enhancement: Transmission Workflow Algorithm (closed: fixed)">#8589</a>. Move common toLam to base class.
</p>
<p>
Move and make adjustments to ensure that everything is still working and that tests still pass.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/fbb8721407a278f229c12e8b8ce7671a7a9f4bc8" title="fbb8721407a278f229c12e8b8ce7671a7a9f4bc8">fbb8721407a278f229c12e8b8ce7671a7a9f4bc8</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="8589.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T10%3A08%3A27Z&amp;precision=second" title="2013-12-13T10:08:27Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8589.html" title="enhancement: Transmission Workflow Algorithm (closed: fixed)">#8589</a>. Move existing functions into base class.
</p>
<p>
Will still need to do some work around these yet.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/5340581d1e4681256d642002280b95473e84bdd7" title="5340581d1e4681256d642002280b95473e84bdd7">5340581d1e4681256d642002280b95473e84bdd7</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="8589.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T10%3A08%3A28Z&amp;precision=second" title="2013-12-13T10:08:28Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8589.html" title="enhancement: Transmission Workflow Algorithm (closed: fixed)">#8589</a>. Move transmission correction code into base class.
</p>
<p>
More work will need to be done here because we yet need to separate out the making from the utilisation parts in order for this to be useful to both Correction and Reduction algorithms which use it.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/bcc2ae5d4c86faa9f3bab71e240915a6bcbce1e6" title="bcc2ae5d4c86faa9f3bab71e240915a6bcbce1e6">bcc2ae5d4c86faa9f3bab71e240915a6bcbce1e6</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="8589.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T10%3A08%3A28Z&amp;precision=second" title="2013-12-13T10:08:28Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8589.html" title="enhancement: Transmission Workflow Algorithm (closed: fixed)">#8589</a>. Separate make transmission method.
</p>
<p>
This method is used by current transmission run method, can also be used by Correction algorithm separately.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/9833ce578e81d1a6f11ed7d1effd34b88cf772fe" title="9833ce578e81d1a6f11ed7d1effd34b88cf772fe">9833ce578e81d1a6f11ed7d1effd34b88cf772fe</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="8589.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T10%3A08%3A28Z&amp;precision=second" title="2013-12-13T10:08:28Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8589.html" title="enhancement: Transmission Workflow Algorithm (closed: fixed)">#8589</a>. Check spectrum numbers of input trans workspaces.
</p>
<p>
Add unit tests to demonstrate happy-paths for the CreateTransmissionWorkspace alg.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/c0035476bdc925d568cc4a38a51ca779ca79782d" title="c0035476bdc925d568cc4a38a51ca779ca79782d">c0035476bdc925d568cc4a38a51ca779ca79782d</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="8589.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T10%3A08%3A28Z&amp;precision=second" title="2013-12-13T10:08:28Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8589.html" title="enhancement: Transmission Workflow Algorithm (closed: fixed)">#8589</a>. Move trans corr to utilising algorithm class.
</p>
<p>
The bit that is actually applying the trans corr is not required in the base class.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/ae7bab4351315de14b3a03dffade074e6e625e0a" title="ae7bab4351315de14b3a03dffade074e6e625e0a">ae7bab4351315de14b3a03dffade074e6e625e0a</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="8589.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T10%3A08%3A28Z&amp;precision=second" title="2013-12-13T10:08:28Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8589.html" title="enhancement: Transmission Workflow Algorithm (closed: fixed)">#8589</a>. Call make transmission via algorithm.
</p>
<p>
This is a better strategy particularly when nested histories become possible.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/6f05e9ce12f01cc740fdfbc403f8af7a91a78ad2" title="6f05e9ce12f01cc740fdfbc403f8af7a91a78ad2">6f05e9ce12f01cc740fdfbc403f8af7a91a78ad2</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="8589.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T10%3A08%3A28Z&amp;precision=second" title="2013-12-13T10:08:28Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8589.html" title="enhancement: Transmission Workflow Algorithm (closed: fixed)">#8589</a>. Make transmission runs not needed on base.
</p>
<p>
Make transmission runs can be private to the creation algorithm now that the workflow algorithm is calling the creational algorithm rather than using a shared method on the base class.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/e63d50f4cf3a9590d31fca12cd37ca51d4227bbb" title="e63d50f4cf3a9590d31fca12cd37ca51d4227bbb">e63d50f4cf3a9590d31fca12cd37ca51d4227bbb</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="8589.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T10%3A08%3A28Z&amp;precision=second" title="2013-12-13T10:08:28Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8589.html" title="enhancement: Transmission Workflow Algorithm (closed: fixed)">#8589</a>. Use rather than make transmission workspaces.
</p>
<p>
Use rather than make a transmission workspace if the units are in wavelength.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/772363c95337f00ef53729b5d829d304b4f445d0" title="772363c95337f00ef53729b5d829d304b4f445d0">772363c95337f00ef53729b5d829d304b4f445d0</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="8589.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T10%3A08%3A28Z&amp;precision=second" title="2013-12-13T10:08:28Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8589.html" title="enhancement: Transmission Workflow Algorithm (closed: fixed)">#8589</a>. Remove unused test files.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/19f56949194af1749d233e189fb49d4a69a59dee" title="19f56949194af1749d233e189fb49d4a69a59dee">19f56949194af1749d233e189fb49d4a69a59dee</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="8589.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T10%3A08%3A29Z&amp;precision=second" title="2013-12-13T10:08:29Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8589.html" title="enhancement: Transmission Workflow Algorithm (closed: fixed)">#8589</a>. Improve documentation where possible.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/d05a1240d3c2bdbb71a533609d3990a18ffcb93c" title="d05a1240d3c2bdbb71a533609d3990a18ffcb93c">d05a1240d3c2bdbb71a533609d3990a18ffcb93c</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="8589.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T11%3A18%3A15Z&amp;precision=second" title="2013-12-13T11:18:15Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="8589.html" title="enhancement: Transmission Workflow Algorithm (closed: fixed)">#8589</a>. Bad property names.
</p>
<p>
Stitching is actually happening with workspaces in wavelength not in Q. Parameter names and documentation needs to reflect this.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/fe9ac6f1f913b5ce9c075658a205f0b6c95809c1" title="fe9ac6f1f913b5ce9c075658a205f0b6c95809c1">fe9ac6f1f913b5ce9c075658a205f0b6c95809c1</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="8589.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T11%3A24%3A11Z&amp;precision=second" title="2013-12-13T11:24:11Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Tester. The algorithms now achieve all of the above stated aims. The following script shows this. With one run of ReflectometryReductionOne, we allow it to process and utilise the raw transmission runs. For the second run of the algorithm, we run Create TransmissionWorkspace first, and then pass that result in as the FirstTransmissionRun. The plot shows that the results are identical.
</p>
<div class="code"><pre><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">isis_reflectometry</span> <span class="kn">import</span> quick
<span class="nb">reload</span><span class="p">(</span>quick<span class="p">)</span>

<span class="k">class</span> <span class="nc">ReflectometryQuick</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  
    <span class="k">def</span> <span class="nf">runTest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        defaultInstKey <span class="o">=</span> <span class="s">'default.instrument'</span>
        defaultInstrument <span class="o">=</span> config<span class="p">[</span>defaultInstKey<span class="p">]</span>
        
        config<span class="p">[</span>defaultInstKey<span class="p">]</span> <span class="o">=</span> <span class="s">'INTER'</span>
        LoadISISNexus<span class="p">(</span>Filename<span class="o">=</span><span class="s">'13463'</span><span class="p">,</span> OutputWorkspace<span class="o">=</span><span class="s">'13463'</span><span class="p">)</span>
        LoadISISNexus<span class="p">(</span>Filename<span class="o">=</span><span class="s">'13464'</span><span class="p">,</span> OutputWorkspace<span class="o">=</span><span class="s">'13464'</span><span class="p">)</span>
        LoadISISNexus<span class="p">(</span>Filename<span class="o">=</span><span class="s">'13460'</span><span class="p">,</span> OutputWorkspace<span class="o">=</span><span class="s">'13460'</span><span class="p">)</span>
    
        transmissionRuns <span class="o">=</span> <span class="s">'13463,13464'</span>
        runNo <span class="o">=</span> <span class="s">'13460'</span>
        incidentAngle <span class="o">=</span> <span class="mf">0.7</span>
        quick<span class="o">.</span>quick<span class="p">(</span>runNo<span class="p">,</span> trans<span class="o">=</span>transmissionRuns<span class="p">)</span> 

        config<span class="p">[</span>defaultInstKey<span class="p">]</span> <span class="o">=</span> defaultInstrument
        
        <span class="c"># Existing behaviour all-in-one Reflectometry Reduction and Transmission correction.</span>
        new_IvsQ1<span class="p">,</span> new_IvsLam1<span class="p">,</span> thetaOut1 <span class="o">=</span> ReflectometryReductionOne<span class="p">(</span>InputWorkspace<span class="o">=</span><span class="s">'13460'</span><span class="p">,</span> WavelengthMin<span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> WavelengthMax<span class="o">=</span><span class="mf">17.0</span><span class="p">,</span> WavelengthStep<span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> MonitorBackgroundWavelengthMin<span class="o">=</span><span class="mf">15.0</span><span class="p">,</span> 
        MonitorBackgroundWavelengthMax<span class="o">=</span><span class="mf">17.0</span><span class="p">,</span> I0MonitorIndex<span class="o">=</span><span class="mi">2</span><span class="p">,</span> MonitorIntegrationWavelengthMin<span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> MonitorIntegrationWavelengthMax<span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> WorkspaceIndexList<span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> Params<span class="o">=</span><span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">17</span><span class="p">],</span> 
        StartOverlap<span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> EndOverlap<span class="o">=</span><span class="mf">12.0</span><span class="p">,</span> FirstTransmissionRun<span class="o">=</span><span class="s">'13463'</span><span class="p">,</span> SecondTransmissionRun<span class="o">=</span><span class="s">'13464'</span><span class="p">)</span>
        

        <span class="c"># Separately compute the transmission run.</span>
        transmission <span class="o">=</span> CreateTransmissionWorkspace<span class="p">(</span>WavelengthMin<span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> WavelengthMax<span class="o">=</span><span class="mf">17.0</span><span class="p">,</span> WavelengthStep<span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> MonitorBackgroundWavelengthMin<span class="o">=</span><span class="mf">15.0</span><span class="p">,</span> 
        MonitorBackgroundWavelengthMax<span class="o">=</span><span class="mf">17.0</span><span class="p">,</span> I0MonitorIndex<span class="o">=</span><span class="mi">2</span><span class="p">,</span> MonitorIntegrationWavelengthMin<span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> MonitorIntegrationWavelengthMax<span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> 
        WorkspaceIndexList<span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> Params<span class="o">=</span><span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">17</span><span class="p">],</span> StartOverlap<span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> EndOverlap<span class="o">=</span><span class="mf">12.0</span><span class="p">,</span> FirstTransmissionRun<span class="o">=</span><span class="s">'13463'</span><span class="p">,</span> SecondTransmissionRun<span class="o">=</span><span class="s">'13464'</span><span class="p">)</span>
        

        <span class="c"># Pass the transmission run into ReflectometryReductionOne.</span>
        new_IvsQ2<span class="p">,</span> new_IvsLam2<span class="p">,</span> thetaOut2 <span class="o">=</span> ReflectometryReductionOne<span class="p">(</span>InputWorkspace<span class="o">=</span><span class="s">'13460'</span><span class="p">,</span> WavelengthMin<span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> WavelengthMax<span class="o">=</span><span class="mf">17.0</span><span class="p">,</span> WavelengthStep<span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> MonitorBackgroundWavelengthMin<span class="o">=</span><span class="mf">15.0</span><span class="p">,</span> 
        MonitorBackgroundWavelengthMax<span class="o">=</span><span class="mf">17.0</span><span class="p">,</span> I0MonitorIndex<span class="o">=</span><span class="mi">2</span><span class="p">,</span> MonitorIntegrationWavelengthMin<span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> MonitorIntegrationWavelengthMax<span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> WorkspaceIndexList<span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> 
        FirstTransmissionRun<span class="o">=</span>transmission<span class="p">)</span>
        
        plotSpectrum<span class="p">([</span>new_IvsLam1<span class="p">,</span> new_IvsLam2<span class="p">,</span> <span class="s">'13460_IvsLam'</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        plotSpectrum<span class="p">([</span>new_IvsQ1<span class="p">,</span> new_IvsQ2<span class="p">,</span> <span class="s">'13460_IvsQ'</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        
        
test <span class="o">=</span> ReflectometryQuick<span class="p">()</span>
test<span class="o">.</span>runTest<span class="p">()</span>
</pre></div>
    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="8589.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T11%3A24%3A37Z&amp;precision=second" title="2013-12-13T11:24:37Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>Backlog</em> to <em>Release 3.1</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="8589.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-13T11%3A32%3A21Z&amp;precision=second" title="2013-12-13T11:32:21Z in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>8616</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="8589.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-16T08%3A41%3A57Z&amp;precision=second" title="2013-12-16T08:41:57Z in Timeline">7 years</a> ago by Peter Parker
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Peter Parker</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="8589.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-12-16T09%3A09%3A43Z&amp;precision=second" title="2013-12-16T09:09:43Z in Timeline">7 years</a> ago by Peter Parker
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/feature/8589_transmission_workflow'
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/0c00f6ec424d77546b604829a284ec6a65bd2b05"><span class="icon">​</span>0c00f6ec424d77546b604829a284ec6a65bd2b05</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="8589.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T02%3A43%3A00%2B01%3A00&amp;precision=second" title="2015-06-04T02:43:00+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/9433"><span class="icon">​</span>9433</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/mantid/pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8589?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8589?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/8589?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>