<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #9502 (Issues with ConvertToMD)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="9501.html" title="Ticket #9501" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/9502?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/9502?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/9502?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="9503.html" title="Ticket #9503" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 9502, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="9501.html" title="Ticket #9501">Previous Ticket</a></span></li><li><span><a class="next" href="9503.html" title="Ticket #9503">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/9502.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="9502.html">Ticket #9502</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-05-21T09%3A39%3A40%2B01%3A00&amp;precision=second" title="2014-05-21T09:39:40+01:00 in Timeline">6 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T03%3A20%3A55%2B01%3A00&amp;precision=second" title="2015-06-04T03:20:55+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Issues with ConvertToMD</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Owen+Arnold">Owen Arnold</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Alex+Buts">Alex Buts</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=critical">critical</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;3.2.html">Release 3.2</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Diffraction">Diffraction</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              martyn.gigg@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span><a class="closed ticket" href="8026.html" title="ConvertToMD fails when it should not">#8026</a></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Martyn Gigg
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Pascal is unable to run the new version of ConvertToMD on his data. The old version ConvertToMDHistoWorkspace (version 1) works.
</p>
<p>
This could just be down to an over-eager check in run.cpp.  In which case, perhaps it should be removed. See email chain below.
</p>
<p>
We need Pascal to provide the run number and parameters so that the issue can be checked and verified before closing.
</p>
<pre class="wiki">From: Gigg, Martyn (Tessella,RAL,ISIS)
Sent: 21 May 2014 9:38 AM
To: Arnold, Owen (Tessella,RAL,ISIS); Buts, Alex (STFC,RAL,ISIS); Manuel, Pascal (STFC,RAL,ISIS)
Subject: RE: ConvertTODiffractionMDWorkspace

You’re correct in that it suggests the first X value is larger than the last X value.
 
I guess in actual fact we don’t really need to check binning of the input data. It just may behave not quite as expected later in some places. I would say that we should just remove the check for start being less than end and leave them stored exactly as they are I the Run object. I don’t think we should sort them internally as I think that should be done on the input workspace beforehand if necessary.
 
Martyn
 
From: Arnold, Owen (Tessella,RAL,ISIS) 
Sent: 21 May 2014 09:26
To: Buts, Alex (STFC,RAL,ISIS); Manuel, Pascal (STFC,RAL,ISIS)
Cc: Gigg, Martyn (Tessella,RAL,ISIS)
Subject: Re: ConvertTODiffractionMDWorkspace
 
I've cc'd Martyn as he seems to be the last author of the code on the run side of things (the bit that is throwing an exception).
 
It seems to be indicating that the x-binning for your input workspace is not running from lowest to highest. 
 
Martyn: Is this a necessary restriction? Presumably the data could internally be reordered, but this would be a large performance hit.
 
Owen.
 
From: Alex Buts &lt;Alex.Buts@stfc.ac.uk&gt;
Date: Wednesday, 21 May 2014 09:05
To: Owen Arnold &lt;owen.arnold@stfc.ac.uk&gt;, "Manuel, Pascal (STFC,RAL,ISIS)" &lt;pascal.manuel@stfc.ac.uk&gt;
Subject: Re: ConvertTODiffractionMDWorkspace
 
Hi, everybody,

I believe this comes from external piece of code, responsible for copying run into into target MD workspace. 

namely:
371 void ConvertToMD::copyMetaData(API::IMDEventWorkspace_sptr mdEventWS, MDEvents::MDWSDescription &amp;targWSDescr) const
{ ....
 
383      const MantidVec &amp; binBoundaries = m_InWS2D-&gt;readX(0);
.....
 
401       ExperimentInfo_sptr expt = mdEventWS-&gt;getExperimentInfo(i);
402       expt-&gt;mutableRun().storeHistogramBinBoundaries(binBoundaries);
 ....
}
 
Either somebody changed something in Run class (I do not know who and why), or input workspace have strange binning. The later explains why it has not been caught by unit tests. Normal debugging information. 


Regards,
Alex




On 21/05/2014 08:36, Arnold, Owen (Tessella,RAL,ISIS) wrote:
Hi Pascal,
 
I've included Alex in this discussion as he developed the new ConvertToMD algorithm, and will know much better what the cause of the problem is here. 
 
Regarding the BinMD issue,  I'll have a look into what's causing that. My impression from your screen hot is that it's down to the way that the slice viewer has chosen the limits.
 
Regards,
Owen.
 
 
From: &lt;Manuel&gt;, STFC &lt;Pascal&gt;, &lt;RAL&gt;, "ISIS)" &lt;pascal.manuel@stfc.ac.uk&gt;
Date: Tuesday, 20 May 2014 17:40
To: Owen Arnold &lt;owen.arnold@stfc.ac.uk&gt;
Subject: RE: ConvertTODiffractionMDWorkspace
 
There are some issues with on the fly rebinning too.
See attached.
 
From: Manuel, Pascal (STFC,RAL,ISIS)
Sent: 20 May 2014 5:26 PM
To: Arnold, Owen (Tessella,RAL,ISIS)
Subject: RE: ConvertTODiffractionMDWorkspace

Found out what it is, we still have to use version 1 (can this be changed asap please, we have been told it would be) and have it in tof (the error message you get is non sensical and there is no reason why it does not do the conversion itself anyway).

From: Manuel, Pascal (STFC,RAL,ISIS)
Sent: 20 May 2014 4:07 PM
To: Arnold, Owen (Tessella,RAL,ISIS)
Subject: ConvertTODiffractionMDWorkspace

Hi Owen,

Do you know if this has been touched again recently ? 
I am getting some garbage about energy bins, see below
ConvertToDiffractionMDWorkspace started
Error in execution of algorithm ConvertToMD:
Run::storeEnergyBinBoundaries - Inconsistent start &amp; end values given, size=4452. Cannot interpret values as bin boundaries.
Error in execution of algorithm ConvertToDiffractionMDWorkspace:
Run::storeEnergyBinBoundaries - Inconsistent start &amp; end values given, size=4452. Cannot interpret values as bin boundaries.

thanks,

P
</pre>
    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="9502.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-05-21T11%3A00%3A53%2B01%3A00&amp;precision=second" title="2014-05-21T11:00:53+01:00 in Timeline">6 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>assigned</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="9502.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-03T14%3A31%3A44%2B01%3A00&amp;precision=second" title="2014-06-03T14:31:44+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>assigned</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="9502.html" title="enhancement: Issues with ConvertToMD (closed: fixed)">#9502</a> Spelling errors.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/c0ad6e51878c11622bfba55d8757092c0caff452" title="c0ad6e51878c11622bfba55d8757092c0caff452">c0ad6e51878c11622bfba55d8757092c0caff452</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="9502.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-03T14%3A59%3A39%2B01%3A00&amp;precision=second" title="2014-06-03T14:59:39+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="9502.html" title="enhancement: Issues with ConvertToMD (closed: fixed)">#9502</a> Methods used to get access to ConvertToMD unit conversion
</p>
<p>
and verify if this converter actually doing something (converting units)
</p>
<p>
and some more spelling errors.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b7f917a5b486fad4e26dde783ba9937739ebcc1d" title="b7f917a5b486fad4e26dde783ba9937739ebcc1d">b7f917a5b486fad4e26dde783ba9937739ebcc1d</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="9502.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-03T15%3A02%3A22%2B01%3A00&amp;precision=second" title="2014-06-03T15:02:22+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
this small script illustrates the error
</p>
<pre class="wiki">######################################################################
#Python Script Generated by GeneratePythonScript Algorithm
######################################################################
Load(Filename=r'D:\Data\Mantid_Testing\14_05_22\WISH00028146.nxs',OutputWorkspace='WISH00028146')
#SetUB(Workspace='WISH00028146',a='5.2999999999999998',b='5.2999999999999998',c='5.2999999999999998',u='0,0,1',v='1,0,0',UB='3.816,8.8727,3.8214,0.4641,-6.3844,6.9728,9.3564,-3.5997,-3.2275')
SetUB(Workspace='WISH00028146',a='5.2999999999999998',b='5.2999999999999998',c='5.2999999999999998',u='0,0,1',v='1,0,0',UB='0.04624,0.0150542,0.0872731,0.0675183,-0.0486321,-0.0251251,0.0587435,0.0978839,-0.0288133')
ConvertUnits(InputWorkspace='WISH00028146',OutputWorkspace='WISH00028146d',Target='dSpacing')
ConvertToDiffractionMDWorkspace(InputWorkspace='WISH00028146d',OutputWorkspace='WISH00028146MD',OneEventPerBin='0',OutputDimensions='HKL')


</pre>
    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="9502.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-03T17%3A44%3A10%2B01%3A00&amp;precision=second" title="2014-06-03T17:44:10+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="9502.html" title="enhancement: Issues with ConvertToMD (closed: fixed)">#9502</a> This should fix it (subj to unit tests &amp; all done properly)
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/02ef65c7cd9e07a6965507e19327c63b01fe3501" title="02ef65c7cd9e07a6965507e19327c63b01fe3501">02ef65c7cd9e07a6965507e19327c63b01fe3501</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="9502.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-03T19%3A25%3A02%2B01%3A00&amp;precision=second" title="2014-06-03T19:25:02+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="9502.html" title="enhancement: Issues with ConvertToMD (closed: fixed)">#9502</a> Fixed isConverted method in Units conversion helper
</p>
<p>
+ target ws pointer transferred as shared_ptr
+ fixed unit test
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/fc060e4178cd0ba0abc900b0de9995d2b3383662" title="fc060e4178cd0ba0abc900b0de9995d2b3383662">fc060e4178cd0ba0abc900b0de9995d2b3383662</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="9502.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-04T11%3A18%3A35%2B01%3A00&amp;precision=second" title="2014-06-04T11:18:35+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="9502.html" title="enhancement: Issues with ConvertToMD (closed: fixed)">#9502</a> piece of code which selects non-monitor spectra as the
</p>
<p>
source of the bin boundaries
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/7016c0816cacaf210a700c99bf3b53b3ff839c1e" title="7016c0816cacaf210a700c99bf3b53b3ff839c1e">7016c0816cacaf210a700c99bf3b53b3ff839c1e</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="9502.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-04T11%3A27%3A42%2B01%3A00&amp;precision=second" title="2014-06-04T11:27:42+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="9502.html" title="enhancement: Issues with ConvertToMD (closed: fixed)">#9502</a> Added lost retrieve bin boundary statement.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b404c369af978265e7caabaa5c9bf86098b96ab4" title="b404c369af978265e7caabaa5c9bf86098b96ab4">b404c369af978265e7caabaa5c9bf86098b96ab4</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="9502.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-04T11%3A50%3A45%2B01%3A00&amp;precision=second" title="2014-06-04T11:50:45+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="9502.html" title="enhancement: Issues with ConvertToMD (closed: fixed)">#9502</a> Merge branch 'master' into bugfix/9502_ConvToMDIssues
</p>
<p>
(fixing wiki changes)
</p>
<p>
Conflicts:
</p>
<blockquote>
<p>
Code/Mantid/Framework/MDAlgorithms/src/ConvertToMD.cpp
</p>
</blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/92539abf3a0dac50ab6bd861eb5a0e4dddfdcdb3" title="92539abf3a0dac50ab6bd861eb5a0e4dddfdcdb3">92539abf3a0dac50ab6bd861eb5a0e4dddfdcdb3</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="9502.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-04T12%3A57%3A01%2B01%3A00&amp;precision=second" title="2014-06-04T12:57:01+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="9502.html" title="enhancement: Issues with ConvertToMD (closed: fixed)">#9502</a> fixing unit test for bin boundaries
</p>
<p>
(which now have changed to correct values)
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/23d7e9860ff8b03c3256b226c6da702b27163e56" title="23d7e9860ff8b03c3256b226c6da702b27163e56">23d7e9860ff8b03c3256b226c6da702b27163e56</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="9502.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-04T13%3A49%3A40%2B01%3A00&amp;precision=second" title="2014-06-04T13:49:40+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="9502.html" title="enhancement: Issues with ConvertToMD (closed: fixed)">#9502</a> Returning to previous (incorrect) behavior
</p>
<p>
for event workspace bin boundaries, which should fix live listener test though
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/32ad087aa94eee743a017f58105a5cce85a30260" title="32ad087aa94eee743a017f58105a5cce85a30260">32ad087aa94eee743a017f58105a5cce85a30260</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="9502.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-04T14%3A58%3A17%2B01%3A00&amp;precision=second" title="2014-06-04T14:58:17+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li><li>
      <strong>Blocked By</strong>
        <em>8026</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Should be tested after <a class="closed ticket" href="8026.html" title="defect: ConvertToMD fails when it should not (closed)">#8026</a> only as the branch originates from there. 
</p>
<p>
The reason for error are incorrect or incorrectly arranged bin boundaries. I believe I've fixed the logic and the problem for a histogram workspace but for event workspace it is unclear what to do so, just programming errors are fixed and correct logic remains unclear. 
</p>
<p>
To test one can run test script I supplied above to reproduce problem and check that the conversion runs smoothly after this ticket is applied. One can use smaller/different file from WISH00028146 -- I verified the script reproduces error using MARI11001.raw from test folder. 
</p>
<p>
The error should disappear after the ticket has been applied. 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="9502.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-04T15%3A19%3A28%2B01%3A00&amp;precision=second" title="2014-06-04T15:19:28+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="9502.html" title="enhancement: Issues with ConvertToMD (closed: fixed)">#9502</a> minor comments
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/9135d1c0e12772afbc2ec63e313b0a590fe7986b" title="9135d1c0e12772afbc2ec63e313b0a590fe7986b">9135d1c0e12772afbc2ec63e313b0a590fe7986b</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="9502.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-25T09%3A43%3A55%2B01%3A00&amp;precision=second" title="2014-06-25T09:43:55+01:00 in Timeline">6 years</a> ago by Martyn Gigg
                </h3>
                
    <div class="comment searchable">
      
      <p>
Restoring pre-commit hook that has been deleted accidentally.
</p>
<p>
Refs <a class="closed ticket" href="9502.html" title="enhancement: Issues with ConvertToMD (closed: fixed)">#9502</a>
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/345232612c070608f54bc564eca5395cf738dfd0" title="345232612c070608f54bc564eca5395cf738dfd0">345232612c070608f54bc564eca5395cf738dfd0</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="9502.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-25T09%3A44%3A17%2B01%3A00&amp;precision=second" title="2014-06-25T09:44:17+01:00 in Timeline">6 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Martyn Gigg</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="9502.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-06-25T11%3A20%3A11%2B01%3A00&amp;precision=second" title="2014-06-25T11:20:11+01:00 in Timeline">6 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/bugfix/9502_ConvToMDIssues'
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/94d2e658c2e2509fbf365f03f91303901d148561"><span class="icon">​</span>94d2e658c2e2509fbf365f03f91303901d148561</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="9502.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T03%3A20%3A55%2B01%3A00&amp;precision=second" title="2015-06-04T03:20:55+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/10345"><span class="icon">​</span>10345</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/9502?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/9502?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/9502?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>