<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #7310 (Make SliceViewer use PeaksInRegion)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="7309.html" title="Ticket #7309" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/7310?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/7310?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/7310?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="7311.html" title="Ticket #7311" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 7310, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="7309.html" title="Ticket #7309">Previous Ticket</a></span></li><li><span><a class="next" href="7311.html" title="Ticket #7311">Next Ticket</a> &rarr;</span></li><li class="last"><a href="../depgraph/7310.html">Depgraph</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="7310.html">Ticket #7310</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-18T14%3A20%3A05%2B01%3A00&amp;precision=second" title="2013-06-18T14:20:05+01:00 in Timeline">7 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T01%3A50%3A02%2B01%3A00&amp;precision=second" title="2015-06-04T01:50:02+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Make SliceViewer use PeaksInRegion</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Owen+Arnold">Owen Arnold</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Owen+Arnold">Owen Arnold</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;2.6.html">Release 2.6</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Diffraction">Diffraction</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              petersonpf@…
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span><a class="closed ticket" href="7233.html" title="Identify Peaks in Region">#7233</a>, <a class="closed ticket" href="7281.html" title="Experiment with 1:1 ConcretePeaksPresenter to QWidget">#7281</a></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Peter Peterson
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
      <span class="lastmod" title="2013-07-24 15:51:21.594215+00:00">
        (last modified by Nick Draper)
        (<a href="https://trac.mantidproject.org/mantid/ticket/7310?action=diff&amp;version=11">diff</a>)
      </span>
    </h3>
    <div class="searchable">
      <p>
This work will combine <a class="closed ticket" href="7233.html" title="enhancement: Identify Peaks in Region (closed: fixed)">#7233</a> with <a class="closed ticket" href="7281.html" title="enhancement: Experiment with 1:1 ConcretePeaksPresenter to QWidget (closed: fixed)">#7281</a>. Major benefit will be to reduce the complexity of the SliceViewer code. The algorithm PeaksInRegion performs the majority of it's work in a multi-threaded fashion. Peformance tests indicate that it can process 40 000 peaks in a fraction of a second. 
</p>
<p>
There is also another reason to use PeaksInRegion, since the current calculations still calculate and daw peak positions that are outside the viewing region, as long as they are on the slice plane. This is unnecessary, and something that PeaksInRegion can already properly handle. 
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="7310.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-18T14%3A38%3A34%2B01%3A00&amp;precision=second" title="2013-06-18T14:38:34+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="7310.html" title="enhancement: Make SliceViewer use PeaksInRegion (closed: fixed)">#7310</a>. SliceViewer now uses PeaksInRegion.
</p>
<p>
Additional work required to PeakTransform, PeakBoundingBox and PeakTransform to get this to work.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/50113ea7a9e6ee74d5f52e5190aebb624f6dfebd" title="50113ea7a9e6ee74d5f52e5190aebb624f6dfebd">50113ea7a9e6ee74d5f52e5190aebb624f6dfebd</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="7310.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-18T15%3A10%3A06%2B01%3A00&amp;precision=second" title="2013-06-18T15:10:06+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="7310.html" title="enhancement: Make SliceViewer use PeaksInRegion (closed: fixed)">#7310</a>. Fix test.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/3d07ec2d6dcf7773ebbac4c427c1189d005c73ef" title="3d07ec2d6dcf7773ebbac4c427c1189d005c73ef">3d07ec2d6dcf7773ebbac4c427c1189d005c73ef</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="7310.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-18T16%3A23%3A32%2B01%3A00&amp;precision=second" title="2013-06-18T16:23:32+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="7310.html" title="enhancement: Make SliceViewer use PeaksInRegion (closed: fixed)">#7310</a>. Fix warnings. Fix test on windows.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/e870c933fb8e9d0abf6fff7eba901cf7111fafb8" title="e870c933fb8e9d0abf6fff7eba901cf7111fafb8">e870c933fb8e9d0abf6fff7eba901cf7111fafb8</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="7310.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-18T16%3A57%3A35%2B01%3A00&amp;precision=second" title="2013-06-18T16:57:35+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
Tester: <strong>Please test ALL the areas described below.</strong>
</p>
<p>
Setup: Download the last nightly build of Mantid from Master and install it then open it. This is to be used as a reference. At the same time checkout/merge this branch using the normal <em>git test start 7310</em>  type routine and build it in Release. You must do both. Once complete open both versions of MantidPlot (remember which one is which). In both, run the script mantid\Code\Mantid\scripts\Vates\Diffraction_Workflow.py up to the end of step1. This will create three workspaces <strong>LabQ</strong> and <strong>PeaksLattice</strong> and <strong>PeaksLattice_Integrated</strong> for you to use during testing of this feature.
</p>
<ul><li>Do both look the same when plotting PeaksLattice peaks.
</li><li>Try re-ordering the axis on both using the X, Y, Z buttons. Should look the same.
</li><li>Does the peak zooming feature (click on peak) in table work the same for both?
</li><li>Try moving the sliders on both. Both should reprocess the view about as quickly and display the same result.
</li><li>Try plotting spherical integrated peaks using PeaksLattice_Integrated in both
</li><li>Try enabling show background on the integrated peaks. Should work the same for both.
</li><li>Try changing the foreground and background colours on the integrated peaks in both.
</li></ul><p>
For a performance check. Load the Mandi peaks file associated with <a class="closed ticket" href="7217.html" title="task: SliceViewer raster image performance issues (closed: fixed)">#7217</a> as it has many peaks. Display this on both SliceViewer instances. Zoom to the same peak on both, and then use the sliders to slice through the peaks. Performance should be similar for both.
</p>
<p>
Note: If you set the log level to debug, you will be able to see the SliceViewer running PeaksInRegion in the background.
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-19T09%3A53%3A05%2B01%3A00&amp;precision=second" title="2013-06-19T09:53:05+01:00 in Timeline">7 years</a> ago
                      by Owen Arnold
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7310?cversion=1&amp;cnum_hist=4#comment:4">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/7310?action=comment-diff&amp;cnum=4&amp;version=2">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="7310.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-19T09%3A42%3A01%2B01%3A00&amp;precision=second" title="2013-06-19T09:42:01+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="7310.html" title="enhancement: Make SliceViewer use PeaksInRegion (closed: fixed)">#7310</a>. Fix bug and add additional tests.
</p>
<p>
Tests added which will fail in the PeakTransform names get out of sync with the options on the PeaksInRegion algorithm.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/711a64d62a87965fbbdd1a3e48c3174a062876c0" title="711a64d62a87965fbbdd1a3e48c3174a062876c0">711a64d62a87965fbbdd1a3e48c3174a062876c0</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="7310.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-19T09%3A54%3A32%2B01%3A00&amp;precision=second" title="2013-06-19T09:54:32+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="7310.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-19T09%3A55%3A31%2B01%3A00&amp;precision=second" title="2013-06-19T09:55:31+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Cc</strong>
        <em>petersonpf@…</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="7310.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-19T09%3A55%3A41%2B01%3A00&amp;precision=second" title="2013-06-19T09:55:41+01:00 in Timeline">7 years</a> ago by Owen Arnold
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>accepted</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="7310.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-19T13%3A22%3A05%2B01%3A00&amp;precision=second" title="2013-06-19T13:22:05+01:00 in Timeline">7 years</a> ago by Peter Peterson
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Peter Peterson</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="7310.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-06-19T21%3A33%3A21%2B01%3A00&amp;precision=second" title="2013-06-19T21:33:21+01:00 in Timeline">7 years</a> ago by Peter Peterson
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="7310.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2013-07-24T16%3A51%3A21%2B01%3A00&amp;precision=second" title="2013-07-24T16:51:21+01:00 in Timeline">7 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Component</strong>
        changed from <em>VATES</em> to <em>Diffraction</em>
    </li><li>
      <strong>Description</strong>
        modified (<a href="https://trac.mantidproject.org/mantid/ticket/7310?action=diff&amp;version=11">diff</a>)
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="7310.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T01%3A50%3A02%2B01%3A00&amp;precision=second" title="2015-06-04T01:50:02+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/8156"><span class="icon">​</span>8156</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/7310?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/7310?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/7310?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>