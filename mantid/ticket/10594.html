<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #10594 (Error in old refl gui when processing polref runs)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="10593.html" title="Ticket #10593" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10594?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10594?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10594?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="10595.html" title="Ticket #10595" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 10594, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="10593.html" title="Ticket #10593">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="10595.html" title="Ticket #10595">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="10594.html">Ticket #10594</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-19T14%3A40%3A09Z&amp;precision=second" title="2014-11-19T14:40:09Z in Timeline">6 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T04%3A03%3A36%2B01%3A00&amp;precision=second" title="2015-06-04T04:03:36+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">Error in old refl gui when processing polref runs</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Harry+Jeffery">Harry Jeffery</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Harry+Jeffery">Harry Jeffery</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=blocker">blocker</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;3.3.html">Release 3.3</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Reflectometry">Reflectometry</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Federico M Pouzols
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
From Max: Just tried some Polref data (run 12379 with 12 378 as transmission run) and got the following:
</p>
<pre class="wiki">Traceback (most recent call last):
File "C:/MantidInstall/scripts/Interface\ui\reflectometer\refl_gui.py", line 745, in _process
theta, qmin, qmax, wlam, wq = self._do_run(runno[i], row, i)
File "C:/MantidInstall/scripts/Interface\ui\reflectometer\refl_gui.py", line 931, in _do_run
if mtd.doesExist(transrun_named) and mtd[transrun_named].getAxis(0).getUnit().unitID() == "Wavelength":
AttributeError: 'WorkspaceGroup' object has no attribute 'getAxis'
Traceback (most recent call last):
File "C:/MantidInstall/scripts/Interface\ui\reflectometer\refl_gui.py", line 745, in _process
theta, qmin, qmax, wlam, wq = self._do_run(runno[i], row, i)
File "C:/MantidInstall/scripts/Interface\ui\reflectometer\refl_gui.py", line 987, in _do_run
inst = wq.getInstrument()
AttributeError: 'WorkspaceGroup' object has no attribute 'getInstrument'
</pre>
    </div>
  </div>
</div>
          
    <div id="attachments">
        <h2 class="foldable">Attachments</h2>
        <div>
          <dl class="attachments">
              <dt>
    <a href="../attachment/ticket/10594/spectrum4_old_gui.png.html" title="View attachment">spectrum4_old_gui.png</a><a href="../raw-attachment/ticket/10594/spectrum4_old_gui.png" class="trac-rawlink" title="Download">​</a>
       (<span title="20289 bytes">19.8 KB</span>) -
      added by <em>Federico M Pouzols</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-25T12%3A16%3A41Z&amp;precision=second" title="2014-11-25T12:16:41Z in Timeline">6 years</a> ago.
  </dt>
              <dd>
                Spectrum 4 with old GUI
              </dd>
              <dt>
    <a href="../attachment/ticket/10594/spectrum4_new_gui.png.html" title="View attachment">spectrum4_new_gui.png</a><a href="../raw-attachment/ticket/10594/spectrum4_new_gui.png" class="trac-rawlink" title="Download">​</a>
       (<span title="15096 bytes">14.7 KB</span>) -
      added by <em>Federico M Pouzols</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-25T12%3A17%3A29Z&amp;precision=second" title="2014-11-25T12:17:29Z in Timeline">6 years</a> ago.
  </dt>
              <dd>
                Spectrum 4 with new GUI
              </dd>
              <dt>
    <a href="../attachment/ticket/10594/old_gui_logarithmic.png.html" title="View attachment">old_gui_logarithmic.png</a><a href="../raw-attachment/ticket/10594/old_gui_logarithmic.png" class="trac-rawlink" title="Download">​</a>
       (<span title="37767 bytes">36.9 KB</span>) -
      added by <em>Harry Jeffery</em> <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-26T10%3A15%3A08Z&amp;precision=second" title="2014-11-26T10:15:08Z in Timeline">6 years</a> ago.
  </dt>
          </dl>
          
        </div>
    </div>

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="10594.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-19T16%3A53%3A44Z&amp;precision=second" title="2014-11-19T16:53:44Z in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>assigned</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="10594.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-19T16%3A53%3A47Z&amp;precision=second" title="2014-11-19T16:53:47Z in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>assigned</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="10594.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-20T09%3A53%3A27Z&amp;precision=second" title="2014-11-20T09:53:27Z in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="10594.html" title="Error in old refl gui when processing polref runs (closed: fixed)">#10594</a> Fix workspace group access
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/e1758eab054b31a15a321a14e36e0c9c84bc212a" title="e1758eab054b31a15a321a14e36e0c9c84bc212a">e1758eab054b31a15a321a14e36e0c9c84bc212a</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="10594.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-20T09%3A53%3A27Z&amp;precision=second" title="2014-11-20T09:53:27Z in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="10594.html" title="Error in old refl gui when processing polref runs (closed: fixed)">#10594</a> Unroll algorithm execution on groups
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/dbbbbbfe3ccbf1a80b823653d59b2aa4cfcfdcab" title="dbbbbbfe3ccbf1a80b823653d59b2aa4cfcfdcab">dbbbbbfe3ccbf1a80b823653d59b2aa4cfcfdcab</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="10594.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-20T09%3A53%3A27Z&amp;precision=second" title="2014-11-20T09:53:27Z in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="10594.html" title="Error in old refl gui when processing polref runs (closed: fixed)">#10594</a> Handle WorkspaceGroups better
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/eca9e5a364a8d0fd121e827b0e43f89a60977d6d" title="eca9e5a364a8d0fd121e827b0e43f89a60977d6d">eca9e5a364a8d0fd121e827b0e43f89a60977d6d</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="10594.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-20T11%3A05%3A04Z&amp;precision=second" title="2014-11-20T11:05:04Z in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="10594.html" title="Error in old refl gui when processing polref runs (closed: fixed)">#10594</a> Handle group workspaces in new Refl UI
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/416accb0faeaf154e5334aef6dfeb7810f3472bd" title="416accb0faeaf154e5334aef6dfeb7810f3472bd">416accb0faeaf154e5334aef6dfeb7810f3472bd</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="10594.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-20T11%3A05%3A04Z&amp;precision=second" title="2014-11-20T11:05:04Z in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="10594.html" title="Error in old refl gui when processing polref runs (closed: fixed)">#10594</a> Fall back on ReflectometryReductionOne to calculate theta
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/64ebf9725b79344072c2ed155ba4eb3f47220c8f" title="64ebf9725b79344072c2ed155ba4eb3f47220c8f">64ebf9725b79344072c2ed155ba4eb3f47220c8f</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="10594.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-20T11%3A14%3A07Z&amp;precision=second" title="2014-11-20T11:14:07Z in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="10594.html" title="Error in old refl gui when processing polref runs (closed: fixed)">#10594</a> Correct handling of transmission runs
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/958d2af983591d1985f3696a4bb7e06da588eb10" title="958d2af983591d1985f3696a4bb7e06da588eb10">958d2af983591d1985f3696a4bb7e06da588eb10</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="10594.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-20T20%3A40%3A55Z&amp;precision=second" title="2014-11-20T20:40:55Z in Timeline">6 years</a> ago by Owen Arnold
                </h3>
                
    <div class="comment searchable">
      
      <p>
I've had a deep look into this. Here are things that should be checked and fixed as part of this ticket.
</p>
<p>
0) With the Branch in it's current state. The mantid doesn't shutdown properly. If you get to the point that CalculateResolution is complaining about not being able to calculate dq/q. It looks like CalculateResolution hasn't completed according to the algorithm status, and it isn't allowing me to close Mantid without forcing it. This may be a problem around group processing. See (1) before looking for a fix to this, as your fix for (1) may fix this too.
</p>
<p>
1) CalculateResolution is processing a group and returning a double param in the same way that ReflectometryReductionOne was. Make this more robust around group processing.
</p>
<p>
2) Length of angle check in refl_gui is bad. What if i wanted to just enter an integer say 1. see line 947.
</p>
<p>
3) When looking for theta log values. The gui should check for stheta, as well as theta. And if those are not found, look for twotheta and divide by two. This should be coded nicely of course, pehapse a list of possible a map of values to query as well as a transformation, say *0.5 or *1.
</p>
<p>
4) I'm not sure whether caching results in the TOF group is a good idea from group workspaces like the POLREF ones you have been using. Best case is that they just get reloaded again because groups can only exist at one level. Please check.
</p>
<p>
5) Both GUIs should work the same and produce the same results, but for the moment, the dq/q will HAVE to be specified owning to another error (see below).
</p>
<hr />
<p>
Other problems I found. Not for us to fix.
</p>
<p>
6) The SpecularReflectionCalculateTheta is failing because it relies on the point detector and sample positions being set correctly. This is done well for inter by using log values to specify the z-position of the point detector. However POLREFS idf is broken in this regard. It refers to the theta log, which never gets written, so the offset in z is zero, and theta is therefore calculated to be zero (which is why everything else breaks).
</p>
<p>
7) Even if you provide theta, CalculateResolution does not work, because the beam divergence equation relies of there being a vertical offset between the slits. This instrument parameter does not exist for POLREF, and I don't know what log parameter to hook it up to.
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-21T08%3A01%3A32Z&amp;precision=second" title="2014-11-21T08:01:32Z in Timeline">6 years</a> ago
                      by Owen Arnold
                    (<a href="https://trac.mantidproject.org/mantid/ticket/10594?cversion=0&amp;cnum_hist=9#comment:9">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/10594?action=comment-diff&amp;cnum=9&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="10594.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-21T10%3A28%3A20Z&amp;precision=second" title="2014-11-21T10:28:20Z in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="10594.html" title="Error in old refl gui when processing polref runs (closed: fixed)">#10594</a> Fix angle length check in refl_gui
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/40770ac050c2255f9d713bdbf1f2d3d415d5de26" title="40770ac050c2255f9d713bdbf1f2d3d415d5de26">40770ac050c2255f9d713bdbf1f2d3d415d5de26</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="10594.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-21T10%3A28%3A20Z&amp;precision=second" title="2014-11-21T10:28:20Z in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="10594.html" title="Error in old refl gui when processing polref runs (closed: fixed)">#10594</a> refl_gui should not give CalcRes workspace groups
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/9f4b306ff95d8410ccd812529728ff93e10e67c6" title="9f4b306ff95d8410ccd812529728ff93e10e67c6">9f4b306ff95d8410ccd812529728ff93e10e67c6</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="10594.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-21T10%3A28%3A20Z&amp;precision=second" title="2014-11-21T10:28:20Z in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Refs <a class="closed ticket" href="10594.html" title="Error in old refl gui when processing polref runs (closed: fixed)">#10594</a> Don't put group workspaces in a TOF group
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/07617162b2eb513377abb4eb24d289d0712a70b5" title="07617162b2eb513377abb4eb24d289d0712a70b5">07617162b2eb513377abb4eb24d289d0712a70b5</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="10594.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-21T10%3A41%3A55Z&amp;precision=second" title="2014-11-21T10:41:55Z in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
<strong>Testing</strong>
</p>
<p>
In both the old and new UI:
</p>
<ul><li>Attempt to process sample run <tt>POLREF00012379</tt> with transmission run <tt>POLREF0001378</tt>.
<ul><li>It will fail. Theta cannot be automatically determined, nor can the resolution (dQ/Q).
</li></ul></li><li>Enter a value for dQ/Q (0.04 is sensible).
</li><li>Attempt to process again
<ul><li>It will succeed, but Theta will be calculated as 0.
<ul><li>0 is incorrect, but for reasons unrelated to this ticket
</li></ul></li></ul></li><li>Enter a value for theta of your own choosing (0.1 -&gt; 2.5 is a sensible range)
</li><li>Attempt to process again
<ul><li>It should succeed
</li></ul></li></ul><p>
To reproduce the never-ending CalculateResolution execution, in the old UI:
</p>
<ul><li>Attempt to process sample run <tt>POLREF00012379</tt> with transmission run <tt>POLREF0001378</tt>, and theta = <tt>0.7</tt>
</li></ul><p>
To confirm both UI's produce the same output:
</p>
<ul><li>In the old UI process sample run <tt>POLREF00012379</tt> with transmission run <tt>POLREF0001378</tt>, theta = <tt>0.7</tt>, and resolution = <tt>0.04</tt>
</li><li>Rename <tt>12349_IvsQ</tt> to <tt>old_ivsq</tt>
</li><li>Delete all other workspaces
</li><li>In the new UI process sample run <tt>POLREF00012379</tt> with transmission run <tt>POLREF0001378</tt>, theta = <tt>0.7</tt>, and resolution = <tt>0.04</tt>
</li><li>Plot spectra 4 of <tt>IvsQ_12349</tt> and <tt>old_ivsq</tt> together. They should be identical.
<ul><li>Beware that there will be two lines visible, one for each period, but both workspaces should have the same two periods each.
</li></ul></li></ul>
    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="10594.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-25T09%3A48%3A46Z&amp;precision=second" title="2014-11-25T09:48:46Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Federico M Pouzols</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-25T12%3A16%3A41Z&amp;precision=second" title="2014-11-25T12:16:41Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/10594/spectrum4_old_gui.png.html"><em>spectrum4_old_gui.png</em></a><a href="../raw-attachment/ticket/10594/spectrum4_old_gui.png" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Spectrum 4 with old GUI
</p>

    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-25T12%3A17%3A29Z&amp;precision=second" title="2014-11-25T12:17:29Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/10594/spectrum4_new_gui.png.html"><em>spectrum4_new_gui.png</em></a><a href="../raw-attachment/ticket/10594/spectrum4_new_gui.png" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Spectrum 4 with new GUI
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="10594.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-25T12%3A18%3A32Z&amp;precision=second" title="2014-11-25T12:18:32Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
I followed the instructions and I got the expected errors. But in the end I don't get the same results with the old and new GUIs. When I set dQ/q to 0.04 and angle to 0.5 what I get from PlotSpectrum (spectrum 4 of the IvsQ workspace) is the attached plots. Maybe I'm missing a step or parameter?
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="10594.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-26T10%3A14%3A52Z&amp;precision=second" title="2014-11-26T10:14:52Z in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
    <div class="comment searchable">
      
      <p>
Looks like you may have missed the transmission run when processing in the old gui.
</p>
<p>
Also, it's worth right-clicking on the plot, and selecting <em>Axes-&gt;Log(x),Log(y)</em>, as the results are logarithmic they'll show up much better that way. They should look like <tt>old_gui_logarithmic.png</tt>
</p>

    </div>

              </div>
              <div class="change">
                <h3 class="change">
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-26T10%3A15%3A08Z&amp;precision=second" title="2014-11-26T10:15:08Z in Timeline">6 years</a> ago by Harry Jeffery
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Attachment</strong>
        <a href="../attachment/ticket/10594/old_gui_logarithmic.png.html"><em>old_gui_logarithmic.png</em></a><a href="../raw-attachment/ticket/10594/old_gui_logarithmic.png" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="10594.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-26T10%3A25%3A59Z&amp;precision=second" title="2014-11-26T10:25:59Z in Timeline">6 years</a> ago by Federico M Pouzols
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Oh sorry, I was putting the transmission run number in the wrong place! Now they look identical.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="10594.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-11-26T10%3A26%3A14Z&amp;precision=second" title="2014-11-26T10:26:14Z in Timeline">6 years</a> ago by Federico Montesino Pouzols
                </h3>
                
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/feature/10594_refl_gui_processing_polref_error'
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/d289cb7b7cb96d910afdf85c2432a1ae7d6480e4"><span class="icon">​</span>d289cb7b7cb96d910afdf85c2432a1ae7d6480e4</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="10594.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T04%3A03%3A36%2B01%3A00&amp;precision=second" title="2015-06-04T04:03:36+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/11436"><span class="icon">​</span>11436</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10594?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10594?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10594?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>