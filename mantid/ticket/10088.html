<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      #10088 (LoadISISNexus with partial spectra loading does not assign correct monitors to loaded spectra)
     – Mantid Project
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="../search.html" />
        <link rel="prev" href="10087.html" title="Ticket #10087" />
        <link rel="last" href="11888.html" title="Ticket #11888" />
        <link rel="help" href="../wiki/TracGuide.html" />
        <link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10088?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10088?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="alternate" href="https://trac.mantidproject.org/mantid/ticket/10088?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" />
        <link rel="next" href="10089.html" title="Ticket #10089" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="1.html" title="Ticket #1" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../search/opensearch" title="Search Mantid Project" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="a82fe30e7bef2e30fd2838e9";
    </script>
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/babel.js"></script><script type="text/javascript" src="../chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="../chrome/common/js/folding.js"></script><script type="text/javascript" src="../chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="../chrome/common/js/resizer.js"></script><script type="text/javascript" src="../chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/mantid/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 10088, escape_newlines: 0}
        $("#comment").autoPreview("/mantid/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/mantid/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="../chrome/site/style.css" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.mantidproject.org/"><img src="../chrome/site/mantid_logo_with_name.png" alt="Mantid Logo" width="250" /></a>
      </div>
      <form id="search" action="../search.html" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="https://trac.mantidproject.org/mantid/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="../wiki/TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first"><a href="../wiki.html">Wiki</a></li><li><a href="../timeline.html">Timeline</a></li><li><a href="../roadmap.html">Roadmap</a></li><li class="active"><a href="../report.html">View Tickets</a></li><li class="last"><a href="../search.html">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span>&larr; <a class="prev" href="10087.html" title="Ticket #10087">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="10089.html" title="Ticket #10089">Next Ticket</a> &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="10088.html">Ticket #10088</a>
          <span class="status">(closed: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-08T11%3A07%3A24%2B01%3A00&amp;precision=second" title="2014-08-08T11:07:24+01:00 in Timeline">6 years</a> ago</p>
    <p>Last modified <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T03%3A45%3A08%2B01%3A00&amp;precision=second" title="2015-06-04T03:45:08+01:00 in Timeline">5 years</a> ago</p>
  </div>
  <h2 class="summary searchable">LoadISISNexus with partial spectra loading does not assign correct monitors to loaded spectra</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;reporter=Alex+Buts">Alex Buts</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;owner=Alex+Buts">Alex Buts</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;priority=critical">critical</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="../milestone/Release&#32;3.2.1.html">Release 3.2.1</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="https://trac.mantidproject.org/mantid/query?status=!closed&amp;component=Framework">Framework</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby"><span></span></td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking"><span></span></td>
        <th id="h_tester">
          Tester:
        </th>
        <td headers="h_tester">
              Martyn Gigg
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Take ISIS nexus histogram mode data file LET00018118.nxs (any recent 11doors should do) and run the following script:
</p>
<pre class="wiki">Load(Filename='LET00018118.nxs', OutputWorkspace='LET00018118', LoaderName='LoadISISNexus', LoaderVersion=2)
ExtractSingleSpectrum(InputWorkspace='LET00018118', OutputWorkspace='BLET0001773', WorkspaceIndex=73733)


Load(Filename='LET00018118.nxs', OutputWorkspace='ALET00018118', LoaderName='LoadISISNexus', LoaderVersion=2, SpectrumMin=73734, SpectrumMax=73734)

</pre><p>
Then look at the detectors for spectra BLET00018118 and ALET00018118. The first would be Spectrum index 0 Spectrum No 73,734, monitor (this is correct) and the second would be Spectrum index 0 Spectrum No 1 (A detector, corresponding to the first detector in the whole loaded instrument spectra) This is wrong.
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="10088.html#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-08T17%3A13%3A02%2B01%3A00&amp;precision=second" title="2014-08-08T17:13:02+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Failing attempt to change loading
</p>
<p>
(does not work correctly)
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/f17db4d62b10ac2eaee1b78b8e6c573337501bc6" title="f17db4d62b10ac2eaee1b78b8e6c573337501bc6">f17db4d62b10ac2eaee1b78b8e6c573337501bc6</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="10088.html#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-08T17%3A14%3A10%2B01%3A00&amp;precision=second" title="2014-08-08T17:14:10+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Change necessary for working without precompiled headers
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/7026fcf1ff04db4f7e8c5edd7b3dada751172bb8" title="7026fcf1ff04db4f7e8c5edd7b3dada751172bb8">7026fcf1ff04db4f7e8c5edd7b3dada751172bb8</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="10088.html#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-11T08%3A43%3A35%2B01%3A00&amp;precision=second" title="2014-08-11T08:43:35+01:00 in Timeline">6 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>assigned</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="10088.html#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-11T11%3A10%3A43%2B01%3A00&amp;precision=second" title="2014-08-11T11:10:43+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>assigned</em> to <em>inprogress</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Map is build seems correctly but detID-s are still wrong
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8cdfaf2eb7b9910235d94397ce9160a32404a734" title="8cdfaf2eb7b9910235d94397ce9160a32404a734">8cdfaf2eb7b9910235d94397ce9160a32404a734</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="10088.html#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-11T15%3A10%3A05%2B01%3A00&amp;precision=second" title="2014-08-11T15:10:05+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Mainly done, checks and optimization is needed
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/9db55ebed6bce4051ed2c393764c93339af6c168" title="9db55ebed6bce4051ed2c393764c93339af6c168">9db55ebed6bce4051ed2c393764c93339af6c168</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="10088.html#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-11T15%3A58%3A27%2B01%3A00&amp;precision=second" title="2014-08-11T15:58:27+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Got rid of m_spectra_list in favor of m_specNum2SpecID map
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/5783a2aa7e7cdc06683dcba257898ca76d35eb00" title="5783a2aa7e7cdc06683dcba257898ca76d35eb00">5783a2aa7e7cdc06683dcba257898ca76d35eb00</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="10088.html#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-11T19%3A24%3A11%2B01%3A00&amp;precision=second" title="2014-08-11T19:24:11+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Unit tests to check the changes and correct behavior
</p>
<p>
+ final bugs fixed for LoadISISNexus2
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/c39baa82c348f4e160bcbc45d8a8610af878e2c1" title="c39baa82c348f4e160bcbc45d8a8610af878e2c1">c39baa82c348f4e160bcbc45d8a8610af878e2c1</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="10088.html#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-11T19%3A32%3A27%2B01%3A00&amp;precision=second" title="2014-08-11T19:32:27+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Doxygen errors
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/accdf340bc898d2dcd4c5842921a901bc403e966" title="accdf340bc898d2dcd4c5842921a901bc403e966">accdf340bc898d2dcd4c5842921a901bc403e966</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="10088.html#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-11T19%3A49%3A14%2B01%3A00&amp;precision=second" title="2014-08-11T19:49:14+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> GCC warnings
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/032ff6f0233c00563775a5df74b6e58d4c786fac" title="032ff6f0233c00563775a5df74b6e58d4c786fac">032ff6f0233c00563775a5df74b6e58d4c786fac</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="10088.html#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-11T19%3A49%3A15%2B01%3A00&amp;precision=second" title="2014-08-11T19:49:15+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Prospective Coverity warnings
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b6b27700fad6ca2914395f8abaac80bbbfaf581c" title="b6b27700fad6ca2914395f8abaac80bbbfaf581c">b6b27700fad6ca2914395f8abaac80bbbfaf581c</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:11" class="cnum">
      <a href="10088.html#comment:11">comment:11</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-12T09%3A29%3A51%2B01%3A00&amp;precision=second" title="2014-08-12T09:29:51+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> a bit more tests for different options
</p>
<p>
especially correspondence between spectra and detectors maps.
</p>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/86656b220058344ab822ed955fb196370111766d" title="86656b220058344ab822ed955fb196370111766d">86656b220058344ab822ed955fb196370111766d</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:12" class="cnum">
      <a href="10088.html#comment:12">comment:12</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-12T09%3A41%3A25%2B01%3A00&amp;precision=second" title="2014-08-12T09:41:25+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
both ways of loading a spectra in the script above should now return the same result. 
</p>
<p>
I have also added unit tests which verify correct behaviour. A tester may try them first to ensure they fail before this fix. Now they pass. 
</p>
<p>
A careful tester may pick a different ISIS nexus file (histogram more), try to load different spectra and spectra ranges and ensure that he gets the expected results. (partially loaded workspace's spectra have spectra numbers and detectors ID-s corresponding to the full workspace spectra and detector's ID-s. 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:13" class="cnum">
      <a href="10088.html#comment:13">comment:13</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-12T09%3A41%3A32%2B01%3A00&amp;precision=second" title="2014-08-12T09:41:32+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>inprogress</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-14">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:14" class="cnum">
      <a href="10088.html#comment:14">comment:14</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-13T14%3A46%3A01%2B01%3A00&amp;precision=second" title="2014-08-13T14:46:01+01:00 in Timeline">6 years</a> ago by Nick Draper
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Keywords</strong>
        <em>PatchCandidate</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-15">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:15" class="cnum">
      <a href="10088.html#comment:15">comment:15</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-14T07%3A42%3A54%2B01%3A00&amp;precision=second" title="2014-08-14T07:42:54+01:00 in Timeline">6 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li><li>
      <strong>Tester</strong>
        set to <em>Martyn Gigg</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-16">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:16" class="cnum">
      <a href="10088.html#comment:16">comment:16</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-14T08%3A35%3A45%2B01%3A00&amp;precision=second" title="2014-08-14T08:35:45+01:00 in Timeline">6 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>reopened</em>
    </li><li>
      <strong>Resolution</strong>
        <em>fixed</em> deleted
    </li><li>
      <strong>Summary</strong>
        changed from <em>LoadISISNexus with partial spectra loading does not assighn correct monitors to loaded spectra</em> to <em>LoadISISNexus with partial spectra loading does not assign correct monitors to loaded spectra</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
I'm happy that the code now seems to be doing the correct thing. I tried the LET example along with a mutli-period dataset from POLREF to check the partial loading of different spectra from multiple periods and it all looks fine.
</p>
<p>
Given the limited scope of the changes I'd be happy for this to make the patch. There is one minor thing that I think would improve understanding of the code and that is the name <tt>m_specInd2specNum_map</tt> and the associated method <tt>buildSpectraInd2SpectraNumMap</tt>. I think the term spectra index is confusing as it's not a term we use very often as we more often refer to it has workspace index. It is also not good style to have numbers in functions names and we should use the word <tt>to</tt> so could we rename that to something like <tt>m_wsIndexToSpecNumMap</tt> and <tt>buildWSIndexToSpecNumMap</tt>.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:17" class="cnum">
      <a href="10088.html#comment:17">comment:17</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-14T09%3A09%3A27%2B01%3A00&amp;precision=second" title="2014-08-14T09:09:27+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>reopened</em> to <em>verify</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Spectra index is confusing term but this is what is written as the column name in the detectors table. Despite I do not like it, I tried to adhere to what is there. 
</p>
<p>
This issue have no relation to the ticket and reflects personal preferences so if it worth renaming (may be it worth, I would agree with this -- but it should have wider scope), please write different ticket for it. 
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-14T09%3A10%3A05%2B01%3A00&amp;precision=second" title="2014-08-14T09:10:05+01:00 in Timeline">6 years</a> ago
                      by Alex Buts
                    (<a href="https://trac.mantidproject.org/mantid/ticket/10088?cversion=0&amp;cnum_hist=17#comment:17">previous</a>)
                    (<a href="https://trac.mantidproject.org/mantid/ticket/10088?action=comment-diff&amp;cnum=17&amp;version=1">diff</a>)
                </div>
              </div>
              <div class="change" id="trac-change-18">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:18" class="cnum">
      <a href="10088.html#comment:18">comment:18</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-14T13%3A01%3A45%2B01%3A00&amp;precision=second" title="2014-08-14T13:01:45+01:00 in Timeline">6 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verify</em> to <em>verifying</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-19">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:19" class="cnum">
      <a href="10088.html#comment:19">comment:19</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-14T13%3A02%3A03%2B01%3A00&amp;precision=second" title="2014-08-14T13:02:03+01:00 in Timeline">6 years</a> ago by Martyn Gigg
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>verifying</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Merge remote-tracking branch 'origin/bugfix/10088_PartialSpectraLoading'
</p>
<p>
Full changeset: <a class="ext-link" href="https://github.com/mantidproject/mantid/commit/6d060d104414ccfac23795ad37dc27d0fdfdea1d"><span class="icon">​</span>6d060d104414ccfac23795ad37dc27d0fdfdea1d</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:20" class="cnum">
      <a href="10088.html#comment:20">comment:20</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-14T15%3A24%3A07%2B01%3A00&amp;precision=second" title="2014-08-14T15:24:07+01:00 in Timeline">6 years</a> ago by Peter Peterson
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Keywords</strong>
        <em>PatchCandidate</em> removed
    </li><li>
      <strong>Milestone</strong>
        changed from <em>Release 3.3</em> to <em>Release 3.2.1</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-21">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:21" class="cnum">
      <a href="10088.html#comment:21">comment:21</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2014-08-20T12%3A03%3A16%2B01%3A00&amp;precision=second" title="2014-08-20T12:03:16+01:00 in Timeline">6 years</a> ago by Alex Buts
                </h3>
                
    <div class="comment searchable">
      
      <p>
Cherry-pick fixes from bugfix/10088_PartialSpectraLoading into next
</p>
<p>
Changes:
</p>
<blockquote>
<p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Failing attempt to change loading
</p>
</blockquote>
<blockquote>
<p>
(does not work correctly)
(cherry picked from commit <a class="changeset" href="https://github.com/mantidproject/mantid/commit/f17db4d62b10ac2eaee1b78b8e6c573337501bc6" title="f17db4d62b10ac2eaee1b78b8e6c573337501bc6">f17db4d62b10ac2eaee1b78b8e6c573337501bc6</a>)
</p>
</blockquote>
<blockquote>
<p>
Conflicts:
</p>
</blockquote>
<blockquote>
<blockquote>
<p>
Code/Mantid/Framework/DataHandling/src/LoadISISNexus2.cpp
</p>
</blockquote>
</blockquote>
<blockquote>
<p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Change necessary for working without precompiled headers
(cherry picked from commit <a class="changeset" href="https://github.com/mantidproject/mantid/commit/7026fcf1ff04db4f7e8c5edd7b3dada751172bb8" title="7026fcf1ff04db4f7e8c5edd7b3dada751172bb8">7026fcf1ff04db4f7e8c5edd7b3dada751172bb8</a>)
</p>
</blockquote>
<blockquote>
<p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Map is build seems correctly but detID-s are still wrong
(cherry picked from commit <a class="changeset" href="https://github.com/mantidproject/mantid/commit/8cdfaf2eb7b9910235d94397ce9160a32404a734" title="8cdfaf2eb7b9910235d94397ce9160a32404a734">8cdfaf2eb7b9910235d94397ce9160a32404a734</a>)
</p>
</blockquote>
<blockquote>
<p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Mainly done, checks and optimization is needed
(cherry picked from commit <a class="changeset" href="https://github.com/mantidproject/mantid/commit/9db55ebed6bce4051ed2c393764c93339af6c168" title="9db55ebed6bce4051ed2c393764c93339af6c168">9db55ebed6bce4051ed2c393764c93339af6c168</a>)
</p>
</blockquote>
<blockquote>
<p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Got rid of m_spectra_list in favor of m_specNum2SpecID map
(cherry picked from commit <a class="changeset" href="https://github.com/mantidproject/mantid/commit/5783a2aa7e7cdc06683dcba257898ca76d35eb00" title="5783a2aa7e7cdc06683dcba257898ca76d35eb00">5783a2aa7e7cdc06683dcba257898ca76d35eb00</a>)
</p>
</blockquote>
<blockquote>
<p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Unit tests to check the changes and correct behavior
</p>
</blockquote>
<blockquote>
<p>
+ final bugs fixed for LoadISISNexus2
(cherry picked from commit <a class="changeset" href="https://github.com/mantidproject/mantid/commit/c39baa82c348f4e160bcbc45d8a8610af878e2c1" title="c39baa82c348f4e160bcbc45d8a8610af878e2c1">c39baa82c348f4e160bcbc45d8a8610af878e2c1</a>)
</p>
</blockquote>
<blockquote>
<p>
Conflicts:
</p>
</blockquote>
<blockquote>
<blockquote>
<p>
Code/Mantid/Framework/DataHandling/test/LoadISISNexusTest.h
</p>
</blockquote>
</blockquote>
<blockquote>
<p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Doxygen errors
(cherry picked from commit <a class="changeset" href="https://github.com/mantidproject/mantid/commit/accdf340bc898d2dcd4c5842921a901bc403e966" title="accdf340bc898d2dcd4c5842921a901bc403e966">accdf340bc898d2dcd4c5842921a901bc403e966</a>)
</p>
</blockquote>
<blockquote>
<p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> GCC warnings
(cherry picked from commit <a class="changeset" href="https://github.com/mantidproject/mantid/commit/032ff6f0233c00563775a5df74b6e58d4c786fac" title="032ff6f0233c00563775a5df74b6e58d4c786fac">032ff6f0233c00563775a5df74b6e58d4c786fac</a>)
</p>
</blockquote>
<blockquote>
<p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> Prospective Coverity warnings
(cherry picked from commit <a class="changeset" href="https://github.com/mantidproject/mantid/commit/b6b27700fad6ca2914395f8abaac80bbbfaf581c" title="b6b27700fad6ca2914395f8abaac80bbbfaf581c">b6b27700fad6ca2914395f8abaac80bbbfaf581c</a>)
</p>
</blockquote>
<blockquote>
<p>
refs <a class="closed ticket" href="10088.html" title="LoadISISNexus with partial spectra loading does not assign correct ... (closed: fixed)">#10088</a> a bit more tests for different options
</p>
</blockquote>
<blockquote>
<p>
especially correspondence between spectra and detectors maps.
(cherry picked from commit <a class="changeset" href="https://github.com/mantidproject/mantid/commit/86656b220058344ab822ed955fb196370111766d" title="86656b220058344ab822ed955fb196370111766d">86656b220058344ab822ed955fb196370111766d</a>)
</p>
</blockquote>
<p>
Changeset: <a class="changeset" href="https://github.com/mantidproject/mantid/commit/d39162507815916773b333de461f807df3fa8342" title="d39162507815916773b333de461f807df3fa8342">d39162507815916773b333de461f807df3fa8342</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-22">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:22" class="cnum">
      <a href="10088.html#comment:22">comment:22</a>
    </span>
                  </span>
                  Changed <a class="timeline" href="https://trac.mantidproject.org/mantid/timeline?from=2015-06-04T03%3A45%3A08%2B01%3A00&amp;precision=second" title="2015-06-04T03:45:08+01:00 in Timeline">5 years</a> ago by Stuart Campbell
                </h3>
                
    <div class="comment searchable">
      
      <p>
This ticket has been transferred to github issue <a class="ext-link" href="http://github.com/mantidproject/mantid/issues/10930"><span class="icon">​</span>10930</a>
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="../wiki/TracTickets.html">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10088?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10088?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="https://trac.mantidproject.org/mantid/ticket/10088?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 0.12.5</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>